!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("Avalon requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(b,c){function d(){b.console&&avalon.config.debug&&Function.apply.call(console.log,console,arguments)}function e(){}function f(a,b){"string"==typeof a&&(a=a.match(Db)||[]);for(var c={},d=void 0!==b?b:1,e=0,f=a.length;f>e;e++)c[a[e]]=d;return c}function g(){if(b.VBArray){var a=document.documentMode;return a?a:b.XMLHttpRequest?7:6}return 0}function h(a){return Gb.test(Jb.call(a))}function i(a,b){return a=Math.floor(a)||0,0>a?Math.max(b+a,0):Math.min(a,b)}function j(a){if(!a)return!1;var b=a.length;if(b===b>>>0){var c=Jb.call(a).slice(8,-1);if(/(?:regexp|string|function|window|global)$/i.test(c))return!1;if("Array"===c)return!0;try{return{}.propertyIsEnumerable.call(a,"length")===!1?/^\s?function/.test(a.item||a.callee):!0}catch(d){return!a.window}}return!1}function k(a,b,c){var d="for(var "+a+"i=0,n = this.length; i < n; i++){"+b.replace("_","((i in this) && fn.call(scope,this[i],i,this))")+"}"+c;return Function("fn,scope",d)}function l(a,b){try{for(;b=b.parentNode;)if(b===a)return!0;return!1}catch(c){return!1}}function m(){return(new XMLSerializer).serializeToString(this)}function o(a,b){if(a&&a.childNodes)for(var c,d=a.childNodes,e=0;c=d[e++];)if(c.tagName){var f=vb.createElementNS(dc,c.tagName.toLowerCase());Kb.forEach.call(c.attributes,function(a){f.setAttribute(a.name,a.value)}),o(c,f),b.appendChild(f)}}function p(a){var b={};for(var c in a)b[c]=a[c];var d=b.target=a.srcElement;if(0===a.type.indexOf("key"))b.which=null!=a.charCode?a.charCode:a.keyCode;else if(fc.test(a.type)){var e=d.ownerDocument||vb,f="BackCompat"===e.compatMode?e.body:e.documentElement;b.pageX=a.clientX+(f.scrollLeft>>0)-(f.clientLeft>>0),b.pageY=a.clientY+(f.scrollTop>>0)-(f.clientTop>>0),b.wheelDeltaY=b.wheelDelta,b.wheelDeltaX=0}return b.timeStamp=new Date-0,b.originalEvent=a,b.preventDefault=function(){a.returnValue=!1},b.stopPropagation=function(){a.cancelBubble=!0},b}function q(a){for(var b in a)if(Ib.call(a,b)){var c=a[b];"function"==typeof q.plugins[b]?q.plugins[b](c):"object"==typeof q[b]?avalon.mix(q[b],c):q[b]=c}return this}function r(a){return(a+"").replace(oc,"\\$&")}function s(a,b,c){if(Ub(b)||b&&b.nodeType)return!1;if(-1!==c.indexOf(a))return!1;if(-1!==vc.indexOf(a))return!1;var d=c.$special;return a&&"$"===a.charAt(0)&&!d[a]?!1:!0}function t(a,b,c,d){switch(a.type){case 0:var e=a.get,f=a.set;if(Ub(f)){var g=d.$events,h=g[b];g[b]=[],f.call(d,c),g[b]=h}return e.call(d);case 1:return c;case 2:if(c!==d.$model[b]){var i=a.svmodel=w(d,b,c,a.valueType);c=i.$model;var j=wc[i.$id];j&&j()}return c}}function u(a,b,c){if(Array.isArray(a)){var d=a.concat();a.length=0;var f=y(a);return f.pushArray(d),f}if("number"==typeof a.nodeType)return a;if(a.$id&&a.$events)return a;Array.isArray(a.$skipArray)||(a.$skipArray=[]),a.$skipArray.$special=b||{};var g={};c=c||{};var h={},i={},j=[];for(var k in a)!function(b,d){if(c[b]=d,s(b,d,a.$skipArray)){h[b]=[];var f=avalon.type(d),k=function(a){var b=k._name,c=this,d=c.$model,e=d[b],f=c.$events;return arguments.length?void(Cb||(1===k.type||(a=t(k,b,a,c),k.type))&&(Bc(e,a)||(d[b]=a,f.$digest?k.pedding||(k.pedding=!0,setTimeout(function(){H(f[b]),v(c,b,d[b],e),k.pedding=!1})):(H(f[b]),v(c,b,a,e))))):0===k.type?(a=k.get.call(c),e!==a&&(d[b]=a,f.$digest?k.pedding||(k.pedding=!0,setTimeout(function(){v(c,b,d[b],e),k.pedding=!1})):v(c,b,a,e)),a):(C(f[b]),k.svmodel||e)};"object"===f&&Ub(d.get)&&Object.keys(d).length<=2?(k.set=d.set,k.get=d.get,k.type=0,j.push(function(){var a={evaluator:function(){a.type=Math.random(),a.element=null,c[b]=k.get.call(g)},element:wb,type:Math.random(),handler:e,args:[]};Mb[ub]=a,k.call(g),delete Mb[ub]})):Eb.test(f)?(k.type=2,k.valueType=f,j.push(function(){var a=u(d,0,c[b]);k.svmodel=a,a.$events[zb]=h[b]})):k.type=1,k._name=b,i[b]=k}}(k,a[k]);vc.forEach(function(b){delete a[b],delete c[b]}),g=zc(g,Cc(i),a);for(var l in a)i[l]||(g[l]=a[l]);g.$id=Sb(),g.$model=c,g.$events=h;for(k in tc){var m=tc[k];Nb||(m=m.bind(g)),g[k]=m}return yc?Object.defineProperty(g,"hasOwnProperty",{value:function(a){return a in this.$model},writable:!1,enumerable:!1,configurable:!0}):g.hasOwnProperty=function(a){return a in g.$model},j.forEach(function(a){a()}),g}function v(a,b,c,d){a.$events&&tc.$fire.call(a,b,c,d)}function w(a,b,c,d){var e=a[b];if("array"===d)return Array.isArray(c)&&e!==c?(e._.$unwatch(),e.clear(),e._.$watch(),e.pushArray(c.concat()),e):e;var f=a.$events[b],g=e.$events.$withProxyPool;g&&(qb(g,"with"),e.$events.$withProxyPool=null);var h=u(c);return h.$events[zb]=f,wc[h.$id]=function(a){for(;a=f.shift();)!function(a){avalon.nextTick(function(){a.type&&(a.rollback&&a.rollback(),Xb[a.type](a,a.vmodels))})}(a);delete wc[h.$id]},h}function x(a,b,c,d){var e=b[c];return 4!==arguments.length?e.call(a):void e.call(a,d)}function y(a){var b=[];b.$id=Sb(),b.$model=a,b.$events={},b.$events[zb]=[],b._=u({length:a.length}),b._.$watch("length",function(a,c){b.$fire("length",a,c)});for(var c in tc)b[c]=tc[c];return avalon.mix(b,Ec),b}function z(a,b,c,d,e,f,g){for(var h=this.length,i=2;--i;){switch(a){case"add":var j=this.$model.slice(b,b+c).map(function(a){return Eb.test(avalon.type(a))?a.$id?a:u(a,0,a):a});Dc.apply(this,[b,0].concat(j)),this._fire("add",b,c);break;case"del":var k=this._splice(b,c);this._fire("del",b,c)}e&&(a=e,b=f,c=g,i=2,e=0)}return this._fire("index",d),this.length!==h&&(this._.length=this.length),k}function A(a,b){for(var c={},d=0,e=b.length;e>d;d++){c[d]=a[d];var f=b[d];f in c?(a[d]=c[f],delete c[f]):a[d]=a[f]}}function B(a){Mb[ub]=a,avalon.openComputedCollect=!0;var b=a.evaluator;if(b)try{var c=Fc.test(a.type)?a:b.apply(0,a.args);a.handler(c,a.element,a)}catch(d){delete a.evaluator;var e=a.element;if(3===e.nodeType){var f=e.parentNode;q.commentInterpolate?f.replaceChild(vb.createComment(a.value),e):e.data=jc+a.value+kc}}avalon.openComputedCollect=!1,delete Mb[ub]}function C(a){var b=Mb[ub];a&&b&&avalon.Array.ensure(a,b)&&b.element&&D(b,a)}function D(a,b){a.$uuid=a.$uuid||Sb(),b.$uuid=b.$uuid||Sb();var c={data:a,list:b,$$uuid:a.$uuid+b.$uuid};Gc[c.$$uuid]||(Gc[c.$$uuid]=1,Gc.push(c))}function E(a){a.element=null,a.rollback&&a.rollback();for(var b in a)a[b]=null}function F(a){try{if(!a.parentNode)return!0}catch(b){return!0}return a.msRetain?0:1===a.nodeType?"number"==typeof a.sourceIndex?0===a.sourceIndex:!Ob.contains(a):!avalon.contains(Ob,a)}function G(){for(var a,b=Gc.length,c=b,d=0,e=[],f={},g={};a=Gc[--b];){var h=a.data,i=h.type;f[i]?f[i]++:(f[i]=1,e.push(i))}var j=!1;if(e.forEach(function(a){Ic[a]!==f[a]&&(g[a]=1,j=!0)}),b=c,j)for(;a=Gc[--b];)h=a.data,void 0!==h.element&&g[h.type]&&F(h.element)&&(d++,Gc.splice(b,1),delete Gc[a.$$uuid],avalon.Array.remove(a.list,h),E(h),a.data=a.list=null);Ic=f,Hc=new Date}function H(a){if(a&&a.length){new Date-Hc>444&&"object"==typeof a[0]&&G();for(var b,c=Lb.call(arguments,1),d=a.length;b=a[--d];){var f=b.element;if(f&&f.parentNode)if(b.$repeat)b.handler.apply(b,c);else if("on"!==b.type){var g=b.evaluator||e;b.handler(g.apply(0,b.args||[]),f,b)}}}}function I(a){var b=a.nodeName;return b.toLowerCase()===b&&a.scopeName&&""===a.outerText}function J(a){"url(#default#VML)"!==a.currentStyle.behavior&&(a.style.behavior="url(#default#VML)",a.style.display="inline-block",a.style.zoom=1)}function K(a,b,c){var d=setTimeout(function(){var e=a.innerHTML;clearTimeout(d),e===c?b():K(a,b,e)})}function L(a,b){var c=a.getAttribute("avalonctrl")||b.$id;a.setAttribute("avalonctrl",c),b.$events.expr=a.tagName+'[avalonctrl="'+c+'"]'}function M(a,b){for(var c,d=0;c=a[d++];)c.vmodels=b,Xb[c.type](c,b),c.evaluator&&c.element&&1===c.element.nodeType&&c.element.removeAttribute(c.name);a.length=0}function N(a,b){return a.priority-b.priority}function O(a,b){for(var c,e,f=cd?cd(a):avalon.slice(a.attributes),g=[],h={},i=0;e=f[i++];)if(e.specified&&(c=e.name.match(Tc))){var j=c[1],k=c[2]||"",l=e.value,m=e.name;if(h[m]=l,Vc[j]?(k=j,j="on"):Wc[j]&&(d("ms-"+j+"已经被废弃,请使用ms-attr-*代替"),"enabled"===j&&(j="disabled",l="!("+l+")"),k=j,j="attr",a.removeAttribute(m),m="ms-attr-"+k,a.setAttribute(m,l),c=[m],h[m]=l),"function"==typeof Xb[j]){var n={type:j,param:k,element:a,name:c[0],value:l,priority:j in Uc?Uc[j]:10*j.charCodeAt(0)+(Number(k)||0)};if("html"===j||"text"===j){var o=T(l);avalon.mix(n,o),n.filters=n.filters.replace(dd,function(){return n.type="html",n.group=1,""})}"ms-if-loop"===m&&(n.priority+=100),b.length&&(g.push(n),"widget"===j&&(a.msData=a.msData||h))}}g.sort(N),h["ms-attr-checked"]&&h["ms-duplex"]&&d("warning!一个元素上不能同时定义ms-attr-checked与ms-duplex");var p=!0;for(i=0;n=g[i];i++){if(j=n.type,Xc.test(j))return M(g.slice(0,i+1),b);p&&(p=!Yc.test(j))}M(g,b),p&&!Qc[a.tagName]&&nc.test(a.innerHTML.replace(fd,"<").replace(gd,">"))&&(Sc&&Sc(a),P(a,b))}function P(a,b){for(var c=a.firstChild;c;){var d=c.nextSibling;R(c,c.nodeType,b),c=d}}function Q(a,b){for(var c,d=0;c=a[d++];)R(c,c.nodeType,b)}function R(a,b,c){1===b?S(a,c):3===b&&lc.test(a.data)?V(a,c):q.commentInterpolate&&8===b&&!lc.test(a.nodeValue)&&V(a,c)}function S(a,b,c){var e=a.getAttribute("ms-skip");if(!a.getAttributeNode)return d("warning "+a.tagName+" no getAttributeNode method");var f=a.getAttributeNode("ms-important"),g=a.getAttributeNode("ms-controller");if("string"!=typeof e){if(c=f||g){var h=avalon.vmodels[c.value];if(!h)return;b=c===f?[h]:[h].concat(b);var i=c.name;a.removeAttribute(i),avalon(a).removeClass(i),L(a,h)}O(a,b)}}function T(a){if(a.indexOf("|")>0){var b=a.replace(rstringLiteral,function(a){return Array(a.length+1).join("1")}),c=b.replace(ed,"ᄢ㍄").indexOf("|");if(c>-1)return{filters:a.slice(c),value:a.slice(0,c),expr:!0}}return{value:a,filters:"",expr:!0}}function U(a){for(var b,c,d=[],e=0;;){if(c=a.indexOf(jc,e),-1===c)break;if(b=a.slice(e,c),b&&d.push({value:b,filters:"",expr:!1}),e=c+jc.length,c=a.indexOf(kc,e),-1===c)break;b=a.slice(e,c),b&&d.push(T(b)),e=c+kc.length}return b=a.slice(e),b&&d.push({value:b,expr:!1,filters:""}),d}function V(a,b){var c=[];if(8===a.nodeType)var d=T(a.nodeValue),e=[d];else e=U(a.data);if(e.length){for(var f=0;d=e[f++];){var g=vb.createTextNode(d.value);d.expr&&(d.type="text",d.element=g,d.filters=d.filters.replace(dd,function(){return d.type="html",d.group=1,""}),c.push(d)),Pb.appendChild(g)}a.parentNode.replaceChild(Pb,a),c.length&&M(c,b)}}function W(a){return a.replace(/([a-z\d])([A-Z]+)/g,"$1-$2").toLowerCase()}function X(a){return a.indexOf("-")<0&&a.indexOf("_")<0?a:a.replace(/[-_][^-_]/g,function(a){return a.charAt(1).toUpperCase()})}function Y(a){if(!("classList"in a)){a.classList={node:a};for(var b in hd)a.classList[b.slice(1)]=hd[b]}return a.classList}function Z(a){try{if("object"==typeof a)return a;a="true"===a?!0:"false"===a?!1:"null"===a?null:+a+""===a?+a:id.test(a)?avalon.parseJSON(a):a}catch(b){}return a}function $(a){return a.window&&a.document?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}function _(a,b){if(a.offsetWidth<=0){if(xd.test(nd["@:get"](a,"display"))){var c={node:a};for(var d in wd)c[d]=a.style[d],a.style[d]=wd[d];b.push(c)}var e=a.parentNode;e&&1===e.nodeType&&_(e,b)}}function ab(a){var b=a.tagName.toLowerCase();return"input"===b&&/checkbox|radio/.test(a.type)?"checked":b}function bb(a,b,c,d){for(var e,f=[],g=" = "+c+".",h=a.length;e=a[--h];)b.hasOwnProperty(e)&&(f.push(e+g+e),d.vars.push(e),"duplex"===d.type&&(a.get=c+"."+e),a.splice(h,1));return f}function cb(a){for(var b=[],c={},d=0;d<a.length;d++){var e=a[d],f=e&&"string"==typeof e.$id?e.$id:e;c[f]||(c[f]=b.push(e))}return b}function db(a,b){return b=b.replace(Nd,"").replace(Od,function(){return"],|"}).replace(Pd,function(a,b){return"["+Bd(b)}).replace(Qd,function(){return'"],["'}).replace(Rd,function(){return'",'})+"]","return avalon.filters.$filter("+a+", "+b+")"}function eb(a,b,c){var f=c.type,g=c.filters||"",h=b.map(function(a){return String(a.$id).replace(Md,"$1")})+a+f+g,i=Jd(a).concat(),j=[],k=[],l=[],m="";b=cb(b),c.vars=[];for(var n=0,o=b.length;o>n;n++)if(i.length){var p="vm"+ub+"_"+n;k.push(p),l.push(b[n]),j.push.apply(j,bb(i,b[n],p,c))}if(j.length||"duplex"!==f){"duplex"!==f&&(a.indexOf("||")>-1||a.indexOf("&&")>-1)&&c.vars.forEach(function(b){var c=new RegExp("\\b"+b+"(?:\\.\\w+|\\[\\w+\\])+","ig");a=a.replace(c,function(c){var d=c.charAt(b.length),e=Tb?a.slice(arguments[1]+c.length):RegExp.rightContext,f=/^\s*\(/.test(e);if("."===d||"["===d||f){var g="var"+String(Math.random()).replace(/^0\./,"");if(f){var h=c.split(".");if(h.length>2){var i=h.pop();return j.push(g+" = "+h.join(".")),g+"."+i}return c}return j.push(g+" = "+c),g}return c})}),c.args=l;var q=Kd.get(h);if(q)return void(c.evaluator=q);if(m=j.join(", "),m&&(m="var "+m),/\S/.test(g)){if(!/text|html/.test(c.type))throw Error("ms-"+c.type+"不支持过滤器");a="\nvar ret"+ub+" = "+a+";\r\n",a+=db("ret"+ub,g)}else{if("duplex"===f){var r="'use strict';\nreturn function(vvv){\n	"+m+";\n	if(!arguments.length){\n		return "+a+"\n	}\n	"+(Ld.test(a)?a:i.get)+"= vvv;\n} ";try{q=Function.apply(e,k.concat(r)),c.evaluator=Kd.put(h,q)}catch(s){d("debug: parse error,"+s.message)}return}if("on"===f){-1===a.indexOf("(")?a+=".call(this, $event)":a=a.replace("(",".call(this,"),k.push("$event"),a="\nreturn "+a+";";var t=a.lastIndexOf("\nreturn"),u=a.slice(0,t),v=a.slice(t);a=u+"\n"+v}else a="\nreturn "+a+";"}try{q=Function.apply(e,k.concat("'use strict';\n"+m+a)),c.evaluator=Kd.put(h,q)}catch(s){d("debug: parse error,"+s.message)}finally{i=textBuffer=k=null}}}function fb(a,b,c,d,e){Array.isArray(d)&&(a=d.map(function(a){return a.expr?"("+a.value+")":Bd(a.value)}).join(" + ")),eb(a,b,c),c.evaluator&&!e&&(c.handler=Yb[c.handlerName||c.type],B(c))}function gb(a){return null==a?"":a}function hb(a,b,c){return b.param.replace(/\w+/g,function(d){var e=avalon.duplexHooks[d];e&&"function"==typeof e[c]&&(a=e[c](a,b))}),a}function ib(){for(var a=ae.length-1;a>=0;a--){var b=ae[a];b()===!1&&ae.splice(a,1)}ae.length||clearInterval(_d)}function jb(a,b,c,d){var e=a.template.cloneNode(!0),f=avalon.slice(e.childNodes);c.$stamp&&e.insertBefore(c.$stamp,e.firstChild),b.appendChild(e);var g=[c].concat(a.vmodels),h={nodes:f,vmodels:g};d.push(h)}function kb(a,b){var c=a.proxies[b];return c?c.$stamp:a.element}function lb(a,b,c){for(;;){var d=b.previousSibling;if(!d)break;if(d.parentNode.removeChild(d),c&&c.call(d),d===a)break}}function mb(a){var b={$host:[],$outer:{},$stamp:1,$index:0,$first:!1,$last:!1,$remove:avalon.noop};b[a]={get:function(){return this.$host[this.$index]},set:function(a){this.$host.set(this.$index,a)}};var c={$last:1,$first:1,$index:1},d=u(b,c),e=d.$events;return e[a]=e.$first=e.$last=e.$index,d.$id=Sb("$proxy$each"),d}function nb(a,b){for(var c,d=b.param||"el",e=0,f=de.length;f>e;e++){var g=de[e];g&&g.hasOwnProperty(d)&&(c=g,de.splice(e,1))}c||(c=mb(d));var h=b.$repeat,i=h.length-1;return c.$index=a,c.$first=0===a,c.$last=a===i,c.$host=h,c.$outer=b.$outer,c.$stamp=b.clone.cloneNode(!1),c.$remove=function(){return h.removeAt(c.$index)},c}function ob(){var a=u({$key:"",$outer:{},$host:{},$val:{get:function(){return this.$host[this.$key]},set:function(a){this.$host[this.$key]=a}}},{$val:1});return a.$id=Sb("$proxy$with"),a}function pb(a,b){var c=ee.pop();c||(c=ob());var d=b.$repeat;return c.$key=a,c.$host=d,c.$outer=b.$outer,d.$events?c.$events.$val=d.$events[a]:c.$events={},c}function qb(a,b){var c="each"===b?de:ee;avalon.each(a,function(a,b){if(b.$events){for(var d in b.$events)Array.isArray(b.$events[d])&&(b.$events[d].forEach(function(a){"object"==typeof a&&E(a)}),b.$events[d].length=0);b.$host=b.$outer={},c.unshift(b)>q.maxRepeatSize&&c.pop()}}),"each"===b&&(a.length=0)}function rb(a,b){var c="_"+a;if(!rb[c]){var d=vb.createElement(a);Ob.appendChild(d),b=Nb?getComputedStyle(d,null).display:d.currentStyle.display,Ob.removeChild(d),rb[c]=b}return rb[c]}function sb(a,b,c,d){a=(a+"").replace(/[^0-9+\-Ee.]/g,"");var e=isFinite(+a)?+a:0,f=isFinite(+b)?Math.abs(b):3,g=d||",",h=c||".",i="",j=function(a,b){var c=Math.pow(10,b);return""+(Math.round(a*c)/c).toFixed(b)};return i=(f?j(e,f):""+Math.round(e)).split("."),i[0].length>3&&(i[0]=i[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,g)),(i[1]||"").length<f&&(i[1]=i[1]||"",i[1]+=new Array(f-i[1].length+1).join("0")),i.join(h)}function tb(){try{Ob.doScroll("left"),qe()}catch(a){setTimeout(tb)}}var ub=new Date-0,vb=b.document,wb=vb.getElementsByTagName("head")[0],xb=wb.insertBefore(document.createElement("avalon"),wb.firstChild);xb.innerHTML="X<style id='avalonStyle'>.avalonHide{ display: none!important }</style>",xb.setAttribute("ms-skip","1"),xb.className="avalonHide";var yb=/\[native code\]/,zb="$"+ub,Ab=b.require,Bb=b.define,Cb=!1,Db=/[^, ]+/g,Eb=/^(?:object|array)$/,Fb=/^\[object SVG\w*Element\]$/,Gb=/^\[object (?:Window|DOMWindow|global)\]$/,Hb=Object.prototype,Ib=Hb.hasOwnProperty,Jb=Hb.toString,Kb=Array.prototype,Lb=Kb.slice,Mb={},Nb=b.dispatchEvent,Ob=vb.documentElement,Pb=vb.createDocumentFragment(),Qb=vb.createElement("div"),Rb={};"Boolean Number String Function Array Date RegExp Object Error".replace(Db,function(a){Rb["[object "+a+"]"]=a.toLowerCase()});var Sb=function(a){return a=a||"avalon",(a+Math.random()+Math.random()).replace(/0\./g,"")},Tb=g();avalon=function(a){return new avalon.init(a)},avalon.nextTick=new function(){function a(){for(var a=f.length,b=0;a>b;b++)f[b]();f=f.slice(a)}var c=b.setImmediate,d=b.MutationObserver,e=Nb&&b.postMessage;if(c)return c.bind(b);var f=[];if(d){var g=document.createTextNode("avalon");return new d(a).observe(g,{characterData:!0}),function(a){f.push(a),g.data=Math.random()}}return e?(b.addEventListener("message",function(c){var d=c.source;d!==b&&null!==d||"process-tick"!==c.data||(c.stopPropagation(),a())}),function(a){f.push(a),b.postMessage("process-tick","*")}):function(a){setTimeout(a,0)}},avalon.init=function(a){this[0]=this.element=a},avalon.fn=avalon.prototype=avalon.init.prototype,avalon.type=function(a){return null==a?String(a):"object"==typeof a||"function"==typeof a?Rb[Jb.call(a)]||"object":typeof a};var Ub="object"==typeof alert?function(a){try{return/^\s*\bfunction\b/.test(a+"")}catch(b){return!1}}:function(a){return"[object Function]"===Jb.call(a)};avalon.isFunction=Ub,avalon.isWindow=function(a){return a?a==a.document&&a.document!=a:!1},h(b)&&(avalon.isWindow=h);var Vb;for(Vb in avalon({}))break;var Wb="0"!==Vb;avalon.isPlainObject=function(a,b){if(!a||"object"!==avalon.type(a)||a.nodeType||avalon.isWindow(a))return!1;try{if(a.constructor&&!Ib.call(a,"constructor")&&!Ib.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(Wb)for(b in a)return Ib.call(a,b);for(b in a);return void 0===b||Ib.call(a,b)},yb.test(Object.getPrototypeOf)&&(avalon.isPlainObject=function(a){return"[object Object]"===Jb.call(a)&&Object.getPrototypeOf(a)===Hb}),avalon.mix=avalon.fn.mix=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[1]||{},h++),"object"==typeof g||Ub(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a){c=g[b];try{d=a[b]}catch(k){continue}g!==d&&(j&&d&&(avalon.isPlainObject(d)||(e=Array.isArray(d)))?(e?(e=!1,f=c&&Array.isArray(c)?c:[]):f=c&&avalon.isPlainObject(c)?c:{},g[b]=avalon.mix(j,f,d)):void 0!==d&&(g[b]=d))}return g},avalon.mix({rword:Db,subscribers:zb,version:1.4,ui:{},log:d,slice:Nb?function(a,b,c){return Lb.call(a,b,c)}:function(a,b,c){var d=[],e=a.length;if(void 0===c&&(c=e),"number"==typeof c&&isFinite(c)){b=i(b,e),c=i(c,e);for(var f=b;c>f;++f)d[f-b]=a[f]}return d},noop:e,error:function(a,b){throw(b||Error)(a)},oneObject:f,range:function(a,b,c){c||(c=1),null==b&&(b=a||0,a=0);for(var d=-1,e=Math.max(0,Math.ceil((b-a)/c)),f=new Array(e);++d<e;)f[d]=a,a+=c;return f},eventHooks:{},bind:function(a,b,c,d){var e=avalon.eventHooks,f=e[b];"object"==typeof f&&(b=f.type,f.deel&&(c=f.deel(a,b,c,d)));var g=Nb?c:function(b){c.call(a,p(b))};return Nb?a.addEventListener(b,g,!!d):a.attachEvent("on"+b,g),g},unbind:function(a,b,c,d){var f=avalon.eventHooks,g=f[b],h=c||e;"object"==typeof g&&(b=g.type,g.deel&&(c=g.deel(a,b,c,!1))),Nb?a.removeEventListener(b,h,!!d):a.detachEvent("on"+b,h)},css:function(a,b,c){a instanceof avalon&&(a=a[0]);var d,e=/[_-]/.test(b)?X(b):b;if(b=avalon.cssName(e)||e,void 0===c||"boolean"==typeof c){d=nd[e+":get"]||nd["@:get"],"background"===b&&(b="backgroundColor");var f=d(a,b);return c===!0?parseFloat(f)||0:f}if(""===c)a.style[b]="";else{if(null==c||c!==c)return;isFinite(c)&&!avalon.cssNumber[e]&&(c+="px"),d=nd[e+":set"]||nd["@:set"],d(a,b,c)}},each:function(a,b){if(a){var c=0;if(j(a))for(var d=a.length;d>c&&b(c,a[c])!==!1;c++);else for(c in a)if(a.hasOwnProperty(c)&&b(c,a[c])===!1)break}},getWidgetData:function(a,b){var c=avalon(a).data(),d={};for(var e in c)0===e.indexOf(b)&&(d[e.replace(b,"").replace(/\w/,function(a){return a.toLowerCase()})]=c[e]);return d},Array:{ensure:function(a,b){return-1===a.indexOf(b)?a.push(b):void 0},removeAt:function(a,b){return!!a.splice(b,1).length},remove:function(a,b){var c=a.indexOf(b);return~c?avalon.Array.removeAt(a,c):!1}}});var Xb=avalon.bindingHandlers={},Yb=avalon.bindingExecutors={},Zb=new function(){function a(a){this.size=0,this.limit=a,this.head=this.tail=void 0,this._keymap={}}var b=a.prototype;return b.put=function(a,b){var c={key:a,value:b};return this._keymap[a]=c,this.tail?(this.tail.newer=c,c.older=this.tail):this.head=c,this.tail=c,this.size===this.limit?this.shift():this.size++,b},b.shift=function(){var a=this.head;a&&(this.head=this.head.newer,this.head.older=a.newer=a.older=this._keymap[a.key]=void 0)},b.get=function(a){var b=this._keymap[a];if(void 0!==b)return b===this.tail?b.value:(b.newer&&(b===this.head&&(this.head=b.newer),b.newer.older=b.older),b.older&&(b.older.newer=b.newer),b.newer=void 0,b.older=this.tail,this.tail&&(this.tail.newer=b),this.tail=b,b.value)},a};if(!"司徒正美".trim){var $b=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g;String.prototype.trim=function(){return this.replace($b,"")}}var _b=!{toString:null}.propertyIsEnumerable("toString"),ac=function(){}.propertyIsEnumerable("prototype"),bc=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],cc=bc.length;if(Object.keys||(Object.keys=function(a){var b=[],c=ac&&"function"==typeof a;if("string"==typeof a||a&&a.callee)for(var d=0;d<a.length;++d)b.push(String(d));else for(var e in a)c&&"prototype"===e||!Ib.call(a,e)||b.push(String(e));if(_b)for(var f=a.constructor,g=f&&f.prototype===a,h=0;cc>h;h++){var i=bc[h];g&&"constructor"===i||!Ib.call(a,i)||b.push(i)}return b}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Jb.call(a)}),e.bind||(Function.prototype.bind=function(a){if(arguments.length<2&&void 0===a)return this;var b=this,c=arguments;return function(){var d,e=[];for(d=1;d<c.length;d++)e.push(c[d]);for(d=0;d<arguments.length;d++)e.push(arguments[d]);return b.apply(a,e)}}),yb.test([].map)||avalon.mix(Kb,{indexOf:function(a,b){var c=this.length,d=~~b;for(0>d&&(d+=c);c>d;d++)if(this[d]===a)return d;return-1},lastIndexOf:function(a,b){var c=this.length,d=null==b?c-1:b;for(0>d&&(d=Math.max(0,c+d));d>=0;d--)if(this[d]===a)return d;return-1},forEach:k("","_",""),filter:k("r=[],j=0,","if(_)r[j++]=this[i]","return r"),map:k("r=[],","r[i]=_","return r"),some:k("","if(_)return true","return false"),every:k("","if(!_)return false","return true")}),avalon.contains=l,Ob.contains||(Node.prototype.contains=function(a){return!!(16&this.compareDocumentPosition(a))}),vb.contains||(vb.contains=function(a){return l(vb,a)}),b.SVGElement){var dc="http://www.w3.org/2000/svg",ec=vb.createElementNS(dc,"svg");ec.innerHTML='<circle cx="50" cy="50" r="40" fill="red" />',Fb.test(ec.firstChild)||Object.defineProperties(SVGElement.prototype,{outerHTML:{enumerable:!0,configurable:!0,get:m,set:function(a){var b=this.tagName.toLowerCase(),c=this.parentNode,d=avalon.parseHTML(a);if("svg"===b)c.insertBefore(d,this);else{var e=vb.createDocumentFragment();o(d,e),c.insertBefore(e,this)}c.removeChild(this)}},innerHTML:{enumerable:!0,configurable:!0,get:function(){var a=this.outerHTML,b=new RegExp("<"+this.nodeName+'\\b(?:(["\'])[^"]*?(\\1)|[^>])*>',"i"),c=new RegExp("</"+this.nodeName+">$","i");return a.replace(b,"").replace(c,"")},set:function(a){if(avalon.clearHTML){avalon.clearHTML(this);var b=avalon.parseHTML(a);o(b,this)}}}})}!Ob.outerHTML&&b.HTMLElement&&HTMLElement.prototype.__defineGetter__("outerHTML",m);var fc=/^(?:mouse|contextmenu|drag)|click/,gc=avalon.eventHooks;if("onmouseenter"in Ob||avalon.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(a,b){gc[a]={type:b,deel:function(b,c,d){return function(c){var e=c.relatedTarget;return e&&(e===b||16&b.compareDocumentPosition(e))?void 0:(delete c.type,c.type=a,d.call(b,c))}}}}),avalon.each({AnimationEvent:"animationend",WebKitAnimationEvent:"webkitAnimationEnd"},function(a,c){b[a]&&!gc.animationend&&(gc.animationend={type:c})}),"oninput"in vb.createElement("input")||(gc.input={type:"propertychange",deel:function(a,b,c){return function(b){return"value"===b.propertyName?(b.type="input",c.call(a,b)):void 0}}}),void 0===vb.onmousewheel){var hc=void 0!==vb.onwheel?"wheel":"DOMMouseScroll",ic="wheel"===hc?"deltaY":"detail";gc.mousewheel={type:hc,deel:function(a,b,c){return function(b){b.wheelDeltaY=b.wheelDelta=b[ic]>0?-120:120,b.wheelDeltaX=0,Object.defineProperty&&Object.defineProperty(b,"type",{value:"mousewheel"}),c.call(a,b)}}}}var jc,kc,lc,mc,nc,oc=/[-.*+?^${}()|[\]\/\\]/g,pc=e,qc={loader:function(a){b.define=a?pc.define:Bb,b.require=a?pc:Ab},interpolate:function(a){if(jc=a[0],kc=a[1],jc===kc)throw new SyntaxError("openTag!==closeTag");if(a+""=="<!--,-->")q.commentInterpolate=!0;else{var b=jc+"test"+kc;if(Qb.innerHTML=b,Qb.innerHTML!==b&&Qb.innerHTML.indexOf("&lt;")>-1)throw new SyntaxError("此定界符不合法");Qb.innerHTML=""}var c=r(jc),d=r(kc);lc=new RegExp(c+"(.*?)"+d),mc=new RegExp(c+"(.*?)"+d,"g"),nc=new RegExp(c+".*?"+d+"|\\sms-")}};q.debug=!0,q.plugins=qc,q.plugins.interpolate(["{{","}}"]),q.paths={},q.shim={},q.maxRepeatSize=100,avalon.config=q;var rc=/(\w+)\[(avalonctrl)="(\S+)"\]/,sc=vb.querySelectorAll?function(a){return vb.querySelectorAll(a)}:function(a){for(var b,c=a.match(rc),d=vb.getElementsByTagName(c[1]),e=[],f=0;b=d[f++];)b.getAttribute(c[2])===c[3]&&e.push(b);return e},tc={$watch:function(a,b){if("function"==typeof b){var c=this.$events[a];c?c.push(b):this.$events[a]=[b]}else this.$events=this.$watch.backup;return this},$unwatch:function(a,b){var c=arguments.length;if(0===c)this.$watch.backup=this.$events,this.$events={};else if(1===c)this.$events[a]=[];else for(var d=this.$events[a]||[],e=d.length;~--e<0;)if(d[e]===b)return d.splice(e,1);return this},$fire:function(a){var b,c,d,e;/^(\w+)!(\S+)$/.test(a)&&(b=RegExp.$1,a=RegExp.$2);var f=this.$events;if(f){var g=Lb.call(arguments,1),h=[a].concat(g);if("all"===b)for(c in avalon.vmodels)d=avalon.vmodels[c],d!==this&&d.$fire.apply(d,h);else if("up"===b||"down"===b){var i=f.expr?sc(f.expr):[];if(0===i.length)return;for(c in avalon.vmodels)if(d=avalon.vmodels[c],d!==this&&d.$events.expr){var j=sc(d.$events.expr);if(0===j.length)continue;Array.prototype.forEach.call(j,function(a){Array.prototype.forEach.call(i,function(c){var e="down"===b?c.contains(a):a.contains(c);e&&(a._avalon=d)})})}var k=vb.getElementsByTagName("*"),l=[];for(Array.prototype.forEach.call(k,function(a){a._avalon&&(l.push(a._avalon),a._avalon="",a.removeAttribute("_avalon"))}),"up"===b&&l.reverse(),c=0;(e=l[c++])&&e.$fire.apply(e,h)!==!1;);}else{var m=f[a]||[],n=f.$all||[];for(c=0;e=m[c++];)Ub(e)&&e.apply(this,g);for(c=0;e=n[c++];)Ub(e)&&e.apply(this,arguments)}}}},uc=avalon.vmodels={};avalon.define=function(a,b){var c=a.$id||a;if(c||d("warning: vm必须指定$id"),uc[c]&&d("warning: "+c+" 已经存在于avalon.vmodels中"),"object"==typeof a)var f=u(a);else{var g={$watch:e};b(g),f=u(g),Cb=!0,b(f),Cb=!1}return f.$id=c,uc[c]=f};var vc=String("$id,$watch,$unwatch,$fire,$events,$model,$skipArray").match(Db),wc={},xc=Object.defineProperty,yc=!0;try{xc({},"_",{value:"x"});var zc=Object.defineProperties}catch(Ac){yc=!1}var Bc=Object.is||function(a,b){return 0===a&&0===b?1/a===1/b:a!==a?b!==b:a===b},Cc=Nb?function(a){var b={};for(var c in a)b[c]={get:a[c],set:a[c],enumerable:!0,configurable:!0};return b}:function(a){return a};yc||("__defineGetter__"in avalon&&(xc=function(a,b,c){return"value"in c&&(a[b]=c.value),"get"in c&&a.__defineGetter__(b,c.get),"set"in c&&a.__defineSetter__(b,c.set),a},zc=function(a,b){for(var c in b)b.hasOwnProperty(c)&&xc(a,c,b[c]);return a}),Tb&&(b.execScript(["Function parseVB(code)","	ExecuteGlobal(code)","End Function","Dim VBClassBodies",'Set VBClassBodies=CreateObject("Scripting.Dictionary")',"Function findOrDefineVBClass(name,body)","	Dim found",'	found=""',"	For Each key in VBClassBodies","		If body=VBClassBodies.Item(key) Then","			found=key","			Exit For","		End If","	next",'	If found="" Then','		parseVB("Class " + name + body)',"		VBClassBodies.Add name, body","		found=name","	End If","	findOrDefineVBClass=found","End Function"].join("\n"),"VBScript"),zc=function(a,c,d){var e="VBClass"+setTimeout("1"),f=[];f.push("\r\n	Private [__data__], [__proxy__]","	Public Default Function [__const__](d, p)","		Set [__data__] = d: set [__proxy__] = p","		Set [__const__] = Me","	End Function");for(a in d)c.hasOwnProperty(a)||f.push("	Public ["+a+"]");vc.forEach(function(a){c.hasOwnProperty(a)||f.push("	Public ["+a+"]")}),f.push("	Public [hasOwnProperty]");for(a in c)f.push("	Public Property Let ["+a+"](val"+ub+")",'		Call [__proxy__](Me,[__data__], "'+a+'", val'+ub+")","	End Property","	Public Property Set ["+a+"](val"+ub+")",'		Call [__proxy__](Me,[__data__], "'+a+'", val'+ub+")","	End Property","	Public Property Get ["+a+"]","	On Error Resume Next","		Set["+a+'] = [__proxy__](Me,[__data__],"'+a+'")',"	If Err.Number <> 0 Then","		["+a+'] = [__proxy__](Me,[__data__],"'+a+'")',"	End If","	On Error Goto 0","	End Property");f.push("End Class");var g=f.join("\r\n"),h=b.findOrDefineVBClass(e,g);h===e&&b.parseVB(["Function "+e+"Factory(a, b)","	Dim o","	Set o = (New "+e+")(a, b)","	Set "+e+"Factory = o","End Function"].join("\r\n"));var i=b[h+"Factory"](c,x);return i}));var Dc=Kb.splice,Ec={_splice:Dc,_fire:function(a,b,c){H(this.$events[zb],a,b,c)},size:function(){return this._.length},pushArray:function(a){var b=a.length,c=this.length;return b&&(Kb.push.apply(this.$model,a),z.call(this,"add",c,b,c)),b+c},push:function(){var a,b=[],c=arguments.length;for(a=0;c>a;a++)b[a]=arguments[a];return this.pushArray(arguments)},unshift:function(){var a=arguments.length,b=this.length;return a&&(Kb.unshift.apply(this.$model,arguments),z.call(this,"add",0,a,0)),a+b},shift:function(){if(this.length){var a=this.$model.shift();return z.call(this,"del",0,1,0),a}},pop:function(){var a=this.length;if(a){var b=this.$model.pop();return z.call(this,"del",a-1,1,Math.max(0,a-2)),b}},splice:function(a){var b,c=arguments.length,d=[],e=Dc.apply(this.$model,arguments);return e.length&&(d.push("del",a,e.length,0),b=!0),c>2&&(b?d.splice(3,1,0,"add",a,c-2):d.push("add",a,c-2,0),b=!0),b?z.apply(this,d):[]},contains:function(a){return-1!==this.indexOf(a)},remove:function(a){return this.removeAt(this.indexOf(a))},removeAt:function(a){return a>=0?(this.$model.splice(a,1),z.call(this,"del",a,1,0)):[]},clear:function(){return this.$model.length=this.length=this._.length=0,this._fire("clear",0),this},removeAll:function(a){if(Array.isArray(a))a.forEach(function(a){this.remove(a)},this);else if("function"==typeof a)for(var b=this.length-1;b>=0;b--){var c=this[b];a(c,b)&&this.removeAt(b)}else this.clear()},ensure:function(a){return this.contains(a)||this.push(a),this},set:function(a,b){if(a>=0){var c=avalon.type(b);b&&b.$model&&(b=b.$model);var d=this[a];if("object"===c)for(var e in b)d.hasOwnProperty(e)&&(d[e]=b[e]);else"array"===c?d.clear().push.apply(d,b):d!==b&&(this[a]=b,this.$model[a]=b,this._fire("set",a,b))}return this}};"sort,reverse".replace(Db,function(a){Ec[a]=function(){var b,c=this.$model,d=c.concat(),e=Math.random(),f=[];
Kb[a].apply(c,arguments);for(var g=0,h=d.length;h>g;g++){var i=c[g],j=d[g];if(Bc(i,j))f.push(g);else{var k=d.indexOf(i);f.push(k),d[k]=e,b=!0}}return b&&(A(this,f),this._fire("move",f),this._fire("index",0)),this}});var Fc=/^(duplex|on)$/,Gc=avalon.$$subscribers=[],Hc=new Date,Ic={},Jc={area:[1,"<map>"],param:[1,"<object>"],col:[2,"<table><tbody></tbody><colgroup>","</table>"],legend:[1,"<fieldset>"],option:[1,"<select multiple='multiple'>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],th:[3,"<table><tbody><tr>","</tr></tbody></table>"],td:[3,"<table><tbody><tr>"],g:[1,'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1">',"</svg>"],_default:Nb?[0,""]:[1,"X<div>"]};Jc.optgroup=Jc.option,Jc.tbody=Jc.tfoot=Jc.colgroup=Jc.caption=Jc.thead,String("circle,defs,ellipse,image,line,path,polygon,polyline,rect,symbol,text,use").replace(Db,function(a){Jc[a]=Jc.g});var Kc=/<([\w:]+)/,Lc=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Mc=Nb?/[^\d\D]/:/(<(?:script|link|style|meta|noscript))/gi,Nc=f(["","text/javascript","text/ecmascript","application/ecmascript","application/javascript"]),Oc=/<(?:tb|td|tf|th|tr|col|opt|leg|cap|area)/,Pc=vb.createElement("script");avalon.parseHTML=function(a){if("string"!=typeof a)return vb.createDocumentFragment();a=a.replace(Lc,"<$1></$2>").trim();var b,c,d=(Kc.exec(a)||["",""])[1].toLowerCase(),e=Jc[d]||Jc._default,f=Pb.cloneNode(!1),g=Qb;Nb||(a=a.replace(Mc,"<br class=msNoScope>$1")),g.innerHTML=e[1]+a+(e[2]||"");var h=g.getElementsByTagName("script");if(h.length)for(var i,j=0;i=h[j++];)Nc[i.type]&&(c=Pc.cloneNode(!1),Kb.forEach.call(i.attributes,function(a){a&&a.specified&&(c[a.name]=a.value,c.setAttribute(a.name,a.value))}),c.text=i.text,i.parentNode.replaceChild(c,i));for(j=e[0];j--;g=g.lastChild);if(!Nb){for(h=g.getElementsByTagName("br"),n=h.length;i=h[--n];)"msNoScope"===i.className&&i.parentNode.removeChild(i);for(h=g.all,j=0;i=h[j++];)I(i)&&J(i)}for(;b=g.firstChild;)f.appendChild(b);return f},avalon.innerHTML=function(a,b){if(!Nb&&!Mc.test(b)&&!Oc.test(b))try{return void(a.innerHTML=b)}catch(c){}var d=this.parseHTML(b);this.clearHTML(a).appendChild(d)},avalon.clearHTML=function(a){for(a.textContent="";a.firstChild;)a.removeChild(a.firstChild);return a},avalon.scan=function(a,b){a=a||Ob;var c=b?[].concat(b):[];S(a,c)};var Qc=f("area,base,basefont,br,col,command,embed,hr,img,input,link,meta,param,source,track,wbr,noscript,script,style,textarea".toUpperCase()),Rc=function(a,b,c){var d=a.getAttribute(b);if(d)for(var e,f=0;e=c[f++];)if(e.hasOwnProperty(d)&&"function"==typeof e[d])return e[d]},Sc=Tb&&b.MutationObserver?function(a){for(var b,c=a.firstChild;c;){var d=c.nextSibling;3===c.nodeType?b?(b.nodeValue+=c.nodeValue,a.removeChild(c)):b=c:b=null,c=d}}:0,Tc=/ms-(\w+)-?(.*)/,Uc={"if":10,repeat:90,data:100,widget:110,each:1400,"with":1500,duplex:2e3,on:3e3},Vc=f("animationend,blur,change,input,click,dblclick,focus,keydown,keypress,keyup,mousedown,mouseenter,mouseleave,mousemove,mouseout,mouseover,mouseup,scan,scroll,submit"),Wc=f("value,title,alt,checked,selected,disabled,readonly,enabled"),Xc=/^if|widget|repeat$/,Yc=/^each|with|html|include$/;if(!"1"[0])var Zc=new Zb(512),$c=/\s+(ms-[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,_c=/^['"]/,ad=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/i,bd=/&amp;/g,cd=function(a){var b=a.outerHTML;if("</"===b.slice(0,2)||!b.trim())return[];var c,d,e,f=b.match(ad)[0],g=[],h=Zc.get(f);if(h)return h;for(;d=$c.exec(f);){e=d[2],e&&(e=(_c.test(e)?e.slice(1,-1):e).replace(bd,"&"));var i=d[1].toLowerCase();c=i.match(Tc);var j={name:i,specified:!0,value:e||""};g.push(j)}return Zc.put(f,g)};var dd=/\|\s*html\s*/,ed=/\|\|/g,fd=/&lt;/g,gd=/&gt;/g;rstringLiteral=/(['"])(\\\1|.)+?\1/g;var hd={_toString:function(){var a=this.node,b=a.className,c="string"==typeof b?b:b.baseVal;return c.split(/\s+/).join(" ")},_contains:function(a){return(" "+this+" ").indexOf(" "+a+" ")>-1},_add:function(a){this.contains(a)||this._set(this+" "+a)},_remove:function(a){this._set((" "+this+" ").replace(" "+a+" "," "))},__set:function(a){a=a.trim();var b=this.node;Fb.test(b)?b.setAttribute("class",a):b.className=a}};"add,remove".replace(Db,function(a){avalon.fn[a+"Class"]=function(b){var c=this[0];return b&&"string"==typeof b&&c&&1===c.nodeType&&b.replace(/\S+/g,function(b){Y(c)[a](b)}),this}}),avalon.fn.mix({hasClass:function(a){var b=this[0]||{};return 1===b.nodeType&&Y(b).contains(a)},toggleClass:function(a,b){for(var c,d=0,e=a.split(/\s+/),f="boolean"==typeof b;c=e[d++];){var g=f?b:!this.hasClass(c);this[g?"addClass":"removeClass"](c)}return this},attr:function(a,b){return 2===arguments.length?(this[0].setAttribute(a,b),this):this[0].getAttribute(a)},data:function(a,b){switch(a="data-"+W(a||""),arguments.length){case 2:return this.attr(a,b),this;case 1:var c=this.attr(a);return Z(c);case 0:var d={};return Kb.forEach.call(this[0].attributes,function(b){b&&(a=b.name,a.indexOf("data-")||(a=X(a.slice(5)),d[a]=Z(b.value)))}),d}},removeData:function(a){return a="data-"+W(a),this[0].removeAttribute(a),this},css:function(a,b){if(avalon.isPlainObject(a))for(var c in a)avalon.css(this,c,a[c]);else var d=avalon.css(this,a,b);return void 0!==d?d:this},position:function(){var a,b,c=this[0],d={top:0,left:0};if(c)return"fixed"===this.css("position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),"HTML"!==a[0].tagName&&(d=a.offset()),d.top+=avalon.css(a[0],"borderTopWidth",!0),d.left+=avalon.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-avalon.css(c,"marginTop",!0),left:b.left-d.left-avalon.css(c,"marginLeft",!0)}},offsetParent:function(){for(var a=this[0].offsetParent;a&&"static"===avalon.css(a,"position");)a=a.offsetParent;return avalon(a||Ob)},bind:function(a,b,c){return this[0]?avalon.bind(this[0],a,b,c):void 0},unbind:function(a,b,c){return this[0]&&avalon.unbind(this[0],a,b,c),this},val:function(a){var b=this[0];if(b&&1===b.nodeType){var c=0===arguments.length,d=c?":get":":set",e=zd[ab(b)+d];if(e)var f=e(b,a);else{if(c)return(b.value||"").replace(/\r/g,"");b.value=a}}return c?f:this}});var id=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,jd=/^[\],:{}\s]*$/,kd=/(?:^|:|,)(?:\s*\[)+/g,ld=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,md=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g;avalon.parseJSON=b.JSON?JSON.parse:function(a){if("string"==typeof a){if(a=a.trim(),a&&jd.test(a.replace(ld,"@").replace(md,"]").replace(kd,"")))return new Function("return "+a)();avalon.error("Invalid JSON: "+a)}return a},avalon.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){avalon.fn[a]=function(c){var d=this[0]||{},e=$(d),f="scrollTop"===a;return arguments.length?void(e?e.scrollTo(f?avalon(e).scrollLeft():c,f?c:avalon(e).scrollTop()):d[a]=c):e?b in e?e[b]:Ob[a]:d[a]}});var nd=avalon.cssHooks={},od=["","-webkit-","-o-","-moz-","-ms-"],pd={"float":Nb?"cssFloat":"styleFloat"};if(avalon.cssNumber=f("columnCount,order,fillOpacity,fontWeight,lineHeight,opacity,orphans,widows,zIndex,zoom"),avalon.cssName=function(a,b,c){if(pd[a])return pd[a];b=b||Ob.style;for(var d=0,e=od.length;e>d;d++)if(c=X(od[d]+a),c in b)return pd[a]=c;return null},nd["@:set"]=function(a,b,c){try{a.style[b]=c}catch(d){}},b.getComputedStyle)nd["@:get"]=function(a,b){if(!a||!a.style)throw new Error("getComputedStyle要求传入一个节点 "+a);var c,d=getComputedStyle(a,null);return d&&(c="filter"===b?d.getPropertyValue(b):d[b],""===c&&(c=a.style[b])),c},nd["opacity:get"]=function(a){var b=nd["@:get"](a,"opacity");return""===b?"1":b};else{var qd=/^-?(?:\d*\.)?\d+(?!px)[^\d\s]+$/i,rd=/^(top|right|bottom|left)$/,sd=/alpha\([^)]*\)/i,td=!!b.XDomainRequest,ud="DXImageTransform.Microsoft.Alpha",vd={thin:td?"1px":"2px",medium:td?"3px":"4px",thick:td?"5px":"6px"};nd["@:get"]=function(a,b){var c=a.currentStyle,d=c[b];if(qd.test(d)&&!rd.test(d)){var e=a.style,f=e.left,g=a.runtimeStyle.left;a.runtimeStyle.left=c.left,e.left="fontSize"===b?"1em":d||0,d=e.pixelLeft+"px",e.left=f,a.runtimeStyle.left=g}return"medium"===d&&(b=b.replace("Width","Style"),"none"===c[b]&&(d="0px")),""===d?"auto":vd[d]||d},nd["opacity:set"]=function(a,b,c){var d=a.style,e=isFinite(c)&&1>=c?"alpha(opacity="+100*c+")":"",f=d.filter||"";d.zoom=1,d.filter=(sd.test(f)?f.replace(sd,e):f+" "+e).trim(),d.filter||d.removeAttribute("filter")},nd["opacity:get"]=function(a){var b=a.filters.alpha||a.filters[ud],c=b&&b.enabled?b.opacity:100;return c/100+""}}"top,left".replace(Db,function(a){nd[a+":get"]=function(b){var c=nd["@:get"](b,a);return/px$/.test(c)?c:avalon(b).position()[a]+"px"}});var wd={position:"absolute",visibility:"hidden",display:"block"},xd=/^(none|table(?!-c[ea]).+)/;"Width,Height".replace(Db,function(a){var b=a.toLowerCase(),c="client"+a,d="scroll"+a,e="offset"+a;nd[b+":get"]=function(b,c,d){var f=-4;"number"==typeof d&&(f=d),c="Width"===a?["Left","Right"]:["Top","Bottom"];var g=b[e];return 2===f?g+avalon.css(b,"margin"+c[0],!0)+avalon.css(b,"margin"+c[1],!0):(0>f&&(g=g-avalon.css(b,"border"+c[0]+"Width",!0)-avalon.css(b,"border"+c[1]+"Width",!0)),-4===f&&(g=g-avalon.css(b,"padding"+c[0],!0)-avalon.css(b,"padding"+c[1],!0)),g)},nd[b+"&get"]=function(a){var c=[];_(a,c);for(var d,e=nd[b+":get"](a),f=0;d=c[f++];){a=d.node;for(var g in d)"string"==typeof d[g]&&(a.style[g]=d[g])}return e},avalon.fn[b]=function(f){var g=this[0];if(0===arguments.length){if(g.setTimeout)return g["inner"+a]||g.document.documentElement[c];if(9===g.nodeType){var h=g.documentElement;return Math.max(g.body[d],h[d],g.body[e],h[e],h[c])}return nd[b+"&get"](g)}return this.css(b,f)},avalon.fn["inner"+a]=function(){return nd[b+":get"](this[0],void 0,-2)},avalon.fn["outer"+a]=function(a){return nd[b+":get"](this[0],void 0,a===!0?2:0)}}),avalon.fn.offset=function(){var a=this[0],b={left:0,top:0};if(!a||!a.tagName||!a.ownerDocument)return b;var c=a.ownerDocument,d=c.body,e=c.documentElement,f=c.defaultView||c.parentWindow;if(!avalon.contains(e,a))return b;a.getBoundingClientRect&&(b=a.getBoundingClientRect());var g=e.clientTop||d.clientTop,h=e.clientLeft||d.clientLeft,i=Math.max(f.pageYOffset||0,e.scrollTop,d.scrollTop),j=Math.max(f.pageXOffset||0,e.scrollLeft,d.scrollLeft);return{top:b.top+i-g,left:b.left+j-h}};var yd=/^<option(?:\s+\w+(?:\s*=\s*(?:"[^"]*"|'[^']*'|[^\s>]+))?)*\s+value[\s=]/i,zd={"option:get":Tb?function(a){return yd.test(a.outerHTML)?a.value:a.text.trim()}:function(a){return a.value},"select:get":function(a,b){for(var c,d=a.options,e=a.selectedIndex,f=zd["option:get"],g="select-one"===a.type||0>e,h=g?null:[],i=g?e+1:d.length,j=0>e?i:g?e:0;i>j;j++)if(c=d[j],(c.selected||j===e)&&!c.disabled){if(b=f(c),g)return b;h.push(b)}return h},"select:set":function(a,b,c){b=[].concat(b);for(var d,e=zd["option:get"],f=0;d=a.options[f++];)(d.selected=b.indexOf(e(d))>-1)&&(c=!0);c||(a.selectedIndex=-1)}},Ad={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},Bd=b.JSON&&JSON.stringify||function(a){return'"'+a.replace(/[\\\"\x00-\x1f]/g,function(a){var b=Ad[a];return"string"==typeof b?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"'},Cd="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",Dd=/\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|"(?:[^"\\]|\\[\w\W])*"|'(?:[^'\\]|\\[\w\W])*'|[\s\t\n]*\.[\s\t\n]*[$\w\.]+/g,Ed=/[^\w$]+/g,Fd=new RegExp(["\\b"+Cd.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),Gd=/\b\d[^,]*/g,Hd=/^,+|,+$/g,Id=new Zb(512),Jd=function(a){var b=","+a.trim(),c=Id.get(b);if(c)return c;var d=a.replace(Dd,"").replace(Ed,",").replace(Fd,"").replace(Gd,"").replace(Hd,"").split(/^$|,+/);return Id.put(b,cb(d))},Kd=new Zb(128),Ld=/\w\[.*\]|\w\.\w/,Md=/(\$proxy\$[a-z]+)\d+$/,Nd=/\)\s*$/,Od=/\)\s*\|/g,Pd=/\|\s*([$\w]+)/g,Qd=/"\s*\["/g,Rd=/"\s*\(/g;avalon.parseExprProxy=fb;var Sd="autofocus,autoplay,async,allowTransparency,checked,controls,declare,disabled,defer,defaultChecked,defaultSelectedcontentEditable,isMap,loop,multiple,noHref,noResize,noShade,open,readOnly,selected",Td={};Sd.replace(Db,function(a){Td[a.toLowerCase()]=a});var Ud={"accept-charset":"acceptCharset","char":"ch",charoff:"chOff","class":"className","for":"htmlFor","http-equiv":"httpEquiv"},Vd="accessKey,bgColor,cellPadding,cellSpacing,codeBase,codeType,colSpan,dateTime,defaultValue,frameBorder,longDesc,maxLength,marginWidth,marginHeight,rowSpan,tabIndex,useMap,vSpace,valueType,vAlign";Vd.replace(Db,function(a){Ud[a.toLowerCase()]=a});var Wd=/<noscript.*?>(?:[\s\S]+?)<\/noscript>/gim,Xd=/<noscript.*?>([\s\S]+?)<\/noscript>/im,Yd=function(){return new(b.XMLHttpRequest||ActiveXObject)("Microsoft.XMLHTTP")},Zd=avalon.templateCache={};Xb.attr=function(a,b){var c=a.value.trim(),d=!0;if(c.indexOf(jc)>-1&&c.indexOf(kc)>2&&(d=!1,lc.test(c)&&""===RegExp.rightContext&&""===RegExp.leftContext&&(d=!0,c=RegExp.$1)),"include"===a.type){var e=a.element;a.includeRendered=Rc(e,"data-include-rendered",b),a.includeLoaded=Rc(e,"data-include-loaded",b);var f=a.includeReplaced=!!avalon(e).data("includeReplace");a.startInclude=vb.createComment("ms-include"),a.endInclude=vb.createComment("ms-include-end"),f?(a.element=a.startInclude,e.parentNode.insertBefore(a.startInclude,e),e.parentNode.insertBefore(a.endInclude,e.nextSibling)):(e.insertBefore(a.startInclude,e.firstChild),e.appendChild(a.endInclude))}a.handlerName="attr",fb(c,b,a,d?0:U(a.value))},Yb.attr=function(a,c,d){var e=d.type,f=d.param;if("css"===e)avalon(c).css(f,a);else if("attr"===e){if(Td[f]){var g=Td[f];if("boolean"==typeof c[g])return c[g]=!!a}var h=a===!1||null===a||void 0===a;if(!Nb&&Ud[f]&&(f=Ud[f]),h)return c.removeAttribute(f);var i=Fb.test(c)?!1:vb.namespaces&&I(c)?!0:f in c.cloneNode(!1);i?c[f]=a:c.setAttribute(f,a)}else if("include"===e&&a){var j=d.vmodels,k=d.includeRendered,l=d.includeLoaded,m=d.includeReplaced,n=m?c.parentNode:c,o=function(a){for(l&&(a=l.apply(n,[a].concat(j))),k&&K(n,function(){k.call(n)},0/0);;){var b=d.startInclude.nextSibling;if(!b||b===d.endInclude)break;n.removeChild(b)}var c=avalon.parseHTML(a),e=avalon.slice(c.childNodes);n.insertBefore(c,d.endInclude),Q(e,j)};if("src"===d.param)if(Zd[a])avalon.nextTick(function(){o(Zd[a])});else{var p=Yd();p.onreadystatechange=function(){if(4===p.readyState){var b=p.status;(b>=200&&300>b||304===b||1223===b)&&o(Zd[a]=p.responseText)}},p.open("GET",a,!0),"withCredentials"in p&&(p.withCredentials=!0),p.setRequestHeader("X-Requested-With","XMLHttpRequest"),p.send(null)}else{var q=a&&1===a.nodeType?a:vb.getElementById(a);if(q){if("NOSCRIPT"===q.tagName&&!q.innerHTML&&!q.fixIE78){p=Yd(),p.open("GET",location,!1),p.send(null);for(var r=vb.getElementsByTagName("noscript"),s=(p.responseText||"").match(Wd)||[],t=s.length,u=0;t>u;u++){var v=r[u];v&&(v.style.display="none",v.fixIE78=(s[u].match(Xd)||["","&nbsp;"])[1])}}avalon.nextTick(function(){o(q.fixIE78||q.value||q.innerText||q.innerHTML)})}}}else if(Ob.hasAttribute||"string"!=typeof a||"src"!==e&&"href"!==e||(a=a.replace(/&amp;/g,"&")),c[e]=a,b.chrome&&"EMBED"===c.tagName){var w=c.parentNode,x=document.createComment("ms-src");w.replaceChild(x,c),w.replaceChild(c,x)}},"title,alt,src,value,css,include,href".replace(Db,function(a){Xb[a]=Xb.attr}),Xb["class"]=function(a,b){var c,e=a.param,f=a.value;if(a.handlerName="class",!e||isFinite(e)){a.param="";var g=f.replace(mc,function(a){return a.replace(/./g,"0")}),h=g.indexOf(":");if(-1===h)var i=f;else{if(i=f.slice(0,h),c=f.slice(h+1),eb(c,b,a),!a.evaluator)return d("debug: ms-class '"+(c||"").trim()+"' 不存在于VM中"),!1;a._evaluator=a.evaluator,a._args=a.args}var j=lc.test(i);j||(a.immobileClass=i),fb("",b,a,j?U(i):0)}else a.immobileClass=a.oldStyle=a.param,fb(f,b,a)},Yb["class"]=function(a,b,c){var d=avalon(b),e=c.type;if("class"===e&&c.oldStyle)d.toggleClass(c.oldStyle,!!a);else switch(c.toggleClass=c._evaluator?!!c._evaluator.apply(b,c._args):!0,c.newClass=c.immobileClass||a,c.oldClass&&c.newClass!==c.oldClass&&d.removeClass(c.oldClass),c.oldClass=c.newClass,e){case"class":d.toggleClass(c.newClass,c.toggleClass);break;case"hover":case"active":if(!c.hasBindEvent){var f="mouseenter",g="mouseleave";if("active"===e){b.tabIndex=b.tabIndex||-1,f="mousedown",g="mouseup";var h=d.bind("mouseleave",function(){c.toggleClass&&d.removeClass(c.newClass)})}var i=d.bind(f,function(){c.toggleClass&&d.addClass(c.newClass)}),j=d.bind(g,function(){c.toggleClass&&d.removeClass(c.newClass)});c.rollback=function(){d.unbind("mouseleave",h),d.unbind(f,i),d.unbind(g,j)},c.hasBindEvent=!0}}},"hover,active".replace(Db,function(a){Xb[a]=Xb["class"]}),Yb.data=function(a,b,c){var d="data-"+c.param;a&&"object"==typeof a?b[d]=a:b.setAttribute(d,String(a))};var $d=Xb.duplex=function(a,b){var c,g=a.element;if(fb(a.value,b,a,0,1),a.changed=Rc(g,"data-duplex-changed",b)||e,a.evaluator&&a.args){var h=[],i=f("string,number,boolean,checked");"radio"===g.type&&""===a.param&&(a.param="checked"),g.msData&&(g.msData["ms-duplex"]=a.value),a.param.replace(/\w+/g,function(b){/^(checkbox|radio)$/.test(g.type)&&/^(radio|checked)$/.test(b)&&("radio"===b&&d("ms-duplex-radio已经更名为ms-duplex-checked"),b="checked",a.isChecked=!0),"bool"===b?(b="boolean",d("ms-duplex-bool已经更名为ms-duplex-boolean")):"text"===b&&(b="string",d("ms-duplex-text已经更名为ms-duplex-string")),i[b]&&(c=!0),avalon.Array.ensure(h,b)}),c||h.push("string"),a.param=h.join("-"),a.bound=function(b,c){g.addEventListener?g.addEventListener(b,c,!1):g.attachEvent("on"+b,c);var d=a.rollback;a.rollback=function(){g.avalonSetter=null,avalon.unbind(g,b,c),d&&d()}};for(var j in avalon.vmodels){var k=avalon.vmodels[j];k.$fire("avalon-ms-duplex-init",a)}var l=a.pipe||(a.pipe=hb);l(null,a,"init");var m=g.tagName;$d[m]&&$d[m](g,a.evaluator.apply(null,a.args),a)}};avalon.duplexHooks={checked:{get:function(a,b){return!b.element.oldValue}},string:{get:function(a){return a},set:gb},"boolean":{get:function(a){return"true"===a},set:gb},number:{get:function(a){return isFinite(a)?parseFloat(a)||0:a},set:gb}};var _d,ae=[];avalon.tick=function(a){1===ae.push(a)&&(_d=setInterval(ib,60))};var be=e;!new function(){function a(a){avalon.contains(Ob,this)&&(b[this.tagName].call(this,a),!this.msFocus&&this.avalonSetter&&this.avalonSetter())}try{var b={},c=HTMLInputElement.prototype,d=HTMLTextAreaElement.prototype,e=HTMLInputElement.prototype;Object.getOwnPropertyNames(e),b.INPUT=Object.getOwnPropertyDescriptor(c,"value").set,Object.defineProperty(c,"value",{set:a}),b.TEXTAREA=Object.getOwnPropertyDescriptor(d,"value").set,Object.defineProperty(d,"value",{set:a})}catch(f){be=avalon.tick}},Tb&&avalon.bind(vb,"selectionchange",function(){var a=vb.activeElement;a&&"function"==typeof a.avalonSetter&&a.avalonSetter()}),$d.INPUT=function(a,b,c){function e(a){c.changed.call(this,a,c)}function f(){l=!0}function g(){l=!1}function h(a){setTimeout(function(){m(a)})}var i=a.type,j=c.bound,k=avalon(a),l=!1,m=function(){if(!l){var d=a.oldValue=a.value,f=c.pipe(d,c,"get");k.data("duplex-observe")!==!1&&(b(f),e.call(a,f),k.data("duplex-focus")&&avalon.nextTick(function(){a.focus()}))}};if(c.handler=function(){var d=c.pipe(b(),c,"set")+"";d!==a.oldValue&&(a.value=d)},c.isChecked||"radio"===a.type){var n=6===Tb;m=function(){if(k.data("duplex-observe")!==!1){var d=c.pipe(a.value,c,"get");b(d),e.call(a,d)}},c.handler=function(){var d=b(),e=c.isChecked?!!d:d+""===a.value;a.oldValue=e,n?setTimeout(function(){a.defaultChecked=e,a.checked=e},31):a.checked=e},j("click",m)}else if("checkbox"===i)m=function(){if(k.data("duplex-observe")!==!1){var f=a.checked?"ensure":"remove",g=b();Array.isArray(g)||(d("ms-duplex应用于checkbox上要对应一个数组"),g=[g]),avalon.Array[f](g,c.pipe(a.value,c,"get")),e.call(a,g)}},c.handler=function(){var d=[].concat(b());a.checked=d.indexOf(c.pipe(a.value,c,"get"))>-1},j(Nb?"change":"click",m);else{var o=a.getAttribute("data-duplex-event")||"input";a.attributes["data-event"]&&d("data-event指令已经废弃，请改用data-duplex-event"),o.replace(Db,function(a){switch(a){case"input":Tb?(Tb>8?j("input",m):j("propertychange",function(a){"value"===a.propertyName&&m()}),j("dragend",h)):(j("input",m),j("compositionstart",f),j("compositionend",g),j("DOMAutoComplete",m));break;default:j(a,m)}})}j("focus",function(){a.msFocus=!0}),j("blur",function(){a.msFocus=!1}),/text|password/.test(a.type)&&be(function(){if(Ob.contains(a))a.msFocus||a.oldValue===a.value||m();else if(!a.msRetain)return!1}),a.avalonSetter=m,a.oldValue=a.value,B(c),e.call(a,a.value)},$d.TEXTAREA=$d.INPUT,$d.SELECT=function(a,b,c){function e(){if(f.data("duplex-observe")!==!1){var d=f.val();d=Array.isArray(d)?d.map(function(a){return c.pipe(a,c,"get")}):c.pipe(d,c,"get"),d+""!==a.oldValue&&b(d),c.changed.call(a,d,c)}}var f=avalon(a);c.handler=function(){var c=b();c=c&&c.$model||c,Array.isArray(c)?a.multiple||d("ms-duplex在<select multiple=true>上要求对应一个数组"):a.multiple&&d("ms-duplex在<select multiple=false>不能对应一个数组"),c=Array.isArray(c)?c.map(String):c+"",c+""!==a.oldValue&&(f.val(c),a.oldValue=c+"")},c.bound("change",e),K(a,function(){B(c),c.changed.call(a,b(),c)},0/0)},Yb.html=function(a,b,c){a=null==a?"":a;var d="group"in c,e=d?b.parentNode:b;if(e){if(11===a.nodeType)var f=a;else if(1===a.nodeType||a.item){var g=1===a.nodeType?a.childNodes:a.item?a:[];for(f=Pb.cloneNode(!0);g[0];)f.appendChild(g[0])}else f=avalon.parseHTML(a);var h=vb.createComment("ms-html");if(d){e.insertBefore(h,b);for(var i=c.group,j=1;i>j;){var k=b.nextSibling;k&&(e.removeChild(k),j++)}e.removeChild(b),c.element=h}else avalon.clearHTML(e).appendChild(h);d&&(c.group=f.childNodes.length||1),g=avalon.slice(f.childNodes),g[0]&&(h.parentNode&&h.parentNode.replaceChild(f,h),d&&(c.element=g[0])),Q(g,c.vmodels)}},Xb["if"]=Xb.data=Xb.text=Xb.html=function(a,b){fb(a.value,b,a)},Yb["if"]=function(a,b,c){if(a)8===b.nodeType&&(b.parentNode.replaceChild(c.template,b),b=c.element=c.template),b.getAttribute(c.name)&&(b.removeAttribute(c.name),O(b,c.vmodels)),c.rollback=null;else if(1===b.nodeType){var d=c.element=vb.createComment("ms-if");b.parentNode.replaceChild(d,b),c.template=b,xb.appendChild(b),c.rollback=function(){b.parentNode===xb&&xb.removeChild(b)}}};var ce=/\(([^)]*)\)/;Xb.on=function(a,b){var c=a.value;a.type="on";var d=a.param.replace(/-\d+$/,"");if("function"==typeof Xb.on[d+"Hook"]&&Xb.on[d+"Hook"](a),c.indexOf("(")>0&&c.indexOf(")")>-1){var e=(c.match(ce)||["",""])[1].trim();(""===e||"$event"===e)&&(c=c.replace(ce,""))}fb(c,b,a)},Yb.on=function(a,b,c){a=function(a){var b=c.evaluator||e;return b.apply(this,c.args.concat(a))};var d=c.param.replace(/-\d+$/,"");if("scan"===d)a.call(b,{type:d});else if("function"==typeof c.specialBind)c.specialBind(b,a);else var f=avalon.bind(b,d,a);c.rollback=function(){"function"==typeof c.specialUnbind?c.specialUnbind():avalon.unbind(b,d,f)}},Xb.repeat=function(a,b){var c=a.type;fb(a.value,b,a,0,1),a.proxies=[];var d=!1;try{var e=a.$repeat=a.evaluator.apply(0,a.args||[]),f=avalon.type(e);"object"!==f&&"array"!==f&&(d=!0,avalon.log("warning:"+a.value+"对应类型不正确"))}catch(g){d=!0,avalon.log("warning:"+a.value+"编译出错")}var h=a.value.split(".")||[];if(h.length>1){h.pop();for(var i,j=h[0],k=0;i=b[k++];)if(i&&i.hasOwnProperty(j)){var l=i[j].$events||{};l[zb]=l[zb]||[],l[zb].push(a);break}}var m=a.element;m.removeAttribute(a.name),a.sortedCallback=Rc(m,"data-with-sorted",b),a.renderedCallback=Rc(m,"data-"+c+"-rendered",b);var n=Sb(c),o=a.element=vb.createComment(n+":end");if(a.clone=vb.createComment(n),Pb.appendChild(o),"each"===c||"with"===c?(a.template=m.innerHTML.trim(),avalon.clearHTML(m).appendChild(o)):(a.template=m.outerHTML.trim(),m.parentNode.replaceChild(o,m)),a.template=avalon.parseHTML(a.template),a.rollback=function(){var b=a.element;if(b){Yb.repeat.call(a,"clear");var c=b.parentNode,d=a.template,e=d.firstChild;c.replaceChild(d,b);var f=a.$stamp;f&&f.parentNode&&f.parentNode.removeChild(f),e=a.element="repeat"===a.type?e:c}},!d){a.handler=Yb.repeat,a.$outer={};var p="$key",q="$val";for(Array.isArray(e)&&(p="$first",q="$last"),k=0;i=b[k++];)if(i.hasOwnProperty(p)&&i.hasOwnProperty(q)){a.$outer=i;break}var r=e.$events,s=(r||{})[zb];if(s&&avalon.Array.ensure(s,a)&&D(a,s),"object"===f){a.$with=!0;var t=r?r.$withProxyPool||(r.$withProxyPool={}):{};a.handler("append",e,t)}else e.length&&a.handler("add",0,e.length)}},Yb.repeat=function(a,b,c){if(a){var d=this,f=d.element,g=f.parentNode,h=d.proxies,i=Pb.cloneNode(!1);switch(a){case"add":for(var j,k=b+c,l=d.$repeat,m=l.length-1,n=[],o=kb(d,b),p=b;k>p;p++){var q=nb(p,d);h.splice(p,0,q),jb(d,i,q,n)}for(g.insertBefore(i,o),p=0;j=n[p++];)Q(j.nodes,j.vmodels),j.nodes=j.vmodels=null;break;case"del":o=h[b].$stamp,f=kb(d,b+c),lb(o,f);var r=h.splice(b,c);qb(r,"each");break;case"clear":var s=d.$stamp||h[0];s&&(o=s.$stamp||s,lb(o,f)),qb(h,"each");break;case"move":o=h[0].$stamp;var t,u=o.nodeValue,v=[],w=[];for(lb(o,f,function(){w.unshift(this),this.nodeValue===u&&(v.unshift(w),w=[])}),A(h,b),A(v,b);w=v.shift();)for(;t=w.shift();)i.appendChild(t);g.insertBefore(i,f);break;case"index":for(m=h.length-1;c=h[b];b++)c.$index=b,c.$first=0===b,c.$last=b===m;return;case"set":return q=h[b],void(q&&H(q.$events.$index));case"append":var x=c,y=[];n=[];for(var z in b)b.hasOwnProperty(z)&&"hasOwnProperty"!==z&&y.push(z);if(d.sortedCallback){var B=d.sortedCallback.call(g,y);B&&Array.isArray(B)&&B.length&&(y=B)}for(p=0;z=y[p++];)"hasOwnProperty"!==z&&(x[z]||(x[z]=pb(z,d)),jb(d,i,x[z],n));var C=d.$stamp=d.clone;for(g.insertBefore(C,f),g.insertBefore(i,f),p=0;j=n[p++];)Q(j.nodes,j.vmodels),j.nodes=j.vmodels=null}"clear"===a&&(a="del");var D=d.renderedCallback||e,E=arguments;K(g,function(){D.apply(g,E),g.oldValue&&"SELECT"===g.tagName&&avalon(g).val(g.oldValue.split(","))},0/0)}},"with,each".replace(Db,function(a){Xb[a]=Xb.repeat});var de=[],ee=[];Yb.text=function(a,b){if(a=null==a?"":a,3===b.nodeType)try{b.data=a}catch(c){}else"textContent"in b?b.textContent=a:b.innerText=a},avalon.parseDisplay=rb,Xb.visible=function(a,b){var c=avalon(a.element),d=c.css("display");if("none"===d){var e=c[0].style,f=/visibility/i.test(e.cssText),g=c.css("visibility");e.display="",e.visibility="hidden",d=c.css("display"),"none"===d&&(d=rb(c[0].nodeName)),e.visibility=f?g:""}a.display=d,fb(a.value,b,a)},Yb.visible=function(a,b,c){b.style.display=a?c.display:"none"},Xb.widget=function(a,c){var d=a.value.match(Db),f=a.element,g=d[0],h=d[1];h&&"$"!==h||(h=Sb(g));var i=d[2]||g,j=avalon.ui[g];if("function"==typeof j){c=f.vmodels||c;for(var k,l=0;k=c[l++];)if(k.hasOwnProperty(i)&&"object"==typeof k[i]){var m=k[i];m=m.$model||m;break}if(m){var n=m[g+"Id"];"string"==typeof n&&(h=n)}var o=avalon.getWidgetData(f,g);a.value=[g,h,i].join(","),a[g+"Id"]=h,a.evaluator=e,f.msData["ms-widget-id"]=h;var p=a[g+"Options"]=avalon.mix({},j.defaults,m||{},o);f.removeAttribute("ms-widget");var q=j(f,a,c)||{};q.$id?(avalon.vmodels[h]=q,L(f,q),q.hasOwnProperty("$init")&&q.$init(function(){avalon.scan(f,[q].concat(c)),"function"==typeof p.onInit&&p.onInit.call(f,q,p,c)}),a.rollback=function(){try{q.widgetElement=null,q.$remove()}catch(a){}f.msData={},delete avalon.vmodels[q.$id]},D(a,fe),b.chrome&&f.addEventListener("DOMNodeRemovedFromDocument",function(){setTimeout(G)})):avalon.scan(f,c)}else c.length&&(f.vmodels=c)};var fe=[],ge=/<script[^>]*>([\S\s]*?)<\/script\s*>/gim,he=/\s+(on[^=\s]+)(?:=("[^"]*"|'[^']*'|[^\s>]+))?/g,ie=/<\w+\b(?:(["'])[^"]*?(\1)|[^>])*>/gi,je={a:/\b(href)\=("javascript[^"]*"|'javascript[^']*')/gi,img:/\b(src)\=("javascript[^"]*"|'javascript[^']*')/gi,form:/\b(action)\=("javascript[^"]*"|'javascript[^']*')/gi},ke=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,le=/([^\#-~| |!])/g,me=avalon.filters={uppercase:function(a){return a.toUpperCase()},lowercase:function(a){return a.toLowerCase()},truncate:function(a,b,c){return b=b||30,c=void 0===c?"...":c,a.length>b?a.slice(0,b-c.length)+c:String(a)},$filter:function(a){for(var b=1,c=arguments.length;c>b;b++){var d=arguments[b],e=avalon.filters[d.shift()];if("function"==typeof e){var f=[a].concat(d);a=e.apply(null,f)}}return a},camelize:X,sanitize:function(a){return a.replace(ge,"").replace(ie,function(a){var b=a.toLowerCase().match(/<(\w+)\s/);if(b){var c=je[b[1]];c&&(a=a.replace(c,function(a,b,c){var d=c.charAt(0);return b+"="+d+"javascript:void(0)"+d}))}return a.replace(he," ").replace(/\s+/g," ")})},escape:function(a){return String(a).replace(/&/g,"&amp;").replace(ke,function(a){var b=a.charCodeAt(0),c=a.charCodeAt(1);return"&#"+(1024*(b-55296)+(c-56320)+65536)+";"}).replace(le,function(a){return"&#"+a.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")},currency:function(a,b,c){return(b||"￥")+sb(a,isFinite(c)?c:2)},number:sb};!new function(){function a(a){return parseInt(a,10)||0}function b(a,b,c){var d="";for(0>a&&(d="-",a=-a),a=""+a;a.length<b;)a="0"+a;return c&&(a=a.substr(a.length-b)),d+a}function c(a,c,d,e){return function(f){var g=f["get"+a]();return(d>0||g>-d)&&(g+=d),0===g&&-12===d&&(g=12),b(g,c,e)}}function d(a,b){return function(c,d){var e=c["get"+a](),f=(b?"SHORT"+a:a).toUpperCase();return d[f][e]}}function e(a){var c=-1*a.getTimezoneOffset(),d=c>=0?"+":"";return d+=b(Math[c>0?"floor":"ceil"](c/60),2)+b(Math.abs(c%60),2)}function f(a,b){return a.getHours()<12?b.AMPMS[0]:b.AMPMS[1]}var g={yyyy:c("FullYear",4),yy:c("FullYear",2,0,!0),y:c("FullYear",1),MMMM:d("Month"),MMM:d("Month",!0),MM:c("Month",2,1),M:c("Month",1,1),dd:c("Date",2),d:c("Date",1),HH:c("Hours",2),H:c("Hours",1),hh:c("Hours",2,-12),h:c("Hours",1,-12),mm:c("Minutes",2),m:c("Minutes",1),ss:c("Seconds",2),s:c("Seconds",1),sss:c("Milliseconds",3),EEEE:d("Day"),EEE:d("Day",!0),a:f,Z:e},h=/((?:[^yMdHhmsaZE']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z))(.*)/,i=/^\/Date\((\d+)\)\/$/;me.date=function(b,c){var d,e,f=me.date.locate,j="",k=[];if(c=c||"mediumDate",c=f[c]||c,"string"==typeof b)if(/^\d+$/.test(b))b=a(b);else if(i.test(b))b=+RegExp.$1;else{var l=b.trim(),m=[0,0,0,0,0,0,0],n=new Date(0);l=l.replace(/^(\d+)\D(\d+)\D(\d+)/,function(b,c,d,e){var f=4===e.length?[e,c,d]:[c,d,e];return m[0]=a(f[0]),m[1]=a(f[1])-1,m[2]=a(f[2]),""});var o=n.setFullYear,p=n.setHours;l=l.replace(/[T\s](\d+):(\d+):?(\d+)?\.?(\d)?/,function(b,c,d,e,f){return m[3]=a(c),m[4]=a(d),m[5]=a(e),f&&(m[6]=Math.round(1e3*parseFloat("0."+f))),""});var q=0,r=0;l=l.replace(/Z|([+-])(\d\d):?(\d\d)/,function(b,c,d,e){return o=n.setUTCFullYear,p=n.setUTCHours,c&&(q=a(c+d),r=a(c+e)),""}),m[3]-=q,m[4]-=r,o.apply(n,m.slice(0,3)),p.apply(n,m.slice(3)),b=n}if("number"==typeof b&&(b=new Date(b)),"date"===avalon.type(b)){for(;c;)e=h.exec(c),e?(k=k.concat(e.slice(1)),c=k.pop()):(k.push(c),c=null);return k.forEach(function(a){d=g[a],j+=d?d(b,f):a.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),j}};var j={AMPMS:{0:"上午",1:"下午"},DAY:{0:"星期日",1:"星期一",2:"星期二",3:"星期三",4:"星期四",5:"星期五",6:"星期六"},MONTH:{0:"1月",1:"2月",2:"3月",3:"4月",4:"5月",5:"6月",6:"7月",7:"8月",8:"9月",9:"10月",10:"11月",11:"12月"},SHORTDAY:{0:"周日",1:"周一",2:"周二",3:"周三",4:"周四",5:"周五",6:"周六"},fullDate:"y年M月d日EEEE",longDate:"y年M月d日",medium:"yyyy-M-d H:mm:ss",mediumDate:"yyyy-M-d",mediumTime:"H:mm:ss","short":"yy-M-d ah:mm",shortDate:"yy-M-d",shortTime:"ah:mm"};j.SHORTMONTH=j.MONTH,me.date.locate=j};var ne=avalon.modules={"domReady!":{exports:avalon,state:3},avalon:{exports:avalon,state:4}};ne.exports=ne.avalon,new function(){function c(a,b){var c="js";a=a.replace(/^(\w+)\!/,function(a,b){return c=b,""}),"ready"===c&&(d("debug: ready!已经被废弃，请使用domReady!"),c="domReady");var e="";a=a.replace(L,function(a){return e=a,""});var f="."+c,g=/js|css/.test(f)?f:"";a=a.replace(/\.[a-z0-9]+$/g,function(a){return a===f?(g=a,""):a});var h=avalon.mix({query:e,ext:g,res:c,name:a,toUrl:p},b);return h.toUrl(a),h}function f(a){var b=a.name,c=a.res,d=ne[b],e=b&&a.urlNoQuery;if(d&&d.state>=3)return b;if(d=ne[e],d&&d.state>=3)return pc(d.deps||[],d.factory,e),e;if(b&&!d){d=ne[e]={id:e,state:1};var f=function(e){K[c]=e,e.load(b,a,function(a){arguments.length&&void 0!==a&&(d.exports=a),d.state=4,i()
})};K[c]?f(K[c]):pc([c],f)}return b?e:c+"!"}function g(a,b){for(var c,d=0;c=a[d++];)if(4!==ne[c].state&&(c===b||g(ne[c].deps,b)))return!0}function h(a,b,c){var e=k(a.src);return a.onload=a.onreadystatechange=a.onerror=null,b||c&&ne[e]&&!ne[e].state?(setTimeout(function(){wb.removeChild(a),a=null}),void d("debug: 加载 "+e+" 失败"+b+" "+!ne[e].state)):!0}function i(){a:for(var a,b=z.length;a=z[--b];){var c=ne[a],d=c.deps;if(d){for(var e,f=0;e=d[f];f++){var g=C[e];if(g&&(e=d[f]=g),4!==Object(ne[e]).state)continue a}4!==c.state&&(z.splice(b,1),o(c.id,c.deps,c.factory),i())}}}function j(a,b,c){function e(){if(!"1"[0]&&!g)return g=setTimeout(e,150);if(j||J.test(f.readyState)){clearTimeout(g);var k=A.pop();k&&k.require(b),c&&c(),h(f,!1,!j)&&(d("debug: 已成功加载 "+a),b&&z.push(b),i())}}var f=vb.createElement("script");f.className=zb;var g,j="onload"in f,k=j?"onload":"onreadystatechange";f[k]=e,f.onerror=function(){h(f,!0)},wb.insertBefore(f,wb.firstChild),f.src=a,d("debug: 正准备加载 "+a)}function k(a){return(a||"").replace(L,"")}function l(a){return/^(?:[a-z]+:)?\/\//i.test(String(a))}function m(a,b){return"1"[0]?a[b]:a.getAttribute(b,4)}function n(){var c;try{a.b.c()}catch(d){c=d.stack,!c&&b.opera&&(c=(String(d).match(/of linked script \S+/g)||[]).join(" "))}if(c)return c=c.split(/[@ ]/g).pop(),c="("===c[0]?c.slice(1,-1):c.replace(/\s/,""),k(c.replace(/(:\d+)?:\d+$/i,""));for(var e,f=wb.getElementsByTagName("script"),g=f.length;e=f[--g];)if(e.className===zb&&"interactive"===e.readyState){var h=m(e,"src");return e.className=k(h)}}function o(a,c,d){var e=Object(ne[a]);e.state=4;for(var f,g=0,h=[];f=c[g++];)if(f=C[f]||f,"exports"===f){var i=e.exports||(e.exports={});h.push(i)}else h.push(ne[f].exports);var j=d.apply(b,h);return void 0!==j&&(e.exports=j),delete e.factory,j}function p(a){0===a.indexOf(this.res+"!")&&(a=a.slice(this.res.length+1));var b=a,c=0,d=this.baseUrl,e=this.parentUrl||d;v(a,q.paths,function(a,d){b=b.replace(d,a),c=1}),c||v(a,q.packages,function(a,c,d){b=b.replace(d.name,d.location)}),this.mapUrl&&v(this.mapUrl,q.map,function(a){v(b,a,function(a,c){b=b.replace(c,a),e=d})});var f=this.ext;f&&c&&b.slice(-f.length)===f&&(b=b.slice(0,-f.length)),l(b)||(e=this.built||/^\w/.test(b)?d:e,b=x(e,b));var g=b+f;return b=g+this.query,v(a,q.urlArgs,function(a){b+=(-1===b.indexOf("?")?"?":"&")+a}),this.url=b,this.urlNoQuery=g}function r(a,b,c){var d=u(a,b,c);return d.sort(w),d}function s(a){return new RegExp("^"+a+"(/|$)")}function t(a){return function(){var c;return a.init&&(c=a.init.apply(b,arguments)),c||a.exports&&y(a.exports)}}function u(a,b,c){var d=[];for(var e in a)if(Ib.call(a,e)){var f={name:e,val:a[e]};d.push(f),f.reg="*"===e&&b?/^/:s(e),c&&"*"!==e&&(f.reg=new RegExp("/"+e.replace(/^\//,"")+"(/|$)"))}return d}function v(a,b,c){b=b||[];for(var d,e=0;d=b[e++];)if(d.reg.test(a))return c(d.val,d.name,d),!1}function w(a,b){var c=a.name,d=b.name;return"*"===d?-1:"*"===c?1:d.length-c.length}function x(a,b){if("/"!==a.charAt(a.length-1)&&(a+="/"),"./"===b.slice(0,2))return a+b.slice(2);if(".."===b.slice(0,2)){for(a+=b;M.test(a);)a=a.replace(M,"");return a}return"/"===b.slice(0,1)?a+b.slice(1):a+b}function y(a){if(!a)return a;var c=b;return a.split(".").forEach(function(a){c=c[a]}),c}var z=[],A=[],B=/\.js$/i,C={},D=[],E=!1;pc=avalon.require=function(a,b,d,g){if(E){Array.isArray(a)||avalon.error("require方法的第一个参数应为数组 "+a);var h=[],j={},k=d||"callback"+setTimeout("1");g=g||{},g.baseUrl=q.baseUrl;var l=!!g.built;if(d&&(g.parentUrl=d.substr(0,d.lastIndexOf("/")),g.mapUrl=d.replace(B,"")),l){var m=c(g.defineName,g);k=m.urlNoQuery}else a.forEach(function(a){var b=c(a,g),d=f(b);d&&(j[d]||(h.push(d),j[d]="司徒正美"))});var n=ne[k];n&&4===n.state||(ne[k]={id:k,deps:l?a.concat():h,factory:b||e,state:3}),n||z.push(k),i()}else if(D.push(avalon.slice(arguments)),arguments.length<=2){E=!0;for(var o,p=D.splice(0,D.length);o=p.shift();)pc.apply(null,o)}},pc.define=function(a,b,c){"string"!=typeof a&&(c=b,b=a,a="anonymous"),Array.isArray(b)||(c=b,b=[]);var d={built:!E,defineName:a},e=[b,c,d];c.require=function(a){if(e.splice(2,0,a),ne[a]){ne[a].state=3;var b=!1;try{b=g(ne[a].deps,a)}catch(d){}b&&avalon.error(a+"模块与之前的模块存在循环依赖，请不要直接用script标签引入"+a+"模块")}delete c.require,pc.apply(null,e)};var f=d.built?"unknown":n();if(f){var h=ne[f];h&&(h.state=2),c.require(f)}else A.push(c)},pc.config=q,pc.define.amd=ne;var F=q["orig.paths"]={},G=q["orig.map"]={},H=q.packages=[],I=q["orig.args"]={};avalon.mix(qc,{paths:function(a){avalon.mix(F,a),q.paths=r(F)},map:function(a){avalon.mix(G,a);var b=r(G,1,1);avalon.each(b,function(a,b){b.val=r(b.val)}),q.map=b},packages:function(a){a=a.concat(H);for(var b,c={},d=[],e=0;b=a[e++];){b="string"==typeof b?{name:b}:b;var f=b.name;if(!c[f]){var g=b.location?b.location:x(f,b.main||"main");g=g.replace(B,""),d.push(b),c[f]=b.location=g,b.reg=s(f)}}q.packages=d.sort()},urlArgs:function(a){"string"==typeof a&&(a={"*":a}),avalon.mix(I,a),q.urlArgs=r(I,1)},baseUrl:function(a){if(!l(a)){var b=wb.getElementsByTagName("base")[0];b&&wb.removeChild(b);var c=vb.createElement("a");c.href=a,a=m(c,"href"),b&&wb.insertBefore(b,wb.firstChild)}a.length>3&&(q.baseUrl=a)},shim:function(a){for(var b in a){var c=a[b];Array.isArray(c)&&(c=a[b]={deps:c}),c.exportsFn||!c.exports&&!c.init||(c.exportsFn=t(c))}q.shim=a}});var J=vb.documentMode>=8?/loaded/:/complete|loaded/,K=pc.plugins={ready:{load:e},js:{load:function(a,b,c){var d=b.url,e=b.urlNoQuery,f=q.shim[a.replace(B,"")];f?pc(f.deps||[],function(){var a=avalon.slice(arguments);j(d,e,function(){c(f.exportsFn?f.exportsFn.apply(0,a):void 0)})}):j(d,e)}},css:{load:function(a,b,c){var e=b.url,f=vb.createElement("link");f.rel="stylesheet",f.href=e,wb.insertBefore(f,wb.firstChild),d("debug: 已成功加载 "+e),c()}},text:{load:function(a,b,c){var e=b.url,f=Yd();f.onreadystatechange=function(){if(4===f.readyState){var a=f.status;a>399&&600>a?avalon.error(e+" 对应资源不存在或没有开启 CORS"):(d("debug: 已成功加载 "+e),c(f.responseText))}},f.open("GET",e,!0),"withCredentials"in f&&(f.withCredentials=!0),f.setRequestHeader("X-Requested-With","XMLHttpRequest"),f.send(),d("debug: 正准备加载 "+e)}}};pc.checkDeps=i;var L=/(\?[^#]*)$/,M=/\/\w+\/\.\./,N=vb.scripts[vb.scripts.length-1],O=N.getAttribute("data-main");if(O){qc.baseUrl(O);var P=q.baseUrl;q.baseUrl=P.slice(0,P.lastIndexOf("/")+1),j(P.replace(B,"")+".js")}else{var Q=k(m(N,"src"));q.baseUrl=Q.slice(0,Q.lastIndexOf("/")+1)}};var oe,pe=[],qe=function(){oe||(oe=!0,pc&&(ne["domReady!"].state=4,pc.checkDeps()),pe.forEach(function(a){a(avalon)}))};if("complete"===vb.readyState)setTimeout(qe);else if(Nb)vb.addEventListener("DOMContentLoaded",qe);else{vb.attachEvent("onreadystatechange",function(){"complete"===vb.readyState&&qe()});try{var re=null===b.frameElement}catch(Ac){}Ob.doScroll&&re&&b.external&&tb()}avalon.bind(b,"load",qe),avalon.ready=function(a){oe?a(avalon):pe.push(a)},avalon.config({loader:!0}),avalon.ready(function(){avalon.scan(vb.body)}),"function"==typeof define&&define.amd&&define("avalon",[],function(){return avalon});b.avalon;return avalon.noConflict=function(a){return a&&b.avalon===avalon&&(b.avalon=avalon),avalon},void 0===c&&(b.avalon=avalon),avalon}),function b(a,c,d){function e(g,h){if(!c[g]){if(!a[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};a[g][0].call(k.exports,function(b){var c=a[g][1][b];return e(c?c:b)},k,k.exports,b,a,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c=a("../avalon.getModel"),d='<div class="oni-accordion-inner" ms-each-item="data" ms-class="oni-accordion-horizontal: direction===\'horizontal\'">\n    <div class="oni-accordion-header oni-widget-header oni-state-default oni-accordion-trigger"\n\n        ms-class="MS_OPTION_ACTIVECLASS:item.toggle"\n        ms-class-1="oni-corner-top: item.toggle && direction===\'vertical\'"\n        ms-class-2="oni-corner-all: direction===\'vertical\'"\n        MS_OPTION_HORIZONTAL_HEADER_WIDTH_HEIGHT\n        ms-hover="oni-state-hover">\n        <h2 ms-if="direction===\'horizontal\'" MS_OPTION_HORIZONTAL_TITLE>{{item.title}} {{$index}}{{currentIndex}}</h2>\n        <span ms-if="direction===\'vertical\'">{{item.title}}</span>\n    </div>\n    <div class="oni-accordion-content oni-widget-content oni-state-default" \n         ms-visible="item.toggle"\n         ms-class="oni-corner-bottom: direction===\'vertical\'"\n         MS_OPTION_HORIZONTAL_CONTENT_WIDTH_HEIGHT>\n         <div MS_OPTION_HORIZONTAL_CONTENT_WIDTH_HEIGHT>\n            {{item.content|html}}\n         </div>\n    </div>\n</div>\nMS_OPTION_MODE_CARET\n<div class="oni-accordion-inner" ms-each-item="data">\n    <div class="oni-accordion-header oni-widget-header oni-state-default oni-corner-all"\n        ms-class="MS_OPTION_ACTIVECLASS:item.toggle"\n        ms-class-1="oni-corner-top: item.toggle"\n        ms-hover="oni-state-hover">\n        <span class="oni-accordion-icon-wrap oni-accordion-trigger">\n            <i class="oni-icon oni-icon-caret-right">&#xf0da;</i>\n            <i class="oni-icon oni-icon-caret-down">&#xf0d7;</i>\n        </span> \n        {{item.title}}\n    </div>\n    <div class="oni-accordion-content oni-state-default oni-widget-content oni-corner-bottom" ms-visible="item.toggle">\n        {{item.content|html}}\n    </div>\n</div>';b.exports=function(){var a=d,b=a.split("MS_OPTION_MODE_CARET"),e=b[1],f=b[0],g=0,h=c.ui.accordion=function(a,b,d){function h(a,b){var d=u.getHeader(b),e=(c(d),u.getPanel(b)),f=u.data[b],g=!f.toggle;if(b!==u.currentIndex||"mouseenter"!==a.type){if(j.onBeforeSwitch.call(a.target,b,d,e)===!1)return!1;u.data[b].toggle=g,g&&(u.currentIndex=b),j.onSwitch.call(a.target,b,d,e)}}function i(a,b){function c(){return d+=10,d>b?(d=b,a.style.width=d+"px",clearTimeout(t),!1):(a.style.width=d+"px",void(t=setTimeout(c,10)))}var d=0;c()}var j=b.accordionOptions,k=d.length,l=b.value.split(",")[2],m=Object.keys(a.msData),n=[],o=[],p="",q="ms-css-width='headerWidth' ms-css-height='headerAndContentHeight'",r="ms-css-bottom='-headerWidth' ms-css-width='headerAndContentHeight' ms-css-height='headerWidth'",s="ms-css-width='contentWidth' ms-css-height='headerAndContentHeight'",t=0;g+=1,k>1&&c.mix(j,d[k-1][l]),f="vertical"===j.direction?f.replace("MS_OPTION_HORIZONTAL_HEADER_WIDTH_HEIGHT","").replace(/MS_OPTION_HORIZONTAL_CONTENT_WIDTH_HEIGHT/g,""):f.replace("MS_OPTION_HORIZONTAL_HEADER_WIDTH_HEIGHT",q).replace(/MS_OPTION_HORIZONTAL_CONTENT_WIDTH_HEIGHT/g,s),"vertical"===j.direction?p="caret"==j.mode?e:f:(j.mode="nav",j.multiple=!1,p=f.replace("MS_OPTION_HORIZONTAL_TITLE",r)),j.template=j.getTemplate(p,j),m.forEach(function(b){return 0===b.indexOf("ms-each")?(n=a.msData[b],o=c.getModel(n,d),n=o[1][o[0]],a.removeAttribute(b),!1):void 0}),j.data=j.data.length?j.data:n.$model||n,c.each(j.data,function(a,b){var c=b.toggle;b.toggle=void 0!==c?c:!1});var u=c.define(b.accordionId,function(b){c.mix(b,j),b.$skipArray=["widgetElement","rendered","autoRun","template","accordionClass","currentTrigge","initIndex","multiple","trigger","triggerType","accordionVmodel"],b.widgetElement=a,b.$headers=[],b.$panels=[],b.$triggers=[],b.rendered=!1,b._renderView=function(b){var e,f,h,i,k=j.template,l="",m="oni-accordion oni-accordion-mode-"+j.mode+" js-accordion"+g+" "+j.accordionClass,n=j.initIndex;if(c(a).addClass(m),a.setAttribute("ms-css-width","width"),k=k.replace(/MS_OPTION_ACTIVECLASS/g,j.currentTriggerClass),a.innerHTML=k,i=a.children[0],l=i.children,e=l[0],f=l[1],j.trigger)for(var o,p=e.children,q=0;o=p[q++];)if(c(o).hasClass(j.trigger)){h=o;break}j.trigger&&h?h.setAttribute("ms-on-"+j.triggerType,j.triggerType+"Callback($event,$index)"):(e.setAttribute("ms-on-"+j.triggerType,j.triggerType+"Callback($event,$index)"),c(e).css("cursor","pointer")),null!==n&&(u.currentIndex=n,u.data[n].toggle=!0),b?b():(c.log("avalon请尽快升到1.3.7+"),c.scan(a,[u].concat(d)),"function"==typeof j.onInit&&j.onInit.call(a,u,j,d)),u.rendered=!0,setTimeout(function(){for(var a,b=0;a=l[b++];){var d=c(a);if(d.hasClass("oni-accordion-header"))if(u.$headers.push(a),j.trigger){for(var e,f=a.children,g=0;e=f[g++];)if(c(e).hasClass(j.trigger)){u.$triggers.push(e);break}}else u.$triggers.push(a);else d.hasClass("oni-accordion-content")&&u.$panels.push(a)}},400)},b.$init=function(d){if(!u.data.length){for(var e,f=[],g=null;e=a.firstChild;)if(1===e.nodeType){for(g=e.nextSibling;1!==g.nodeType;)a.removeChild(g),g=e.nextSibling;c(e).hasClass("title")&&f.push({title:e.innerHTML.trim(),content:g.innerHTML.trim(),toggle:!1}),a.removeChild(e),a.removeChild(g)}else a.removeChild(e);u.data=f}a.$vmodel=u,j.autoRun&&b._renderView(d)},b.clickCallback=function(a,b){u._eventCallback(a,b)},b.mouseenterCallback=function(a,b){u._eventCallback(a,b)},b.$remove=function(){a.innerHTML=a.textContent=""},b.setData=function(a){c.each(a,function(a,b){b.toggle=void 0!==b.toggle?b.toggle:!1}),u.data=a,u.currentIndex=-1,u._renderView()},b.refresh=function(a){a?u.setData(a):u.rendered||b._renderView()},b.getCurrentHeader=function(){return j.multiple?null:u.$headers[this.currentIndex]},b.getCurrentPanel=function(){return j.multiple?null:u.$panels[this.currentIndex]},b.getHeader=function(a){return u.$headers[a]},b.getPanel=function(a){return u.$panels[a]},b.getLength=function(){return j.data.length},b.getStatus=function(a){return"none"===c(u.$panels[a]).css("display")?0:1},b.switchTo=function(a){var c={target:u.$triggers[a]};return j.onBeforeSwitch.call(c.target,a,b.getHeader(a),b.getPanel(a))===!1?!1:(u.currentIndex=a,void(u.data[a].toggle=!0))},b._eventCallback=h});return u.$watch("currentIndex",function(a,b){var c=u.getPanel(a);"horizontal"==u.direction&&c&&(clearTimeout(t),i(c,Number(u.contentWidth)||400)),u.multiple||-1===b||(u.data[b].toggle=!1)}),u};return h.version=1,h.defaults={width:"100%",headerWidth:30,contentWidth:400,headerAndContentHeight:200,autoRun:!0,template:"",accordionClass:"",currentTriggerClass:"oni-state-active",data:[],initIndex:null,mode:"caret",multiple:!1,widgetElement:"",trigger:"oni-accordion-header",triggerType:"click",currentIndex:-1,direction:"vertical",onBeforeSwitch:c.noop,onSwitch:c.noop,onInit:c.noop,getTemplate:function(a){return a}},c}()},{"../avalon.getModel":3}],2:[function(a,b){var c='<ul class="oni-at-popup" >\r\n    <li class="oni-at-item" \r\n        ms-repeat-item="_datalist" \r\n        ms-class="oni-state-hover:activeIndex == $index"\r\n        ms-mouseenter="_hover($event,$index)"\r\n        ms-click="_select"\r\n        >{{item | html}}</li>\r\n</ul>\r\n';b.exports=function(){function a(a){return a.replace(/([A-Z]+)/g,function(a,b){return"-"+b.toLowerCase()})}function b(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(a){var b;if("number"==typeof a.selectionStart)b=a.selectionStart;else{var c=a.selection.createRange();c.moveStart("character",-a.value.length),b=c.text.length}return b}function e(a,b){if(a.setSelectionRange)a.focus(),a.setSelectionRange(b,b);else if(a.createTextRange){var c=a.createTextRange();c.collapse(!0),c.moveEnd("character",b),c.moveStart("character",b),c.select()}}function f(a,b){var c=b._datalist.size(),d=a.which||a.keyCode;switch(d){case 13:b._select(a);break;case 9:case 27:a.preventDefault();break;case 38:case 63233:var e=b.activeIndex-1;0>e&&(e=c-1),b.activeIndex=e;break;case 40:case 63235:a.preventDefault();var e=b.activeIndex+1;e===c&&(e=0),b.activeIndex=e}}var g=avalon.ui.at=function(g,h,i){var j,k,l,m,n=h.atOptions,o=avalon(g);n.template=n.getTemplate(c,n);var p,q,r=new Date-0,s=avalon.define(h.atId,function(c){avalon.mix(c,n),c.$skipArray=["at","widgetElement","datalist","template"],c.widgetElement=g,c.$init=function(a){var c=[s].concat(i);k=o.bind("blur",function(){!s.$model.__mouseenter__&&s.toggle&&(s.toggle=!1)}),l=o.bind("keydown",function(a){13===a.keyCode&&m&&a.preventDefault(),38===a.which&&a.preventDefault()}),j=o.bind("keyup",function(a){var e=this;a.shiftKey||setTimeout(function(){function g(){var a=s.filterData(s),b=a.join(",");s.$model.__toString__!==b&&(a=a.map(function(a){return s.highlightData(a,k)}),s._datalist=a,s.$model.__toString__=b),s.toggle=!!a.length}var h=d(e),i=e.value,j=n.at,k=null,l=i.charAt(h-1)===j,o=i.slice(0,h).lastIndexOf(j);if(-1===o)return s.toggle=!1;if(p=o+1,l&&(k=""),!l&&"number"==typeof p){var k=i.slice(p,h);if(k.indexOf(" ")>=0||k.length>n.maxLength)return s.toggle=!1;k=k.length>=n.minLength?k:""}if("string"==typeof k){if(s.query=k,!m){var q=i.slice(0,h),t=q;t=t.replace(new RegExp(b(j),"img"),"<bdo>"+j+"</bdo>"),m=s._popup.call(e,t),s.activeIndex=0,avalon.scan(m,c),avalon(m).bind("mouseleave",function(){s.$model.__mouseenter__=!1})}var u=new Date;r-u>s.delay&&"function"==typeof s.updateData&&(s.updateData(g),r=u),g(),s.$model.__keyup__=!0,f(a,s),setTimeout(function(){s.$model.__keyup__=!1},150)}})}),a?a():(avalon.log("请尽快升到avalon1.3.7+"),avalon.scan(g,c),"function"==typeof n.onInit&&n.onInit.call(g,s,n,i))},c.$remove=function(){avalon(g).unbind("keyup",j).unbind("blur",k).unbind("keydown",l),c.toggle=!1,avalon.log("at $remove")},c._popup=function(b){q=q||document.createElement("div"),q.innerHTML=b,document.body.appendChild(q);var c=window.getComputedStyle?getComputedStyle(this,null):this.currentStyle,d={};avalon(this).css("font-size");for(var e in c)/^[a-z]+$/i.test(e)&&""!==c[e]&&"function"!=typeof c[e]&&(d[e]=c[e]);avalon.mix(d,{width:avalon(this).width()+"px",height:avalon(this).height()+"px",border:"1px solid red",display:"block","word-wrap":"break-word",visibility:"hidden"});var f=[];for(var e in d)f.push(a(e)+":"+d[e]);q.style.cssText=f.join("; "),q.scrollTop=this.scrollTop,q.scrollLeft=this.scrollLeft;var g=avalon(this).offset(),h=q.getBoundingClientRect(),i=q.getElementsByTagName("bdo"),j=i[i.length-1];if(document.createRange){var k=document.createRange();k.selectNode(j);var l=k.getBoundingClientRect()}else l=j.getBoundingClientRect();var n=l.bottom-h.top,o=l.left-h.left;return m=m||document.createElement("div"),m.innerHTML=s.template,document.body.appendChild(m),m.className="oni-at",m.setAttribute("ms-visible","toggle"),avalon(m).css({top:g.top+n,left:g.left+o,position:"absolute"}),m},c._hover=function(a,b){a.preventDefault();var d=s.$model;d.__mouseenter__=!0,d.__keyup__||(c.activeIndex=b)},c.$watch("toggle",function(a){a===!1&&m&&m.parentNode&&(m.parentNode.removeChild(m),m=null,document.body.removeChild(q),q=null)}),c._select=function(a){a.stopPropagation(),a.preventDefault();var b=s._datalist[s.activeIndex],c=document.createElement("span");c.innerHTML=b,b=c.textContent||c.innerText;var d=g.value;g.value=d.slice(0,p)+b+" "+d.slice(p),e(g,p+b.length+1),s.toggle=!1}});return s};return g.vertion=1,g.defaults={at:"@",datalist:[],_datalist:[],template:"",toggle:!1,activeIndex:0,query:"",limit:5,maxLength:20,minLength:1,delay:500,updateData:function(){},getTemplate:function(a){return a},filterData:function(a){var b={},c=a.query,d=c.toLowerCase(),e=a.datalist.filter(function(a){return 0===a.indexOf(c)?(b[a]=1,!0):void 0});return a.datalist.forEach(function(a){var c=a.toLowerCase();b[a]||c.indexOf(d)>-1&&(b[a]=1,e.push(a))}),e.slice(0,a.limit)},highlightData:function(a,c){var d=b(c);return a.replace(new RegExp("("+d+")","ig"),function(a,b){return'<strong style="color:#FF6600;">'+b+"</strong>"})}},avalon}()},{}],3:[function(a,b){b.exports=function(){function a(a,b,c){for(var d,e,f=b,g=0,h=a.length;h>g;g++){var i=a[g];if(e=f.$model||f,"undefined"==typeof e[i])return;d=f,f=f[i]}return c>1?d[i]:d}return avalon.getModel=function(b,c){if(!b)return null;var d=b.split("."),e=d.length,f=d[e-1];1!=d.length&&d.pop();for(var g=0,h=c.length;h>g;g++){var i=c[g],j=a(d,i,e);if("undefined"!=typeof j&&(j.hasOwnProperty(f)||Object.prototype.hasOwnProperty.call(j,f)))return[f,j,i]}return null},avalon}()},{}],4:[function(a,b){b.exports=function(){function a(a,c){var d,e=b.concat(),f=!1,g=c.icon||"",h=c.corner;if(c.label=c.label||"",h&&(e.push("oni-corner-all"),(h=parseInt(h))&&(a.style.borderRadius=h+"px")),c.size&&e.push("oni-button-"+c.size),c.color&&e.push("oni-button-"+c.color),c.disabled&&e.push("oni-state-disabled"),avalon(a).addClass(e.join(" ")),"input"===c.elementType&&c.label)return void avalon(a).val(c.label);switch(c.type){case"text":d="<span class='oni-button-text'>"+c.label+"</span>";break;case"labeledIcon":f=!0;case"icon":switch(c.iconPosition){case"left":d="<i class='oni-icon oni-icon-left'>"+g.replace(/\\/g,"")+"</i><span class='oni-button-text oni-button-text-right"+(f?"":" oni-button-text-hidden")+"'>"+c.label+"</span>";break;case"right":d="<span class='oni-button-text oni-button-text-left"+(f?"":" oni-button-text-hidden")+"'>"+c.label+"</span><i class='oni-icon oni-icon-right'>"+g.replace(/\\/g,"")+"</i>";break;case"left-right":var i=g&&g.split("-")||["",""],j=i[0],k=i[1];d="<i class='oni-icon oni-icon-left'>"+j.replace(/\\/g,"")+"&nbsp;</i><span class='oni-button-text oni-button-text-middle"+(f?"":" oni-button-text-hidden")+"'>"+c.label+"</span><i class='oni-icon oni-icon-right'>&nbsp;"+k.replace(/\\/g,"")+"</i>"}}a.innerHTML=d}var b=["oni-button","oni-widget","oni-state-default"],c=avalon.ui.button=function(b,c,d){function e(a){g.disabled&&(a.preventDefault(),a.stopImmediatePropagation())}var f,g=c.buttonOptions,h=avalon(b);f={$init:function(){var c=g.data,f="",i=g.label,j=0,k=b.tagName.toLowerCase();if(g.groups&&c.length>1){var l="";return c.forEach(function(a){var b="<span ms-widget='button'";void 0!==a.type&&(b+=" data-button-type='"+a.type+"'"),void 0!==a.iconPosition&&(b+=" data-button-icon-position='"+a.iconPosition+"'"),void 0!==a.icon&&(b+=" data-button-icon='"+a.icon+"'"),void 0!==a.color&&(b+=" data-button-color='"+a.color+"'"),void 0!==a.size&&(b+=" data-button-size='"+a.size+"'"),void 0!==a.disabled&&(b+=" data-button-disabled='"+a.disabled+"'"),void 0!==a.label&&(b+=" data-button-label='"+a.label+"'"),b+=">"+(a.text||"")+"</span>",l+=b}),b.innerHTML=l,b.setAttribute("ms-widget","buttonset"),"vertical"==g.direction&&b.setAttribute("data-buttonset-direction","vertical"),g.corner||b.setAttribute("data-buttonset-corner",g.corner),g.width&&b.setAttribute("data-buttonset-width",parseInt(g.width)),void avalon.scan(b,d)}"boolean"!=typeof g.disabled?g.disabled=!!b.disabled:b.disabled=g.disabled,"input"===k&&(f="input"),(j=parseInt(g.width))&&(b.style.width=j+"px"),h.bind("mousedown",function(a){e(a),h.addClass("oni-state-active")}),h.bind("mouseup",function(a){e(a),h.removeClass("oni-state-active")}),h.bind("blur",function(){h.removeClass("oni-state-active"),h.removeClass("oni-state-focus")}),h.bind("focus",function(){h.addClass("oni-state-focus")}),g.label||(i="input"===f?b.value:b.innerHTML),g.elementType=f,g.label=i,a(b,g),avalon.scan(b,d)}},f.$init()};return avalon.ui.buttonset=function(a,b,c){var d=b.buttonsetOptions,e=d.corner,f=d.direction,g=avalon(a);e=void 0!==e?e:!0;var h={$init:function(){var h=[];h.push("oni-buttonset"),firstButtonClass="oni-corner-left",lastButtonClass="oni-corner-right",children=a.childNodes,buttons=[],buttonWidth=d.width,firstElement=!0;for(var i,j=0;i=children[j++];)1===i.nodeType&&(i.setAttribute("data-button-corner","false"),buttons.push(i),firstElement&&(avalon(i).addClass("oni-button-first"),firstElement=!1));var k=buttons.length;return k&&e&&("vertical"===f&&(firstButtonClass="oni-corner-top",lastButtonClass="oni-corner-bottom"),avalon(buttons[0]).addClass(firstButtonClass),avalon(buttons[k-1]).addClass(lastButtonClass)),"vertical"===f&&h.push("oni-buttonset-vertical"),g.addClass(h.join(" ")),b.buttons=buttons,avalon.scan(a,c),(buttonWidth=parseInt(buttonWidth))?void function(a){var b=[].concat(buttons);setTimeout(function(){for(var c=0;button=b[c++];){var d=avalon(button),e=button.tagName.toLowerCase();button.style.width="input"===e||"button"===e?a+"px":a-parseInt(d.css("border-left-width"))-parseInt(d.css("border-right-width"))-2*parseInt(d.css("padding-left"))+"px"}},10)}(buttonWidth):void function(a){var b=0,c=0;a=a.concat(),b=setInterval(function(){for(var d,e,f=0,g=0;e=a[g++];)f=Math.max(f,avalon(e).outerWidth());if(f===c){c+=1;for(var e,g=0;e=a[g++];){var h=e.tagName.toLowerCase(),d=avalon(e);e.style.width="input"===h||"button"===h?c+"px":c-parseInt(d.css("border-left-width"))-parseInt(d.css("border-right-width"))-2*parseInt(d.css("padding-left"))+"px"}return void clearInterval(b)}c=f},100)}(buttons)}};h.$init()},c.version=1,c.defaults={groups:!1,direction:"",data:[],type:"text",iconPosition:"left",icon:"",size:"",color:"",corner:!0,style:"",disabled:!1,label:"",width:""},avalon}()},{}],5:[function(a,b){var c='<div id="oni-carousel"\r\n	 class="oni-carousel" \r\n	 ms-css-width="pictureWidth" \r\n	 ms-css-height="pictureHeight"\r\n	 ms-mouseenter="stopPlay" \r\n	 ms-mouseleave="restartPlay(\'carousel\')"\r\n	 >\r\n	<div class="oni-carousel-panel"\r\n		 ms-css-width="pictureWidth* picNum" \r\n		 ms-css-left="panelOffsetX" \r\n		 ms-css-position="panelPosition"\r\n		 >\r\n		<div class="oni-carousel-item" \r\n			 ms-repeat="pictures"\r\n			 ms-css-width="pictureWidth"\r\n			 ms-css-position="itemPosition"\r\n			 ms-css-opacity="getOpacity($index)"\r\n			 >\r\n			<img class="oni-carousel-img" ms-src="{{el.src}}" alt="{{el.alt}}" />\r\n			<div class="oni-carousel-content">\r\n				MS_OPTION_CONTENT\r\n			</div>\r\n		</div>\r\n	</div>\r\n	<div class="oni-carousel-selection-wrap" \r\n		 ms-visible="alwaysShowSelection"\r\n		 ms-css-margin-left="selectionWrapOffset"\r\n		 >\r\n		<a ms-class="selected:el==currentIndex" \r\n		 ms-mouseenter="selectPic($index,$event)"\r\n		 ms-click="selectPic($index,$event)"\r\n		 ms-mouseleave="restartPlay(\'tab\')"\r\n		 ms-repeat="selections"\r\n			></a>\r\n	</div>\r\n	<a ms-class="{{arrowLeftClass}}" class="arrow prev png24" \r\n		ms-click="animate(-1)"\r\n		ms-mouseenter="arrowHover(\'left\')"\r\n		ms-mouseleave="arrowBlur(\'left\')"\r\n		ms-visible="arrowVisible"\r\n		ms-css-background-image="arrowLeftBg"\r\n	>\r\n	</a>\r\n	<a ms-class="{{arrowRightClass}}" class="arrow after png24" \r\n		ms-click="animate(1)"\r\n		ms-mouseenter="arrowHover(\'right\')"\r\n		ms-mouseleave="arrowBlur(\'right\')"\r\n		ms-visible="arrowVisible"\r\n		ms-css-background-image="arrowRightBg"\r\n	>\r\n	</a>\r\n</div>\r\n';b.exports=function(){var a="",b=document.getElementsByTagName("SCRIPT");for(var d in b)if(b[d].outerHTML&&-1!==b[d].outerHTML.indexOf("avalon.carousel.js")){var e=b[d].src;a=e.substring(0,e.lastIndexOf("/"))}var f=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,10)}}(),g={linear:function(a,b,c,d){return c*a/d+b},easeIn:function(a,b,c,d){return c*(a/=d)*a+b},easeOut:function(a,b,c,d){return-c*(a/=d)*(a-2)+b},easeInOut:function(a,b,c,d){return(a/=d/2)<1?c/2*a*a+b:-c/2*(--a*(a-2)-1)+b}},h=avalon.ui.carousel=function(b,d,e){var h,i=d.carouselOptions;c=c.replace("MS_OPTION_CONTENT",i.content),i.template=i.getTemplate(c,i);var j,k=!1,l=i.during/10,m=0,n=null,o={$id:d.carouselId,$skipArray:["widgetElement","template","selectionWrapOffset"],widgetElement:b,picNum:i.pictures.length+1,pictureOpacity:{},itemPosition:"relative",panelPosition:"absolute",selections:avalon.range(i.pictures.length),currentIndex:0,selectionWrapOffset:20*-i.pictures.length/2,panelOffsetX:0,arrowVisible:!1,arrowLeftBg:""!==i.arrowLeftNormalSrc?"url("+i.arrowLeftNormalSrc+")":"",arrowRightBg:""!==i.arrowRightNormalSrc?"url("+i.arrowRightNormalSrc+")":"",$init:function(c){if(!h){h=!0;var d=i.template;if(b.style.display="none",b.innerHTML=d,b.style.display="block",(p.adaptiveWidth||"100%"===p.pictureWidth)&&(p.pictureWidth=b.offsetWidth),p.adaptiveHeight||"100%"===p.pictureHeight){b.style.height="100%";for(var f=b.children,g=0,j=f.length;j>g;g++)"oni-carousel"===f[g].getAttribute("class")&&(f[g].style.height="100%")}for(var k=p.pictures,l=[],g=0;g<k.length;g++){var m=new Image;m.src=k[g].src}l.push("./images/arrows-left-hover-icon.png","./images/arrows-right-hover-icon.png");for(var g=0;g<l.length;g++){l[g]=a+l[g];var m=new Image;m.src=l[g]}c?c():(avalon.log("请尽快升到avalon1.3.7+"),avalon.scan(b,_vmodels),"function"==typeof i.onInit&&i.onInit.call(b,p,i,e))}},$remove:function(){b.innerHTML=b.textContent=""},stopPlay:function(){p.arrowVisible=p.alwaysShowArrow?!0:!1,p.hoverStop&&p.autoSlide&&(clearTimeout(n),n=null)},restartPlay:function(a){"carousel"===a&&(p.arrowVisible=!1),p.autoPlay(p)},fadein:1,fadeout:0,animate:function(a,b){if(!k){if(b=b||1,"slide"===p.effect){1===a&&p.panelOffsetX===-p.pictureWidth*(p.picNum-1)?p.panelOffsetX=0:-1===a&&0===p.panelOffsetX&&(p.panelOffsetX=-p.pictureWidth*(p.picNum-1));var c=(p.panelOffsetX-p.pictureWidth*a*b,0),d=p.panelOffsetX,e=p.pictureWidth*-a*b,h=function(){k=!1,p.panelOffsetX<=-p.pictureWidth*(p.pictures.length-1)&&a>0?p.panelOffsetX=0:p.panelOffsetX>=0&&0>a?p.panelOffsetX=-p.pictureWidth*(p.picNum-1):(p.panelOffsetX=g[p.easing](c,d,e,l),l>c&&(c+=1,f(h),k=!0))}}else if("fade"===p.effect)var c=0,h=function(){k=!1,p.fadein=g[p.easing](c,0,1,l),p.fadeout=g[p.easing](c,1,-1,l),l>c&&(c+=1,f(h),k=!0)};else var h=function(){p.fadein=1,p.fadeout=0};h(),j=p.currentIndex,p.currentIndex+=1*a*b,p.currentIndex>p.selections.length-1?p.currentIndex=0:p.currentIndex<0&&(p.currentIndex=p.selections.length-1)}},getOpacity:function(a){if("slide"!==p.effect){{p.fadein+p.fadeout}return a===p.currentIndex?p.fadein:a===j?p.fadeout:0}return 1},selectPic:function(a,b){if(m=a,b.type===p.eventType||"both"===p.eventType){var c=p.currentIndex-a,d=c>0?-1:1;"mouseenter"===b.type?setTimeout(function(){p.animate(d,Math.abs(c))},300):p.animate(d,Math.abs(c)),p.autoSlide&&(clearTimeout(n),n=null)}var e=setInterval(function(){if(p.currentIndex!==m){var a=p.currentIndex-m,b=a>0?-1:1;p.animate(b,Math.abs(a))}else clearInterval(e)},800)},arrowHover:function(a){"left"===a?p.arrowLeftBg=""!==p.arrowLeftHoverSrc?"url("+p.arrowLeftHoverSrc+")":"":p.arrowRightBg=""!==p.arrowRightHoverSrc?"url("+p.arrowRightHoverSrc+")":""},arrowBlur:function(a){"left"===a?p.arrowLeftBg=""!==p.arrowLeftNormalSrc?"url("+p.arrowLeftNormalSrc+")":"":p.arrowRightBg=""!==p.arrowRightNormalSrc?"url("+p.arrowRightNormalSrc+")":""},autoPlay:function(){function a(){n=setTimeout(function(){p.animate(1),a()},p.timeout)}null===n&&p.autoSlide&&a()}};avalon.mix(o,i);var p=avalon.define(o);return"slide"!==p.effect&&(p.itemPosition="absolute",p.panelPosition="relative"),p.pictures.push(p.pictures[0]),p.autoPlay(p),p};h.vertion="1.0.1",h.defaults={pictures:[],pictureWidth:500,pictureHeight:200,content:"",effect:"slide",easing:"easeInOut",timeout:2500,during:300,alwaysShowArrow:!0,alwaysShowSelection:!0,autoSlide:!0,hoverStop:!0,adaptiveWidth:!1,adaptiveHeight:!1,eventType:"click",arrowLeftNormalSrc:"",arrowRightNormalSrc:"",arrowLeftHoverSrc:"",arrowRightHoverSrc:"",arrowLeftClass:"",arrowRightClass:"",onInit:avalon.noop,getTemplate:function(a){return a},$author:"heiwu805@hotmail.com"}}()},{}],6:[function(a,b){var c=a("../avalon.getModel"),d='<li class="oni-checkboxlist-item oni-checkboxlist-all" \r\n    ms-css-float="vertical? \'none\': \'left\'" \r\n    ms-if="!!alltext"\r\n    ms-class="fl:!vertical">\r\n    <label ms-if="data.size()">\r\n        <input type="checkbox" \r\n               ms-click="_clickAll($event)" \r\n               ms-duplex-checked="all" \r\n               value = "all"\r\n               class="checkbox"/> {{alltext}}\r\n    </label>\r\n</li>\r\n<li ms-repeat-cpitem="data" class="oni-checkboxlist-item" \r\n    ms-css-float="vertical? \'none\': \'left\'"\r\n    ms-class="fl:!vertical">\r\n    <label>\r\n        <input type="checkbox" \r\n               ms-click="_clickOne($event, $index)"\r\n               ms-duplex="MS_OPTIONS_DUPLEX"\r\n               ms-value="{{cpitem.value||cpitem.text}}" \r\n               class="checkbox" /> \r\n        {{cpitem.text|html}}\r\n    </label>\r\n</li>\r\n';b.exports=function(){function a(a,b){var d=[],e=!0;b=b&&b.$model,c.each(a.data,function(a,b){d.push(b.value||b.text)
}),a.keys=d,c.each(d,function(a,c){-1===b.indexOf(c)&&(e=!1)}),a.all=e}var b=c.ui.checkboxlist=function(b,e,f){var g=e.checkboxlistOptions,h="string"==typeof g.fetch?c.getModel(g.fetch,f):g.fetch,i=h&&"array"===c.type(h)&&h[1][h[0]]||g.fetch||null,j="string"==typeof g.onSelect?c.getModel(g.onSelect,f):!1,k=j&&j[1][j[0]]||c.noop,l="function"===c.type(i)?i:null,m=c.define(e.checkboxlistId,function(a){c.mix(a,g),a.$skipArray=["widgetElement","template","keys"],a.widgetElement=b,a.keys=[],a._clickAll=function(b){setTimeout(function(){var c=b.target.checked;c?n[1][n[0]]=m.keys.map(function(a){return a+""}):n[1][n[0]].clear(),k.apply(0,[a.data.$model,c,b.target])},20)},a._clickOne=function(b){k.apply(0,[a.data.$model,b.target.checked,b.target])},a.$init=function(a){var e=d.replace("MS_OPTIONS_DUPLEX",g.duplex);m.template=m.getTemplate(e,g),b.className+=" oni-checkboxlist oni-checkboxlist-list oni-helper-clearfix",b.innerHTML=m.template,a?a():(c.log("avalon请尽快升到1.3.7+"),c.scan(b,[m].concat(f)),"function"==typeof g.onInit&&g.onInit.call(b,m,g,f))},a.$remove=function(){b.innerHTML=""}}),n=c.getModel(g.duplex,[m].concat(f)),o=n&&n[1][n[0]];if(m.data.$watch("length",function(b){b&&a(m,o)}),!o)throw new Error("未配置duplex");if(b.value=o.$model.join(","),o.$watch("length",function(a){b.value=0==a?"":n[1][n[0]].join(","),m.all=a==m.data.length}),m.data.length)return a(m,o),m;if(g.fetch)l.apply(0,[function(a){m.data=a;var a=[];c.each(m.data,function(b,c){a.push(c.value||c.text)}),m.keys=a}]);else{for(var p=document.createElement("div");b.firstChild;)p.appendChild(b.firstChild);switch(g.type){case"week":var e=[{text:"周一",value:"MONDAY"},{text:"周二",value:"TUESDAY"},{text:"周三",value:"WEDNESDAY"},{text:"周四",value:"THURSDAY"},{text:"周五",value:"FRIDAY"},{text:"周六",value:"SATURDAY"},{text:"周日",value:"SUNDAY"}];break;default:for(var q=p.getElementsByTagName("input"),e=[],r=0;r<q.length;r++){for(var s=q[r],t=s.parentNode,u="";t&&"LI"!=t.tagName;)t=t.parentNode;u=t.textContent||t.innerText,u.replace(/^\s+/,"").replace(/\s+$/,""),e.push({text:u,value:s.value||u})}}m.data=e}return c.ui.checkboxlist.defaults.data=[],m};return b.version=1,b.defaults={data:[],all:!1,alltext:"全部",type:"",fetch:"",template:"",onSelect:c.noop,getTemplate:function(a){return a},vertical:!0},c}()},{"../avalon.getModel":3}],7:[function(a,b){var c=a("../draggable/avalon.draggable"),d='<div class="oni-colorpicker" ms-css-background-color="bgColor"></div>\r\nMS_OPTION_COM\r\n<div class="oni-colorpicker-hue" ms-css-background="hue_color"></div>\r\nMS_OPTION_COM\r\n<div class="oni-colorpicker-wheel" ms-draggable data-draggable-before-start="wheelDragStart" data-draggable-drag="wheelDrag">\r\n	<div class="oni-colorpicker-marker" ms-css-left="wheel_m.left" ms-css-top="wheel_m.top"></div>\r\n</div>\r\nMS_OPTION_COM\r\n<div class="oni-colorpicker-overlay" ms-draggable data-draggable-before-start="overlayDragStart" data-draggable-drag="overlayDrag">\r\n	<div class="oni-colorpicker-marker" ms-css-left="overlay_m.left" ms-css-top="overlay_m.top"></div>\r\n</div>';b.exports=function(){function a(a){var b=/#[0-9,a-f]{6}$/i;return b.test(a)}function b(a,b,c){function d(a,b,c){return 0>c&&(c+=1),c>1&&(c-=1),1/6>c?a+6*(b-a)*c:.5>c?b:2/3>c?a+(b-a)*(2/3-c)*6:a}var e,f,g;if(0==b)e=f=g=c;else{var h=.5>c?c*(1+b):c+b-c*b,i=2*c-h;e=d(i,h,a+1/3),f=d(i,h,a-1/3),g=d(i,h,a)}return[Math.round(255*e),Math.round(255*f),Math.round(255*g)]}function e(a,b,c){a/=255,b/=255,c/=255;var d,e,f=Math.max(a,b,c),g=Math.min(a,b,c),h=(f+g)/2;if(f==g)d=e=0;else{var i=f-g;switch(e=h>.5?i/(2-f-g):i/(f+g),f){case a:d=(b-c)/i+(c>b?6:0);break;case b:d=(c-a)/i+2;break;case c:d=(a-b)/i+4}d/=6}return[d,e,h]}function f(a,c,d){return g(b(a,c,d))}function g(a){function b(a){return 16>a?"0"+a.toString(16):a.toString(16)}return"#"+a.map(b).join("")}function h(a,b){var c=b.parentNode;c.lastChild==b?c.appendChild(a):c.insertBefore(a,b.nextSibling)}var i={},j="#ffffff",k=c.ui.colorpicker=function(b,g,k){function l(a){function b(){var b=x.offset().left+A,c=x.offset().top+A,d=a.pageX-b,e=c-a.pageY,f=Math.atan(e/d);return 0>d&&(f=Math.PI+f),f}var c=b();t=c/(2*Math.PI)-.25,m(c),p(),q()}function m(a){var b={x:Math.round(B*Math.cos(a)),y:Math.round(B*Math.sin(a))};F.wheel_m.left=A+b.x,F.wheel_m.top=A-b.y}function n(a){function b(a){return 0>a?0:a>C?C:a}var c={x:a.pageX-y.offset().left,y:a.pageY-y.offset().top},d=b(c.x),e=b(c.y);o(d,e),u=1-d/C,v=1-e/C,q()}function o(a,b){var c=F.overlay_m;c.left=a,c.top=b}function p(){F.hue_color=f(t,1,.5)}function q(){b.value=F.cp_color=f(t,u,v),F.input_color=v>.5?"black":"white"}function r(){"ms-duplex"in b.msData||b.setAttribute("ms-duplex","defaultColor"),b.setAttribute("data-duplex-changed","setByIp"),b.setAttribute("ms-css-background","cp_color"),b.setAttribute("ms-css-color","input_color");var a=d.split("MS_OPTION_COM").map(function(a){return c.parseHTML(a).firstChild}),e=a[1],f=a[2],g=a[3];w=a[0],x=c(f),y=c(g),w.appendChild(e),w.appendChild(f),w.appendChild(g),F.autoHide?(c(w).addClass("oni-colorpicker-auto-hide"),w.setAttribute("ms-visible","toggle"),w.setAttribute("ms-click","cpClick"),b.setAttribute("ms-click","ipClick"),z=c.bind(document,"click",function(){F.toggle=!1}),document.body.appendChild(w)):h(w,b),c.scan(b,[F].concat(k)),c.scan(w,[F].concat(k))}function s(){var a=D.offset();w.style.left=a.left+"px",w.style.top=b.offsetHeight+a.top+"px"}var t,u,v,w,x,y,z,A=97,B=84,C=100,D=c(b),E={$id:g.colorpickerId,$skipArray:["autoHide"],wheel_m:{left:0,top:0},overlay_m:{left:0,top:0},cp_color:"",input_color:"",hue_color:"",toggle:!1,$init:function(){r(),a(b.value)||(c.log(b.value+" 不是合法的十六进制颜色表示法"),b.value=j),F.setByIp(b.value)},$remove:function(){w.innerHTML="",c.unbind(document,"click",z)},setByIp:function(b){if(b!==F.cp_color&&a(b)){var c=parseInt(b.substr(1,2),16),d=parseInt(b.substr(5,2),16),f=parseInt(b.substr(3,2),16);t=e(c,d,f)[0],u=e(c,d,f)[1],v=e(c,d,f)[2];var g=2*Math.PI*(t+.25),h=(1-u)*C,i=(1-v)*C;m(g),o(h,i),p(),F.cp_color=b,F.input_color=v>.5?"black":"white"}},wheelDragStart:function(a,b){b.dragX=!1,b.dragY=!1,l(a)},wheelDrag:function(a){l(a)},overlayDragStart:function(a,b){b.dragX=!1,b.dragY=!1,n(a)},overlayDrag:function(a){n(a)},ipClick:function(a){F.toggle=!0,s(),F!==i&&(i.toggle=!1,i=F),a.stopPropagation()},cpClick:function(a){a.stopPropagation()}};c.mix(E,g.colorpickerOptions);var F=c.define(E);return F};return k.version=1,k.defaults={autoHide:!0,defaultColor:"#ffffff",bgColor:""},c}()},{"../draggable/avalon.draggable":14}],8:[function(a,b){var c=a("../avalon.getModel"),d='<div class="oni-coupledatepicker-item">\r\n    <input\r\n    ms-widget="datepicker, $, $fromConfig"\r\n    ms-duplex="MS_OPTION_FROMDUPLEX"/>   \r\n</div>\r\n<span class="label">-</span>\r\n<div class="oni-coupledatepicker-item">\r\n    <input \r\n    ms-widget="datepicker, $, $toConfig"\r\n    ms-duplex="MS_OPTION_TODUPLEX"/>\r\n</div>\r\nMS_OPTION_TEMPLATE\r\n<input\r\n    ms-widget="datepicker, $, $fromConfig"\r\n    ms-duplex="MS_OPTION_FROMDUPLEX"/>   \r\n<input \r\n    ms-widget="datepicker, $, $toConfig"\r\n    ms-duplex="MS_OPTION_TODUPLEX"/>';a("./avalon.datepicker"),b.exports=function(){function a(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}var b=c.ui.coupledatepicker=function(e,f,g){function h(a){if(t){var b=t.length,d=c.getModel(t[0].trim(),g),e=1===b?null:c.getModel(t[1].trim(),g),f=d[1][d[0]],h=e?e[1][e[0]]:"";m=d,n=e,i(b,f,h),m&&(a=a.replace(/MS_OPTION_FROMDUPLEX/g,t[0].trim())),n&&(a=a.replace(/MS_OPTION_TODUPLEX/g,t[1].trim()))}return m||(q.inputFromValue="",a=a.replace(/MS_OPTION_FROMDUPLEX/g,"inputFromValue")),n||(q.inputToValue="",a=a.replace(/MS_OPTION_TODUPLEX/g,"inputToValue")),a}function i(a,b,c){a&&(2==a?(m?m[1][m[0]]=b&&r(b)&&b||"":A.inputFromValue=b&&r(b)&&b||"",n?n[1][n[0]]=c&&r(c)&&c||"":A.inputToValue=c&&r(c)&&c||""):1==a&&(m?m[1][m[0]]=b&&r(b)&&b||"":A.inputFromValue=b&&r(b)&&b||""))}function j(b){var c,d,e,f=w&&r(w),g=x&&r(x),h=n?n[1][n[0]]:A.inputToValue,i=A.rules,j={};if(b){for(var m=0,o=["defaultDate","minDate","maxDate"];m<o.length;m++)y[m]&&(j[o[m]]=l(y[m],b));if(c=j.minDate,d=j.maxDate,f=(c?c.getTime():-1)>(f?f.getTime():-1)?c:f,g=(d?d.getTime():Number.MAX_VALUE)>(g?g.getTime():Number.MAX_VALUE)?g:d,!h&&j.defaultDate&&(h=s(j.defaultDate)),f){var p=s(f);h||(h=p)}e=h&&r(h),e&&k(e,f,g)&&(h=p),n?n[1][n[0]]=h:A.inputToValue=h,f&&(i.toMinDate=a(f)),g&&(i.toMaxDate=a(g))}}function k(a,b,c){var d=a.getTime();return b&&d<b.getTime()?!0:c&&d>c.getTime()?!0:!1}function l(a,b){var c,d,e,f,g=/([+-])?(\d+)([MDY])?/g;return a=(a||"").toString(),e=g.exec(a),f=e&&(e[1]||"+")+(e[3]||"D"),c=b?b:new Date,d=new Date("string"==typeof c?r(c):c),f&&B[f]&&B[f](d,1*e[2]),d}var m,n,o,p,q=f.coupledatepickerOptions,r="function"==typeof q.parseDate&&q.parseDate.bind(q)||b.defaults.parseDate.bind(q),s="function"==typeof q.formatDate&&q.formatDate.bind(q)||b.defaults.formatDate.bind(q),t=q.duplex&&q.duplex.split(","),u=q.container,v=q.rules,w="",x="",y="";if(v&&"string"===c.type(v)){var z=c.getModel(v,g);v=z[1][z[0]]}v&&"object"===c.type(v)?(v=c.mix({},v.$model||v),v.toMinDate=v.toMinDate||"",v.toMaxDate=v.toMaxDate||"",v.fromMinDate=v.fromMinDate||"",v.fromMaxDate=v.fromMaxDate||""):v="",q.rules=v,w=v.toMinDate,x=v.toMaxDate,y=q.rules&&q.rules.rules||"",y=y.length>0?y.split(","):[],"string"==typeof u&&(u=u.split(","),u[0]=document.getElementById(u[0]),u[1]=document.getElementById(u[1])),u.length||(u=e.getElementsByTagName("div")),q.container=u=u.length?c.slice(u,0):u,q.template=h(q.getTemplate(d,q));var A=c.define(f.coupledatepickerId,function(a){c.mix(a,q),a.$skipArray=["widgetElement","container","calendarWrapper","template","changeMonthAndYear","startDay","fromLabel","toLabel","duplex"],a.widgetElement=e,a.fromSelectCal=function(a){A.rules&&A.rules.rules&&j(a)},a.getDates=function(){var a=m?m[1][m[0]]:A.inputFromValue,b=r(a),c=n?n[1][n[0]]:A.inputToValue,d=r(c);return b&&d&&[b,d]||null},a.$fromConfig={changeMonthAndYear:q.changeMonthAndYear,startDay:q.startDay,parseDate:r,formatDate:s,minDate:"rules.fromMinDate",maxDate:"rules.fromMaxDate",onSelect:a.fromSelectCal,calendarLabel:q.fromLabel,onInit:function(a){o=a,q.disabled&&(o.disabled=!0)}},a.$toConfig={changeMonthAndYear:q.changeMonthAndYear,startDay:q.startDay,parseDate:r,formatDate:s,minDate:"rules.toMinDate",maxDate:"rules.toMaxDate",calendarLabel:q.toLabel,onInit:function(a){p=a,q.disabled&&(p.disabled=!0)}},a.$init=function(){var a=q.template.split("MS_OPTION_TEMPLATE"),b=a[0],d=a[1],f=null,h=null,i=null,k=null,l=null,o=null,p="",s="",t=[A];c(e).addClass("oni-coupledatepicker"),m&&(s=m[1][m[0]],t.push(m[1])),n&&t.push(n[1]),j(s&&r(s)),u.length?(p=d,h=c.parseHTML(d),i=h.firstChild,k=h.lastChild,l=u[0],o=u[1],l.appendChild(i),o.appendChild(k),c(l).addClass("oni-coupledatepicker-item"),c(o).addClass("oni-coupledatepicker-item")):(p=b,f=c.parseHTML(p),e.appendChild(f)),c.scan(e,t.concat(g)),"function"==typeof q.onInit&&q.onInit.call(e,A,q,g)},a.$remove=function(){e.innerHTML=e.textContent=""}});A.$watch("disabled",function(a){o.disabled=a,p.disabled=a});var B={"+M":function(a,b){var c=a.getDate();a.setMonth(a.getMonth()+b),a.getDate()!==c&&a.setDate(0)},"-M":function(a,b){var c=a.getDate();a.setMonth(a.getMonth()-b),a.getDate()!==c&&a.setDate(0)},"+D":function(a,b){a.setDate(a.getDate()+b)},"-D":function(a,b){a.setDate(a.getDate()-b)},"+Y":function(a,b){a.setFullYear(a.getFullYear()+b)},"-Y":function(a,b){a.setFullYear(a.getFullYear()-b)}};return A};return b.version=1,b.defaults={container:[],fromLabel:"选择起始日期",toLabel:"选择结束日期",changeMonthAndYear:!1,widgetElement:"",disabled:!1,startDay:1,separator:"-",rules:"",parseDate:function(a){if("date"===c.type(a))return a;var b=this.separator,d="^(\\d{4})"+b+"(\\d{1,2})"+b+"(\\d{1,2})$";d=new RegExp(d);var e=a.match(d);return e?new Date(e[1],1*e[2]-1,e[3]):null},formatDate:function(a){if("date"!==c.type(a))return c.log("the type of "+a+"must be Date"),"";var b=this.separator,d=a.getFullYear(),e=a.getMonth(),f=a.getDate();return d+b+this.formatNum(e+1,2)+b+this.formatNum(f,2)},formatNum:function(a,b){a=String(a);for(var c=0,d=b-a.length;d>c;c++)a="0"+a;return a},getTemplate:function(a){return a}},c}()},{"../avalon.getModel":3,"./avalon.datepicker":9}],9:[function(a,b){var c=a("../avalon.getModel"),d=a("./avalon.datepicker.lang"),e='<div class="oni-datepicker"\r\n     ms-visible="toggle"\r\n     ms-class="oni-datepicker-multiple:numberOfMonths!==1">\r\n    <div class="oni-datepicker-wrapper" ms-css-position="_position">\r\n        <div class="oni-datepicker-content" >\r\n            <div class="oni-datepicker-label" ms-if="numberOfMonths===1">{{calendarLabel}}</div>\r\n            <i  class="oni-datepicker-prev oni-icon" \r\n                ms-if="numberOfMonths!==1" \r\n                ms-click="_prev(prevMonth, $event)"\r\n                ms-class="oni-datepicker-prev-disabled:!prevMonth" \r\n                style="left:15px;">&#xf053;</i>\r\n            <i  class="oni-datepicker-next oni-icon" \r\n                ms-if="numberOfMonths!==1" \r\n                ms-click="_next(nextMonth, $event)"\r\n                ms-class="oni-datepicker-next-disabled:!nextMonth" \r\n                style="right:15px;">&#xf054;</i>\r\n            <div class="oni-datepicker-content-content" \r\n                 ms-repeat-calendar="data" \r\n                 ms-visible="_datepickerToggle">\r\n                <div class="oni-datepicker-header" ms-if="numberOfMonths===1">\r\n                    <i class="oni-datepicker-prev oni-icon" \r\n                       ms-click="_prev(prevMonth, $event)"\r\n                       ms-class="oni-datepicker-prev-disabled:!prevMonth">&#xf053;</i>\r\n                    <i class="oni-datepicker-next oni-icon"    \r\n                       ms-click="_next(nextMonth, $event)"\r\n                       ms-class="oni-datepicker-next-disabled:!nextMonth">&#xf054;</i>\r\n                    <div class="oni-datepicker-title" ms-if="changeMonthAndYear">\r\n                        <select ms-each="years" data-each-rendered="_afterYearRendered">\r\n                            <option ms-attr-value="el">{{el}}</option>\r\n                        </select>&nbsp;年&nbsp;\r\n                        <select ms-each="months" data-each-rendered="_afterMonthRendered">\r\n                            <option ms-attr-value="{{el}}">{{el}}</option>\r\n                        </select>&nbsp;月\r\n                    </div>\r\n                    <div class="oni-datepicker-title"\r\n                         ms-click="_selectMonths"\r\n                         ms-if="!changeMonthAndYear">\r\n                        <span ms-hover="oni-state-hover:mobileMonthAndYear">{{calendar.year}}年{{calendar.month+1}}月</span>\r\n                    </div> \r\n                </div>\r\n                <div class="oni-datepicker-header" ms-if="numberOfMonths!==1">\r\n                    <div class="oni-datepicker-title">\r\n                        <span ms-hover="oni-state-hover:mobileMonthAndYear">{{calendar.year}}年{{calendar.month+1}}月</span>\r\n                    </div> \r\n                </div>\r\n                <table class="oni-datepicker-calendar-week">\r\n                    <thead>\r\n                        <tr>\r\n                            <th ms-repeat="weekNames"\r\n                                ms-class="{{_setWeekClass(el)}}">{{el}}\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                </table>\r\n                <table class="oni-datepicker-calendar-days">\r\n                    <tbody>\r\n                        <tr ms-repeat-days="calendar.rows">\r\n                            <td class="oni-datepicker-default"\r\n                                ms-repeat-item="days"\r\n                                ms-class="{{_setDayClass($index, $outer.$index, $outer.$outer.$index, item)}}"\r\n                                ms-hover="{{_setHoverClass($index, $outer.$index, $outer.$outer.$index, item)}}"\r\n                                ms-click="_selectDate($index, $outer.$index, $outer.$outer.$index, $event)"\r\n                                ms-html="_dateCellRender($outer.$index, $index, $outer.$outer.$index, item)"\r\n                                ></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <div class="oni-datepicker-timer" ms-if="timer">\r\n                    <label>\r\n                        <span>时间</span>\r\n                        <b>{{hour|timer}}</b>&nbsp;:\r\n                        <b>{{minute|timer}}</b>\r\n                    </label>\r\n                    <p>\r\n                        <span>时</span>\r\n                        <input ms-widget="slider, $, sliderHourOpts" data-slider-max="23" data-slider-min="0" data-slider-value="hour" data-slider-width="140">\r\n                    </p>\r\n                    <p>\r\n                        <span>分</span>\r\n                        <input ms-widget="slider, $, sliderMinuteOpts" data-slider-max="59" data-slider-min="0" data-slider-width="140" data-slider-value="minute">\r\n                    </p>\r\n                </div>\r\n                <div class="oni-datepicker-timer oni-helper-clearfix" ms-if="timer">\r\n                    <button type="button" class="oni-btn oni-btn-small" style="float: left" ms-click="_getNow">现在</button>\r\n                    <button type="button" class="oni-btn oni-btn-primary oni-btn-small" style="float:right" ms-click="_selectTime">确定</button>\r\n                </div>\r\n                <div class="oni-datepicker-watermark" ms-if="watermark">\r\n                    {{calendar.month+1}}\r\n                </div>\r\n            </div>\r\n            <div class="oni-datepicker-content-content oni-datepicker-month-year" ms-if="mobileMonthAndYear" ms-visible="_monthToggle">\r\n                <table>\r\n                    <thead>\r\n                        <tr class="oni-datepicker-title">\r\n                            <th class="prev" style="visibility: visible;text-align:left">\r\n                                <i class="oni-datepicker-prev oni-icon" \r\n                                   ms-click="_prevYear(mobileYear)"\r\n                                   ms-class="oni-datepicker-prev-disabled:mobileYear===years[0]">&#xf053;</i>\r\n                            </th>\r\n                            <th style="text-align:center" \r\n                                ms-click="_selectYears" \r\n                                ms-hover="oni-state-hover:mobileMonthAndYear">{{mobileYear}}</th>\r\n                            <th class="next" style="visibility: visible;text-align:right">\r\n                                <i class="oni-datepicker-next oni-icon" \r\n                                   ms-click="_nextYear(mobileYear)"\r\n                                   ms-class="oni-datepicker-prev-disabled:mobileYear===years[years.length-1]">&#xf054;</i>\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td colspan="3" style="padding:0px">\r\n                                <span ms-repeat-m="months" \r\n                                      ms-class="oni-datepicker-selected: (m-1)===elementMonth && mobileYear===elementYear"\r\n                                      ms-click="_selectDates(m-1)"\r\n                                      ms-hover="oni-datepicker-day-hover">{{m}}月</span>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tfoot>\r\n                        <tr>\r\n                            <th colspan="3" class="today" style="display: none;">Today</th>\r\n                        </tr>\r\n                        <tr>\r\n                            <th colspan="3" class="clear" style="display: none;">Clear</th>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n            </div>\r\n\r\n            <div class="oni-datepicker-content-content oni-datepicker-month-year" ms-if="mobileMonthAndYear" ms-visible="_yearToggle">\r\n                <table>\r\n                    <thead>\r\n                        <tr class="oni-datepicker-title">\r\n                            <th class="prev" style="visibility: visible;text-align:left">\r\n                                <i class="oni-datepicker-prev oni-icon" \r\n                                   ms-click="_prevYears" \r\n                                   ms-class="oni-datepicker-prev-disabled:_years[0]<=years[0]">&#xf053;</i>\r\n                            </th>\r\n                            <th style="text-align:center" \r\n                                ms-hover="oni-state-hover:mobileMonthAndYear">{{_years[0]}}-{{_years[9]}}\r\n                            </th>\r\n                            <th class="next" style="visibility: visible;text-align:right">\r\n                                <i class="oni-datepicker-next oni-icon" \r\n                                    ms-click="_nextYears"\r\n                                    ms-class="oni-datepicker-next-disabled:_years[_years.length-1]>=years[years.length-1]">&#xf054;</i>\r\n                            </th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td colspan="3" style="padding:0px">\r\n                                <span class="oni-datepicker-prev-year"\r\n                                      ms-class="{{_setMobileYearClass(_years[0]-1, elementYear, month, elementMonth)}}"\r\n                                      ms-click="_selectMonths($event, _years[0]-1)"\r\n                                      ms-hover="oni-datepicker-day-hover"\r\n                                >{{_years[0]-1}}</span>\r\n                                <span ms-repeat-y="_years" \r\n                                      ms-class="_setMobileYearClass(y, elementYear, month, elementMonth)"\r\n                                      ms-click="_selectMonths($event, y)"\r\n                                      ms-hover="oni-datepicker-day-hover"\r\n                                >{{y}}</span>\r\n                                <span class="oni-datepicker-next-year"\r\n                                      ms-class="{{_setMobileYearClass(_years[9]+1, elementYear, month, elementMonth)}}"\r\n                                      ms-click="_selectMonths($event, _years[9]+1)"\r\n                                      ms-hover="oni-datepicker-day-hover"\r\n                                >{{_years[9]+1}}</span>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tfoot>\r\n                        <tr>\r\n                            <th colspan="3" class="today" style="display: none;">Today</th></tr>\r\n\r\n                            <tr><th colspan="3" class="clear" style="display: none;">Clear</th>\r\n                        </tr>\r\n                    </tfoot>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';a("../dropdown/avalon.dropdown.js"),a("../slider/avalon.slider.js"),b.exports=function(){function a(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}function b(a){var b={},c=[];for(var d in a){var e=a[d],f=this.parseDate(d);f&&(e.date=f,c.push(e))}c.sort(function(a,b){return(a.dayIndex||0)-(b.dayIndex||0)});for(var d=0,g=c.length;g>d;d++){var e=c[d],f=e.date,h=e.beforeTime||0,i=e.afterTime||0;f.setDate(f.getDate()-h-1);for(var j=-e.beforeTime;i+1>j;j++)f.setDate(f.getDate()+1),b[f.getTime()]={text:e.holidayName+(0>j?"前"+-j+"天":j>0?"后"+j+"天":""),cellClass:0===j&&e.holidayClass||"",cellText:0===j&&e.holidayText||""}}return b}function f(b){if(b){var c=a(new Date).getTime(),d=b.getTime(),e=["日","一","二","三","四","五","六"];if(c==d)return{text:"今天",cellClass:"c_today",cellText:"今天"};if(c==d-i)return{text:"明天",cellClass:""};if(c==d-2*i)return{text:"后天",cellClass:""};var f=g&&g[b.getTime()];return f?f:{text:"周"+e[b.getDay()]}}}var g,h=e,i=864e5,j=1901,k=2050,l=c.ui.datepicker=function(e,i,l){function m(){var b=e.value,c=G(b),d=a(new Date),g=c,h=!1;b&&!c&&(D.tip="格式错误",D.dateError="#ff8888",g=d),D.allowBlank?b?c&&(h=o(c,D)):(D.tip="",g=d):b?c&&(h=o(c,D)):(b=H(d),D.tip=f(d).text,g=d,h=o(d,D)),h&&(g=D.minDate||D.maxDate,b=H(g)),C=g.getFullYear(),A=g.getMonth(),B=g.getDate(),M=b}function n(a){var b=P._years,c=(a+"").substr(0,3),d=[];if(!~b.indexOf(a)){for(var e=0;9>=e;e++)d.push(Number(c+e));P._years=d}}function o(a,b){var c=a.getTime(),d=b.minDate,e=b.maxDate;return d&&c<d.getTime()?!0:e&&c>e.getTime()?!0:!1}function p(b,d){c.bind(e,"focus",function(){P.toggle=!0}),c.bind(document,"click",function(a){var c=a.target;if("range"!==D.type)return b.contains(c)||d.contains(c)||!P.toggle||P.timer?P.toggle||P.disabled||!d.contains(c)?void 0:void(P.toggle=!0):void(P.toggle=!1)}),c.bind(e,"keydown",function(a){var b,c,d=a.keyCode;if(c=a.key)switch(c){case"-":b="-";break;case"/":b="/"}else switch(d){case 189:b="-";break;case 191:b="/"}return P.toggle||(P.toggle=!0),(48>d||d>57&&96>d||d>105)&&13!==d&&8!==d&&D.separator!==b&&27!==d&&9!==d&&37!==d&&39!==d&&46!==d?(a.preventDefault(),!1):void 0}),c.bind(e,"keyup",function(b){var c,d,g,h=e.value,i=P.year,j=P.month,k=b.keyCode;if(37===k||39===k)return!1;if(13===k||27==k||9==k)return P.toggle=!1,!1;if(g=G(h))c=g.getMonth(),d=g.getFullYear(),P.dateError="#cccccc",P.tip=f(a(g)).text,P.day=g.getDate(),j!=c&&i!=d?(K=!0,P.year=d,P.month=c):j!=c?P.month=c:P.year=d;else{if(P.allowBlank&&""==h)return P.tip="",void(P.dateError="#cccccc");P.tip="格式错误",P.dateError="#ff8888"}})}function q(a){var b,c=P.month,d=P.year,e=P.stepMonths,f=P.numberOfMonths,g=0,h=0;c="next"===a?c+e+f-1:c-e-f+1,b=new Date(d,c,1),g=b.getMonth(),h=b.getFullYear(),h!=P.year?(K=!0,P.year=h,P.month=g):P.month=g}function r(){for(var a=[],b=D.startDay,c=0,d=D.dayNames;7>c;c++){var e=(c+b)%7;a.push(d[e])}return a}function s(a,b,c,d,e,g,h,i){var j=!1,k=f(a),l=k&&k.cellText||i,m=a.getDay(),n=m%7==0||m%7==6,p=o(a,b);c&&c.getDate()===+i&&d===c.getMonth()&&e===c.getFullYear()&&(j=!0),g.push({day:i+"",_day:l+"",month:d,year:e,weekend:n,selected:j,dateDisabled:p}),h.push(l+"")}function t(a,b){var c,d,f,g=P.startDay,h=new Date(b,a,1),i=new Date(b,a,1-(h.getDay()-g+7)%7),j=P.showOtherMonths,k=G(e.value),l=P.minDate,m=P.maxDate,n=l?12*(b-l.getFullYear())+a-l.getMonth()>0:!0,o=m?12*(m.getFullYear()-b)+m.getMonth()-a>0:!0,p=[],q=[],r=[],t=[],u=[],v=[];P.prevMonth=n,P.nextMonth=o;for(var w=0,x=P.numberOfMonths;x>w;w++){for(var y=0;6>y;y++){u=[],v=[];for(var z=0;7>z;z++)d=i.getMonth(),c=i.getFullYear(),f=i.getDate(),c===b&&d===a?s(i,P,k,d,c,u,v,f):j&&0===y&&(b>c||a>d)?s(i,P,k,d,c,u,v,f):(v.push(""),u.push({day:"",month:!1,weekend:!1,selected:!1,dateDisabled:!0})),i=new Date(i.setDate(f+1));p.push(u),q.push(v)}r.push({year:b,month:a,rows:p}),t.push({year:b,month:a,rows:q}),a+=1,h=new Date(b,a,1),b=h.getFullYear(),a=h.getMonth(),i=new Date(b,a,1-(h.getDay()-g+7)%7),p=[],q=[]}L=r,P.data=t}function u(a,b,d,e,g,h,i,j,k,l){var m=!1,n=d&&d.getMonth(),p=d&&d.getFullYear(),q=f(a),r=q&&q.cellText||h,s=a.getDay(),t=s%7==0||s%7==6,u=o(a,b),v=L[j].rows[k][l],w=b.data[j].rows[k];r+="",h===+i&&e===n&&g===p&&(m=!0),v._day!=r||v.selected==m&&v.dateDisabled==u?v._day==r?c.mix(v,{month:e,year:g}):(c.mix(v,{day:h+"",_day:r,month:e,year:g,weekend:t,selected:m,dateDisabled:u}),w.set(l,r)):(c.mix(v,{month:e,year:g,selected:m,dateDisabled:u}),w.set(l,"").set(l,r))}function v(a,b,d){var f,g,h,i=P.startDay,j=new Date(b,a,1),k=new Date(b,a,1-(j.getDay()-i+7)%7),l=P.showOtherMonths,m=G(e.value),n=P.minDate,o=P.maxDate,p=n?12*(b-n.getFullYear())+a-n.getMonth()>0:!0,q=o?12*(o.getFullYear()-b)+o.getMonth()-a>0:!0;P.prevMonth=p,P.nextMonth=q;for(var r=0,s=P.numberOfMonths;s>r;r++){P.data[r].year=b,P.data[r].month=a,L[r].year=b,L[r].month=a;for(var t=0;6>t;t++)for(var v=0;7>v;v++)g=k.getMonth(),f=k.getFullYear(),h=k.getDate(),f===b&&g===a?u(k,P,m,g,f,h,d,r,t,v):l&&0===t&&(b>f||a>g)?u(k,P,m,g,f,h,d,r,t,v):(P.data[r].rows[t].set(v,""),c.mix(L[r].rows[t][v],{day:"",_day:"",month:!1,weekend:!1,selected:!1,dateDisabled:!0})),k=new Date(k.setDate(h+1));a+=1,j=new Date(b,a,1),b=j.getFullYear(),a=j.getMonth(),k=new Date(b,a,1-(j.getDay()-i+7)%7)}}function w(a){return"string"==typeof a?G(a):a}var x,y,z,A,B,C,D=i.datepickerOptions,E=e.msData["ms-duplex"],F=E&&c.getModel(E,l),G=D.parseDate,H=D.formatDate,I=D.minDate,J=D.maxDate,K=!1,L=[],M="",N=[];if(h=D.template=D.getTemplate(h,D),g=b.call(D,d)||{},c.scan(e,l),D.disabled=e.disabled||D.disabled,H=H.bind(D),G=G.bind(D),I=null!==I&&w(I),J=null!==J&&w(J),D.minDate&&!I&&(x=c.getModel(D.minDate,l),x&&(I=w(x[1][x[0]]))),I=D.minDate=I&&a(I),D.maxDate&&!J&&(y=c.getModel(D.maxDate,l),y&&(J=w(y[1][y[0]]))),J=D.maxDate=J&&a(J),I?j=I.getFullYear():0,J?k=J.getFullYear():0,"array"===c.type(D.years))N=D.years;else for(var O=j;k>=O;O++)N.push(O);D.mobileMonthAndYear&&(D.mobileYear=0),D.changeMonthAndYear&&(D.mobileMonthAndYear=!1),m();var P=c.define(i.datepickerId,function(b){c.mix(b,D),b.$skipArray=["container","showDatepickerAlways","timer","sliderMinuteOpts","sliderHourOpts","template","widgetElement","dayNames","allowBlank","months","years","numberOfMonths","showOtherMonths","watermark","weekNames","stepMonths","changeMonthAndYear","startDay","mobileMonthAndYear"],b.dateError=b.dateError||"",b.weekNames=[],b.tip=b.tip||"",b.widgetElement=e,b.data=[],b.prevMonth=-1,b.nextMonth=-1,b.month=A,b._month=A+1,b.year=C,b.day=B,b.years=N,b.months=[1,2,3,4,5,6,7,8,9,10,11,12],b._position="absolute",b.minute=0,b.hour=0,b._datepickerToggle=!0,b._monthToggle=!1,b._yearToggle=!1,b._years=[2010,2011,2012,2013,2014,2015,2016,2017,2018,2019],b.elementYear=C,b.elementMonth=A,b._setWeekClass=function(a){var b=P.dayNames;return b.indexOf(a)%7==0||b.indexOf(a)%7==6?"oni-datepicker-week-end":""},b._setDayClass=function(a,b,c,d){var e="",f={};return""===d?"":(f=L[c].rows[b][a],f.weekend&&(e+=" oni-datepicker-week-end"),f.month||(e+=" oni-datepicker-day-none"),f.selected&&(e+=" oni-datepicker-selected"),f.dateDisabled&&(e+=" oni-state-disabled"),e.trim())},b._setHoverClass=function(a,b,c,d){var e="",f={};return""===d?"":(f=L[c].rows[b][a],e="oni-datepicker-day-hover")},b._setMobileYearClass=function(a,b,c,d){var e="";return a===b&&c===d&&(e+=" oni-datepicker-selected"),P.mobileYearDisabled(a)&&(e+=" oni-state-disabled"),e},b.sliderMinuteOpts={onInit:function(a){a.$watch("value",function(a){P.minute=a}),P.$watch("minute",function(b){a.value=b})}},b.sliderHourOpts={onInit:function(a){a.$watch("value",function(a){P.hour=a}),P.$watch("hour",function(b){a.value=b})}},b.$yearVmId=b.$id+"year",b.$monthVmId=b.$id+"month",b.$yearOpts={width:60,listWidth:60,height:160,position:!1,listClass:"oni-datepicker-dropdown",onSelect:function(a){a.stopPropagation()}},b.$monthOpts={width:45,height:160,listWidth:45,position:!1,listClass:"oni-datepicker-dropdown",onSelect:function(a){a.stopPropagation()}},b._selectDates=function(a){P.mobileMonthAndYear&&(P._monthToggle=!1,P._yearToggle=!1,P._datepickerToggle=!0,K=!0,P.year=P.mobileYear,P.month=a)},b._selectMonths=function(a,b){if(P.mobileMonthAndYear){if(b){if(P.mobileYearDisabled(b))return;P.mobileYear=b}else P.mobileYear=P.year;P._monthToggle=!0,P._yearToggle=!1,P._datepickerToggle=!1}},b._selectYears=function(){P.mobileMonthAndYear&&(P._monthToggle=!1,P._yearToggle=!0,P._datepickerToggle=!1)},b._getNow=function(){var a=new Date,b=a.toTimeString(),c=b.substr(0,b.lastIndexOf(":"));return P.hour=a.getHours(),P.minute=a.getMinutes(),c},b._dateCellRender=function(a,b,c,d){if(P.dateCellRender){var e=L[c].rows[a][b];return""===d?d:P.dateCellRender(d,P,e)}return d},b._selectTime=function(a){var b=c.filters.timer,d=b(P.hour),f=b(P.minute),g=d+":"+f,h=H(G(e.value));
a.stopPropagation(),e.value=h+" "+g,P.showDatepickerAlways||(P.toggle=!1),D.onSelectTime&&"function"===c.type(D.onSelectTime)&&D.onSelectTime.call(P,P)},b._selectYearMonth=function(a){a.stopPropagation()},b._prev=function(a,b){return a?(q("prev"),void b.stopPropagation()):!1},b._next=function(a,b){return a?(q("next"),void b.stopPropagation()):!1},b._prevYear=function(a){a!==P.years[0]&&(P.mobileYear=P.mobileYear-1)},b._nextYear=function(a){a!==P.years[P.years.length-1]&&(P.mobileYear=P.mobileYear+1)},b._prevYears=function(){P._years[0]<=P.years[0]||n(P._years[0]-1)},b._nextYears=function(){var a=P._years,b=P.years;a[a.length-1]>=b[b.length-1]||n(a[9]+1)},b.mobileYearDisabled=function(a){var b=P.years;return a<b[0]||a>b[b.length-1]?!0:!1},b.getRawValue=function(){return e.value},b.getDate=function(){var a=P.getRawValue();return G(a)},b._afterYearRendered=function(){this.setAttribute("ms-widget",["dropdown",b.$yearVmId,"$yearOpts"].join(",")),this.setAttribute("ms-duplex","year"),c.scan(this,P)},b._afterMonthRendered=function(){this.setAttribute("ms-widget",["dropdown",b.$monthVmId,"$monthOpts"].join(",")),this.setAttribute("ms-duplex","_month"),c.scan(this,P)},b._selectDate=function(b,d,g,h){var i=c.filters.timer,j=P.month,k=P.year,l=L[g].rows[d][b],m=l.year,n=l.month,o=+l.day,p=l.dateDisabled;if(h.stopPropagation(),h.preventDefault(),n!==!1&&!p&&!P.showDatepickerAlways){var q=new Date(m,n,o),r=H(q),s="range"===D.type?e["data-calenderwrapper"]:null;P.tip=f(a(q)).text,P.dateError="#cccccc",s||P.timer?(P.timer&&(r=r+" "+i(P.hour)+":"+i(P.minute)),e.value=r):(e.value=r,P.toggle=!1),n===j&&m===k&&P.day==o?P.$fire("day",o):P.day=o,n!==j&&m!==k?(K=!0,P.year=m,P.month=n):n!==j?P.month=n:m!==k&&(P.year=m)}if(!P.showDatepickerAlways&&!F){if("string"==typeof P.onSelect)return void c.log("onSelect 回调必须是个function！");P.onSelect.call(null,r,P,c(e).data())}},b.$init=function(){var a=e.parentNode;if(z=c.parseHTML(h).firstChild,a.insertBefore(z,e),a.insertBefore(e,z),c(e).attr("ms-css-width","width"),P.weekNames=r(),"INPUT"===e.tagName&&"range"!==P.type){var b=document.createElement("div");if(b.className="oni-datepicker-input-wrapper",b.setAttribute("ms-class","oni-datepicker-active:toggle"),b.setAttribute("ms-css-border-color","dateError"),b.setAttribute("ms-hover","oni-state-hover"),a.insertBefore(b,e),b.appendChild(e),P.showTip){var d=c.parseHTML("<div class='oni-datepicker-tip'>{{tip}}<i class='oni-icon oni-icon-calendar-o'>&#xf133;</i></div>");b.appendChild(d)}else e.style.paddingRight="0px";b.appendChild(z)}P.timer&&(P.width=100,M&&w(M)&&(M=M+" "+P._getNow())),e.value=M,e.disabled=P.disabled,P.showDatepickerAlways?(e.style.display="none",P.toggle=!0,P._position="relative",b.style.borderWidth=0):p(z,b),"range"===D.type?(b=e["data-calenderwrapper"],P._position="static"):c.scan(b,[P]),c.scan(z,[P].concat(l)),setTimeout(function(){t(P.month,P.year)},10),"function"==typeof D.onInit&&D.onInit.call(e,P,D,l)},b.$remove=function(){var a=e.parentNode,b=a.parentNode,c=z.parentNode;z.innerHTML=z.textContent="",c.removeChild(z),b.removeChild(a)}});return f=f.bind(P),P.$watch("toggle",function(a){var b=e.value,d=G(b),f=d&&d.getFullYear(),g=d&&d.getMonth();if(a)P.elementMonth=g||-1,P.elementYear=f||-1;else{if(P.year!=f&&P.month!=g)if(d)K=!0,P.year=f,P.month=g;else{K=!0;var h=new Date,i=h.getFullYear(),j=h.getMonth();P.year==i&&P.month==j?v(P.month,P.year,P.day):P.year==i?P.month=j:P.month==j?P.year=i:(K=!0,P.year=i,P.month=j)}else P.year!=f?P.year=f:P.month!=g&&(P.month=g);c.vmodels[P.$yearVmId]&&(c.vmodels[P.$yearVmId].toggle=!1),c.vmodels[P.$monthVmId]&&(c.vmodels[P.$monthVmId].toggle=!1),P.onClose(new Date(P.year,P.month,P.day),P)}}),P.$watch("year",function(a){P.mobileMonthAndYear&&n(a),K?K=!1:v(P.month,a,P.day),P.onChangeMonthYear(a,P.month+1,P)}),P.changeMonthAndYear&&P.$watch("_month",function(a){P.month=a-1}),P.$watch("month",function(a){P._month=a+1,v(a,P.year,P.day),P.onChangeMonthYear(P.year,a,P)}),P.$watch("day",function(a){for(var b=L,c=P.month,d=P.year,e=!1,f=0,g=b.length;g>f;f++){var h=b[f];if(h.year==d&&h.month==c)for(var i=h.rows,j=0,k=i.length;k>j;j++)for(var l=i[j],m=0,n=l.length;n>m;m++){var o=l[m],p=o.day;p==a&&o.month==c&&o.year==d?(o.selected=!0,P.data[f].rows[j].set(m,"").set(m,o._day)):o.selected&&(o.selected=!1,P.data[f].rows[j].set(m,"").set(m,o._day))}else for(var j=0,k=i.length;k>j;j++){for(var l=i[j],m=0,n=l.length;n>m;m++){{l[m]}if(o.selected){o.selected=!1,P.data[f].rows[j].set(m,"").set(m,o._day),e=!0;break}}if(e)break}if(e)break}}),P.$watch("disabled",function(a){e.disabled=a}),P.$watch("minDate",function(b){var c=w(b);P.minDate=c?a(c):"",v(P.month,P.year,P.day)}),P.$watch("maxDate",function(b){var c=w(b);P.maxDate=c?a(c):"",v(P.month,P.year,P.day)}),F&&F[1].$watch(F[0],function(b){var d,g,h;if(h=G(b)){if(d=h.getFullYear(),g=h.getMonth(),P.day=h.getDate(),g!==P.month&&d!==P.year?(K=!0,P.year=d,P.month=g):d!==P.year?P.year=d:g!==P.month&&(P.month=g),P.dateError="#cccccc",P.tip=f(a(h)).text,"string"==typeof P.onSelect)return void c.log("onSelect 回调必须是个function！");P.onSelect.call(null,h,P,c(e).data())}else P.allowBlank?P.tip="":(P.tip="格式错误",P.dateError="#ff8888")}),x&&x[1].$watch(x[0],function(a){P.minDate=a}),y&&y[1].$watch(y[0],function(a){P.maxDate=a}),P};return l.version=1,l.defaults={dayNames:["日","一","二","三","四","五","六"],startDay:1,width:90,showTip:!0,disabled:!1,changeMonthAndYear:!1,mobileMonthAndYear:!1,showOtherMonths:!1,numberOfMonths:1,allowBlank:!1,minDate:null,maxDate:null,stepMonths:1,toggle:!1,separator:"-",calendarLabel:"选择日期",onChangeMonthYear:c.noop,dateCellRender:!1,watermark:!0,zIndex:-1,showDatepickerAlways:!1,timer:!1,onSelect:c.noop,onClose:c.noop,onSelectTime:c.noop,parseDate:function(a){if(!a)return null;if("date"===c.type(a))return a;var b=this.separator,d="^(\\d{4})"+b+"(\\d{1,2})"+b+"(\\d{1,2})[\\s\\w\\W]*$";d=new RegExp(d);var e=a.match(d);return e?new Date(e[1],1*e[2]-1,e[3]):null},formatDate:function(a){if("date"!==c.type(a))return c.log("the type of "+a+"must be Date"),"";var b=this.separator,d=a.getFullYear(),e=a.getMonth(),f=a.getDate();return d+b+this.formatNum(e+1,2)+b+this.formatNum(f,2)},formatNum:function(a,b){a=String(a);for(var c=0,d=b-a.length;d>c;c++)a="0"+a;return a},widgetElement:"",getTemplate:function(a){return a}},c.filters.timer=function(a){var b=+a;return b>=0&&9>=b&&(a="0"+a),a},c}()},{"../avalon.getModel":3,"../dropdown/avalon.dropdown.js":15,"../slider/avalon.slider.js":32,"./avalon.datepicker.lang":10}],10:[function(a,b){b.exports=function(){var a={"元旦节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_yuandan",holidayText:"元旦"},"除夕":{afterTime:0,beforeTime:0,dayIndex:0,holidayClass:"c_chuxi",holidayText:"除夕"},"春节":{afterTime:0,beforeTime:0,dayIndex:0,holidayClass:"c_chunjie",holidayText:"春节"},"元宵节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_yuanxiao",holidayText:"元宵"},"清明节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_qingming",holidayText:"清明"},"劳动节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_wuyi",holidayText:"劳动"},"端午节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_duanwu",holidayText:"端午"},"中秋节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_zhongqiu",holidayText:"中秋"},"国庆节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_guoqing",holidayText:"国庆"},"圣诞节":{afterTime:3,beforeTime:3,dayIndex:0,holidayClass:"c_shengdan",holidayText:"圣诞"}},b={"2014-01-01":{holidayName:"元旦节"},"2014-01-30":{holidayName:"除夕"},"2014-01-31":{holidayName:"春节"},"2014-02-01":{holidayName:"正月初二"},"2014-02-02":{holidayName:"正月初三"},"2014-02-14":{holidayName:"元宵节"},"2014-04-05":{holidayName:"清明节"},"2014-05-01":{holidayName:"劳动节"},"2014-06-01":{holidayName:"儿童节"},"2014-06-02":{holidayName:"端午节"},"2014-09-08":{holidayName:"中秋节"},"2014-09-10":{holidayName:"教师节"},"2014-10-01":{holidayName:"国庆节"},"2014-12-25":{holidayName:"圣诞节"},"2015-01-01":{holidayName:"元旦节"},"2015-02-18":{holidayName:"除夕"},"2015-02-19":{holidayName:"春节"},"2015-02-20":{holidayName:"正月初二"},"2015-02-21":{holidayName:"正月初三"},"2015-03-05":{holidayName:"元宵节"},"2015-04-05":{holidayName:"清明节"},"2015-05-01":{holidayName:"劳动节"},"2015-06-01":{holidayName:"儿童节"},"2015-06-20":{holidayName:"端午节"},"2015-09-27":{holidayName:"中秋节"},"2015-10-01":{holidayName:"国庆节"},"2015-12-25":{holidayName:"圣诞节"}};for(var c in b)if(b.hasOwnProperty(c)){var d=b[c],e=d.holidayName;if(e&&a[e]){var f=a[e];for(var g in f)!f.hasOwnProperty(g)||g in d||(d[g]=f[g])}}return b}()},{}],11:[function(a,b){var c=a("../avalon.getModel"),d='<div class="oni-daterangepicker"\r\n     ms-css-width="dateRangeWidth">\r\n    <div class="oni-datepicker-range-input" \r\n        ms-click="_toggleDatepicker(toggle, $event)"\r\n        ms-class="oni-state-active:toggle"\r\n        ms-hover="oni-state-hover"\r\n        >\r\n        <div class="oni-datepicker-input js-input"\r\n             ms-class="oni-datepicker-input-disabled: disabled">{{label|html}}</div>\r\n        <div class="oni-datepicker-icon-wrap">\r\n            <i class="oni-datepicker-icon oni-icon oni-icon-angle-up" ms-visible="toggle">&#xf106;</i>\r\n            <i class="oni-datepicker-icon oni-icon oni-icon-angle-down" ms-visible="!toggle">&#xf107;</i>\r\n        </div>\r\n    </div>\r\n    <div class="oni-daterangepicker-content">\r\n        <div class="oni-datepicker-groups" \r\n            ms-visible="toggle"\r\n            ms-click="_updateMsg">\r\n            <div class="oni-daterangepicker-quick-operation" ms-if="shortcut">\r\n                <span ms-click="quickOperation(\'today\')">今天</span>\r\n                <span ms-click="quickOperation(\'lastDay\')">昨天</span>\r\n                <span ms-click="quickOperation(\'lastSeventDays\')">过去七天</span>\r\n                <span ms-click="quickOperation(\'currentMonth\')">本月</span>\r\n                <span ms-click="quickOperation(\'lastMonth\')">上个月</span>\r\n            </div>\r\n            <div class="oni-datepicker-group-first oni-datepicker-group">\r\n                <input style="display:none" \r\n                       ms-data-container="container"\r\n                       ms-data-input="inputElement"\r\n                       ms-data-calenderwrapper="calendarWrapper"/>\r\n            </div>\r\n            <div class="oni-datepicker-group-second oni-datepicker-group">\r\n                <input style="display:none" \r\n                       ms-data-container="container"\r\n                       ms-data-input="inputElement"\r\n                       ms-data-calenderwrapper="calendarWrapper"/>\r\n            </div>\r\n            <div class="oni-calendarbox-footer oni-calendarbox-footer-small oni-helper-clearfix">\r\n                <div class="oni-calendarbox-msg js-msg">{{msg|html}}</div>\r\n                <div class="oni-calendarbox-btns">\r\n                    <button type="button" ms-widget="button" data-button-color="success" data-button-size="small" class="oni-btn"\r\n                            ms-hover="oni-state-hover"\r\n                            ms-click="_selectDate">确定</button>\r\n                    <button type="button" ms-widget="button" class="oni-btn" data-button-size="small"\r\n                    ms-click="_cancelSelectDate">取消</button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';a("../button/avalon.button"),a("./avalon.datepicker"),b.exports=function(){function a(a){return a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0),a}var b=d,e=c.ui.daterangepicker=function(d,f,g){function h(){if(y){var a=y.length,b=c.getModel(y[0].trim(),g),d=1===a?null:c.getModel(y[1].trim(),g),e=b&&b[1][b[0]]||"",f=d?d[1][d[0]]:"";q=b,r=d,i(a,e,f,!0),q&&q[1].$watch(q[0],function(){n()}),r&&r[1].$watch(r[0],function(){n()})}q||(u.inputFromValue=""),r||(u.inputToValue="")}function i(a,b,d,e){var f="",g="",h=H?H:u;a&&(2==a?(f="date"===c.type(b)?x(b):b&&w(b)&&b||"",g="date"===c.type(d)?x(d):e?d?d:"":d&&w(d)&&d||"",q?q[1][q[0]]=f:h.inputFromValue=f,r?r[1][r[0]]=g:h.inputToValue=g,h.label=v(h.defaultLabel,f,g)):1==a&&(f="date"===c.type(b)?x(b):b&&w(b)&&b||"",q?q[1][q[0]]=f:h.inputFromValue=f),g=g||(r?r[1][r[0]]:h.inputToValue),f||g||(h.label="不限日期"))}function j(b){var c,e,f,g,h,i,j,n=E&&w(E),o=F&&w(F),p=q?q[1][q[0]]:H.inputFromValue,s=r?r[1][r[0]]:H.inputToValue,y=H.rules,z={};if(!b)return void(d.init?(m(),d.init=!1):(y.toMinDate=n||"",y.toMaxDate=o||""));for(var A=0,B=["defaultDate","minDate","maxDate"];A<B.length;A++)t[A]&&(z[B[A]]=l(t[A],b));c=z.minDate,e=z.maxDate,n=(c?c.getTime():-1)>(n?n.getTime():-1)?c:n,o=(e?e.getTime():Number.MAX_VALUE)>(o?o.getTime():Number.MAX_VALUE)?o:e,d.init&&(f=w(p),g=r&&r[1][r[0]]||"",h=w(g),f&&g&&!h&&(s=x(z.defaultDate))),n&&(i=x(n),s||d.init||(s=i)),j=s&&w(s),j&&k(j,n,o)&&(s=i),r?r[1][r[0]]=s:H.inputToValue=s,n&&(y.toMinDate=a(n)),o&&(y.toMaxDate=a(o)),d.init&&(m(),H.label=v(u.defaultLabel,p,s),d.init=!1)}function k(a,b,c){var d=a.getTime();return b&&d<b.getTime()?!0:c&&d>c.getTime()?!0:!1}function l(a,b){var c,d,e,f,g=/([+-])?(\d+)([MDY])?/g;return a=(a||"").toString(),d=g.exec(a),e=d&&(d[1]||"+")+(d[3]||"D"),c=b?b:new Date,f=new Date("string"==typeof c?w(c):c),e&&I[e]&&I[e](f,1*d[2]),f}function m(){var a=q?q[1][q[0]]:H.inputFromValue,b=r?r[1][r[0]]:H.inputToValue;s=[w(a),w(b)],H.label&&n()}function n(){var a=q?q[1][q[0]]:H.inputFromValue,b=r?r[1][r[0]]:H.inputToValue,c=w(b),d=u.opts&&u.opts.msgFormat,e=null,f="",g=0;b&&!c&&(r?r[1][r[0]]="":H.inputToValue=""),b&&(a||B)?(e=w(a)||B,g=Math.floor((c.getTime()-e.getTime())/1e3/60/60/24+1),d&&"function"==typeof d?C&&D&&(f=d(C,D)):f="已选时间段："+a+" 至 "+b+" 共计"+g+"天"):f="",H.msg=f,B?B=null:0}var o,p,q,r,s,t,u=f.daterangepickerOptions,v=u.opts&&u.opts.datesDisplayFormat,w="function"==typeof u.parseDate&&u.parseDate.bind(u)||e.defaults.parseDate.bind(u),x="function"==typeof u.formatDate&&u.formatDate.bind(u)||e.defaults.formatDate.bind(u),y=u.duplex&&u.duplex.split(","),z=!1,A=u.rules,B=null,C=null,D=null,E="",F="";if(v&&"function"==typeof v&&(u.datesDisplayFormat=v),v=u.datesDisplayFormat,A&&"string"===c.type(A)){var G=c.getModel(A,g);A=G[1][G[0]]}A&&"object"===c.type(A)?(A=c.mix({},A.$model||A),A.toMinDate=A.toMinDate||"",A.toMaxDate=A.toMaxDate||"",A.fromMinDate=A.fromMinDate||"",A.fromMaxDate=A.fromMaxDate||""):A="",u.rules=A,E=A.toMinDate,F=A.toMaxDate,t=u.rules&&u.rules.rules||"",t=t.length>0?t.split(","):[],u.template=u.getTemplate(b,u),h();var H=c.define(f.daterangepickerId,function(a){c.mix(a,u),a.msg="",a.$skipArray=["widgetElement","container","inputElement","calendarWrapper","fromLabel","toLabel","duplex"],a.widgetElement=d,a.toggle=!1,a.container=null,a.inputElement=null,a.calendarWrapper=null,a._toggleDatepicker=function(a){H.disabled||(H.toggle=!a)},a._updateMsg=function(a){a.stopPropagation()},a._selectDate=function(){var a=o.value,b=p.value,e=w(a),f=w(b),g=v(u.defaultLabel,a,b),h=document.createElement("p"),i=c(h),j=0,k="";return f&&e?(H.label=g,z=!0,s=[e,f],H.toggle=!1,i.css({position:"absolute",visibility:"hidden",height:0,"font-size":"12px"}),h.innerHTML=g,document.body.appendChild(h),j=i.width()+30,document.body.removeChild(h),j>H.dateRangeWidth&&(H.dateRangeWidth=j),void u.onSelect.call(H,e,f,s,H,c(d).data())):(k=e||f?e?"请选择结束日期":"请选择起始日期":"请选择起始日期和结束日期",k="<span style='color:#f55'>"+k+"</span>",H.msg=k,!1)},a._cancelSelectDate=function(){B=!1,H.toggle?H.toggle=!1:0},a.getDates=function(){var a=q?q[1][q[0]]:H.inputFromValue,b=w(a),c=r?r[1][r[0]]:H.inputToValue,d=w(c);return b&&d&&[b,d]||null},a.setDates=function(a,b,e){var f=void 0===b?[a]:[a,b],g=f.length,h="date"===c.type(a)?a:w(a),j="date"===c.type(b)?b:w(b);g?(H.defaultLabel=e||H.defaultLabel,i(g,a,b)):H.label="",m(),u.onSelect.call(H,h,j,s,H,c(d).data()),s=[h,j]},a._fixDate=function(a,b,c,d){var e=new Date(a.getTime()),f=new Date(b.getTime());return c&&(e=new Date(Math.max(c.getTime(),e))),d&&(f=new Date(Math.min(d.getTime(),f))),[e,f]},a.quickOperation=function(a){var b=new Date,c=b,d=b,e="今天",f=H.rules.fromMinDate,g=H.rules.toMaxDate,h=[];switch(f=f&&w(f)||null,g=f&&w(g)||null,a){case"lastDay":c=d=new Date(b.setDate(b.getDate()-1)),e="昨天";break;case"lastSeventDays":c=new Date,c=new Date(c.setDate(c.getDate()-8)),d=new Date,d=new Date(d.setDate(d.getDate()-1)),e="过去七天",h=H._fixDate(c,d,f,g),c=h[0],d=h[1];break;case"currentMonth":e="本月",c=new Date,c=new Date(c.setDate(1)),h=H._fixDate(c,d,f,g),c=h[0],d=h[1];break;case"lastMonth":e="上个月",d=new Date,d=new Date(d.setDate(-1)),c=new Date(new Date(d.getTime()).setDate(1)),h=H._fixDate(c,d,f,g),c=h[0],d=h[1]}H.setDates(c,d,e),H.toggle=!1},a.setLabel=function(a){H.label=a},a.setDisabled=function(a){H.disabled=a},a.fromSelectCal=function(a){H.rules&&H.rules.rules&&j(a),B=a},a.$fromConfig={type:"range",allowBlank:!0,parseDate:w,formatDate:x,onSelect:a.fromSelectCal,minDate:"rules.fromMinDate",maxDate:"rules.fromMaxDate",startDay:u.startDay,calendarLabel:u.fromLabel,onInit:function(a){C=a}},a.$toConfig={type:"range",allowBlank:!0,parseDate:w,formatDate:x,minDate:"rules.toMinDate",maxDate:"rules.toMaxDate",startDay:u.startDay,calendarLabel:u.toLabel,onInit:function(a){D=a}},a.$init=function(){var a,b,e,f,h="";a=c.parseHTML(u.template).firstChild,f=a.getElementsByTagName("input"),e=a.children[0],b=a.children[1],o=f[0],p=f[1],H.container=e,H.inputElement=e,H.calendarWrapper=b,d.appendChild(a),c.bind(document,"click",function(a){var b=a.target;d.contains(b)||(H.toggle=!1)}),d.init=!0,q&&(h=q[1][q[0]]),j(h&&w(h)),c.scan(d,[H].concat(g)),c.nextTick(function(){var a=q?q[0].trim():"inputFromValue",b=r?r[0].trim():"inputToValue",e=q?[H,q[1]]:[H],f=r?[H,r[1]]:[H];o.setAttribute("ms-widget","datepicker, $, $fromConfig"),p.setAttribute("ms-widget","datepicker, $, $toConfig"),o.setAttribute("ms-duplex",a),p.setAttribute("ms-duplex",b),c.scan(o,e.concat(g)),c.scan(p,f.concat(g)),"function"==typeof u.onInit&&u.onInit.call(d,H,u,g)})},a.$remove=function(){d.innerHTML=d.textContent=""}});q||H.$watch("inputFromValue",function(){n()}),r||H.$watch("inputToValue",function(){n()});var I={"+M":function(a,b){var c=a.getDate();a.setMonth(a.getMonth()+b),a.getDate()!==c&&a.setDate(0)},"-M":function(a,b){var c=a.getDate();a.setMonth(a.getMonth()-b),a.getDate()!==c&&a.setDate(0)},"+D":function(a,b){a.setDate(a.getDate()+b)},"-D":function(a,b){a.setDate(a.getDate()-b)},"+Y":function(a,b){a.setFullYear(a.getFullYear()+b)},"-Y":function(a,b){a.setFullYear(a.getFullYear()-b)}};return H.$watch("toggle",function(a){var b=x(s&&s[0]||""),d=x(s&&s[1]||"");a||z?z&&(z=!1):(q&&q[1][q[0]]!=b?(q[1][q[0]]=b,j()):q||H.inputFromValue==b||(H.inputFromValue=b,j()),r&&r[1][r[0]]!=d?r[1][r[0]]=d:r||H.inputToValue==d||(H.inputToValue=d)),C.toggle=a,D.toggle=a,a?"function"===c.type(H.onOpen)&&H.onOpen(H):"function"===c.type(H.onClose)&&H.onClose(H)}),H};return e.version=1,e.defaults={fromLabel:"选择起始日期",toLabel:"选择结束日期",rules:"",label:"",defaultLabel:"日期范围",disabled:!1,widgetElement:"",separator:"-",startDay:1,dateRangeWidth:260,shortcut:!1,onOpen:c.noop,onClose:c.noop,onSelect:c.noop,parseDate:function(a){if("date"===c.type(a))return a;var b=this.separator,d="^(\\d{4})"+b+"(\\d{1,2})"+b+"(\\d{1,2})$";d=new RegExp(d);var e=a.match(d);return e?new Date(e[1],1*e[2]-1,e[3]):null},formatDate:function(a){if("date"!==c.type(a))return c.log("the type of "+a+"must be Date"),"";var b=this.separator,d=a.getFullYear(),e=a.getMonth(),f=a.getDate();return d+b+this.formatNum(e+1,2)+b+this.formatNum(f,2)},formatNum:function(a,b){a=String(a);for(var c=0,d=b-a.length;d>c;c++)a="0"+a;return a},datesDisplayFormat:function(a,b,c){return b||c?a+"："+b+" 至 "+c:"不限日期"},getTemplate:function(a){return a}},c}()},{"../avalon.getModel":3,"../button/avalon.button":4,"./avalon.datepicker":9}],12:[function(a,b){var c=a("../avalon.getModel"),d='<div class="oni-dialog-layout"></div>\r\nMS_OPTION_WIDGET\r\n<div ms-widget="dialog,MS_OPTION_ID,MS_OPTION_OPTS" ms-css-position="position">MS_OPTION_DIALOG_CONTENT</div>\r\nMS_OPTION_INNERWRAPPER\r\n<div class="oni-dialog-inner"></div>\r\nMS_OPTION_HEADER\r\n<div class="oni-dialog-header">\r\n    <div class="oni-dialog-close" ms-click="_close" ms-if="showClose">\r\n        <i class="oni-icon oni-icon-times"></i>\r\n    </div>\r\n    <div class="oni-dialog-title">{{ title|html }}</div>\r\n</div>\r\nMS_OPTION_CONTENT\r\n<div class="oni-dialog-content"></div>\r\nMS_OPTION_FOOTER\r\n<div class="oni-dialog-footer oni-helper-clearfix">\r\n    <div class="oni-dialog-btns">\r\n        <button ms-widget="button" data-button-color="success" ms-hover="oni-state-hover" ms-click="_confirm">{{confirmName}}</button>\r\n        <button ms-widget="button" ms-if="type ==\'confirm\'" ms-click="_cancel">{{cancelName}}</button>\r\n    </div>\r\n</div>\r\nMS_OPTION_LAYOUT_SIMULATE\r\n<div></div>';a("../button/avalon.button"),a("../draggable/avalon.draggable"),b.exports=function(){function a(a){var b=a;if(b?"string"===c.type(b)&&(b=c.vmodels[b]):b=c.define("dialogVM"+setTimeout("1"),function(){}),!b)throw new Error("您查找的"+b+"不存在");return!c.isPlainObject(b)||b.$id||b.$accessors||(b=c.define("dialogVM"+setTimeout("1"),function(b){c.mix(b,a)})),[].concat(b)}function b(a,b,c,d){var e,f=null;return function(){var g=this,h=+new Date;clearTimeout(f),e||(e=h),h-e>=c?(a.apply(g,d),e=h):f=setTimeout(function(){a.apply(g,d)},b)}}function e(a,b,d){var e,f,g,h,i,j,l,m=c(k),p=c(n),r=c(b),s=0,t=0;if(a.toggle&&(l=document.compatMode&&"css1compat"==document.compatMode.toLowerCase()?document.documentElement:document.body,e=document.documentElement.clientWidth?document.documentElement.clientWidth:document.body.clientWidth,f=document.documentElement.clientHeight?document.documentElement.clientHeight:document.body.clientHeight,i=document.body.scrollTop+document.documentElement.scrollTop,j=l.scrollLeft,g=b.offsetWidth,h=b.offsetHeight,s=f>h?(f-h)/2:0,t=e>g?(e-g)/2+j:0,f>h&&e>g?q||(a.position="fixed"):q||(a.position="absolute"),!d||"fixed"!=a.position)){if("absolute"===a.position){if(o.length>1)for(var u=0;u<o.length-1;u++)o[u].widgetElement.style.display="none";m.css({height:f,width:e,top:i,position:"absolute"}),p.css({height:f,width:e,top:i,overflow:"auto",position:"absolute"})}else{if(o.length>1)for(var u=0;u<o.length-1;u++)o[u].widgetElement.style.display="block";m.css({height:"auto",width:"auto",top:0,position:"fixed"}),p.css({height:"auto",width:"auto",top:0,position:"static"})}r.css({left:t,top:s})}}function f(){for(var a,b,d=document.body.children,e=10,f=0;b=d[f++];)if(1===b.nodeType){if(b===k)continue;a=~~c(b).css("z-index"),a&&(e=Math.max(e,a))}return e+1}function g(){var a=document.createElement('<iframe src="javascript:\'\'" style="position:absolute;top:0;left:0;bottom:0;margin:0;padding:0;right:0;zoom:1;width:'+k.style.width+";height:"+k.style.height+";z-index:"+(k.style.zIndex-1)+';"></iframe>');return document.body.appendChild(a),a}var h=d,i=h.split("MS_OPTION_WIDGET"),j=i[0],k=c.parseHTML(j).firstChild,l=!1,m=h.split("MS_OPTION_LAYOUT_SIMULATE")[1],n=c.parseHTML(m).firstChild,o=[],p=0,q=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6"),r=null,s=document.compatMode&&"css1compat"==document.compatMode.toLowerCase()?document.documentElement:document.body,t=c.ui.dialog=function(d,i,j){p++;var m=i.dialogOptions;m.type=m.type.toLowerCase(),m.template=m.getTemplate(h,m);var t=m.template.split("MS_OPTION_FOOTER"),u=t[0].split("MS_OPTION_CONTENT"),v=u[0].split("MS_OPTION_HEADER"),w=v[0].split("MS_OPTION_INNERWRAPPER"),x=u[1],y=v[1],z=t[1].split("MS_OPTION_LAYOUT_SIMULATE")[0],A=w[1],B="",C="",D=c(d),E=m.onConfirm,F=null,G=m.onCancel,H=null,I=m.onOpen,J=null,K=m.onClose,L=null,M=!0,N=q?"absolute":"fixed";"string"==typeof E&&(F=c.getModel(E,j),m.onConfirm=F&&F[1][F[0]]||c.noop),"string"==typeof G&&(H=c.getModel(G,j),m.onCancel=H&&H[1][H[0]]||c.noop),"string"==typeof K&&(c.log("ms-widget='dialog' data-dialog-on-close 此用法已经被废弃"),L=c.getModel(K,j),m.onClose=L&&L[1][L[0]]||c.noop),"string"==typeof I&&(J=c.getModel(I,j),m.onOpen=J&&J[1][J[0]]||c.noop),z=m.getFooter(z,m);var O=c.define(i.dialogId,function(h){c.mix(h,m),h.$skipArray=["widgetElement","template","container","modal","zIndexIncrementGlobal","initChange","content"],h.widgetElement=d,h.position=N,h.showClose="alert"===h.type?!1:h.showClose,h.initChange=!0,h._confirm=function(a){if("function"!=typeof O.onConfirm)throw new Error("onConfirm必须是一个回调方法");O.onConfirm.call(a.target,a,O)!==!1&&O._close(a)},h._open=function(a){var b=0,f=document.getElementsByTagName("select").length,h=O.zIndex;c.Array.ensure(o,O),b=o.length,b&&(c(k).css("display","block"),c(n).css("display","block")),k.style.zIndex=2*b+h-1,n.style.zIndex=2*b+h-1,d.style.zIndex=2*b+h,a||(document.documentElement.style.overflow="hidden",e(O,d),q&&f&&null===r&&O.modal?r=g():q&&f&&O.modal&&(r.style.display="block",r.style.width=k.style.width,r.style.height=k.style.height,r.style.zIndex=k.style.zIndex-1),O.onOpen.call(d,O))},h._close=function(a){c.Array.remove(o,h);var b=o.length,f=O.zIndex,g=b&&o[b-1];if(a&&(M=!1),O.toggle=!1,!g||!g.modal)return c(k).css("display","none"),c(n).css("display","none"),null!==r&&(r.style.display="none"),document.documentElement.style.overflow="",void O.onClose.call(d,O);c(k).css("display","block"),c(n).css("display","block"),g.widgetElement.style.display="block",e(g,g.widgetElement);var i=2*b+f-1;k.style.zIndex=i,n.style.zIndex=i,r&&(r.style.zIndex=i-1),O.onClose.call(d,O)},h._cancel=function(a){if("function"!=typeof O.onCancel)throw new Error("onCancel必须是一个回调方法");O.onCancel.call(a.target,a,O)!==!1&&O._close(a)},h.setContent=function(a,b,d){var e=d?d:[O].concat(j);return B=a,C.innerHTML=B,b||c.scan(C,e),O},h.setTitle=function(a){return O.title=a,O},h.setModel=function(b){return b.$content&&O.setContent(b.$content,b.noScan,[O].concat(a(b)).concat(j)),b.$title&&(O.title=b.$title),O},h._renderView=function(){var a=null;d.setAttribute("ms-css-width","width"),C=c.parseHTML(x).firstChild,B=d.innerHTML||O.content,d.innerHTML="",C.innerHTML=B,a=c.parseHTML(A).firstChild,a.innerHTML=y,a.appendChild(C),a.appendChild(c.parseHTML(z)),d.appendChild(a),l||(document.body.appendChild(k),document.body.appendChild(n),l=!0)},h.$init=function(a){var g=O.container,i=s.clientHeight,k=document.body,l=("object"===c.type(g)&&1===g.nodeType&&k.contains(g)?g:document.getElementById(g))||k,o=c.ui.dialog.defaults;o.zIndex||(o.zIndex=f()),c(k).height()<i&&c(k).css("min-height",i),O.draggable&&(D.attr("ms-draggable",""),O.draggable={handle:function(a){var b=a.target;do{if("oni-dialog-header"===b.className)return b;if("oni-dialog"===b.className)return}while(b=b.parentNode)}}),O.zIndex=O.zIndex+O.zIndexIncrementGlobal,O.title=O.title||"&nbsp;",D.addClass("oni-dialog"),d.setAttribute("ms-visible","toggle"),d.setAttribute("ms-css-position","position"),h._renderView(),k.contains(n)&&k==l?n.appendChild(d):l.appendChild(d),d.resizeCallback=c(window).bind("resize",b(e,50,100,[O,d])),d.scrollCallback=c(window).bind("scroll",b(e,50,100,[O,d,!0])),c.scan(d,[O].concat(j)),a?a():(c.log("avalon请尽快升到1.3.7+"),c.scan(d,[O].concat(j)),"function"==typeof m.onInit&&m.onInit.call(d,O,m,j))},h.$remove=function(){p--,d.innerHTML="",c.unbind(window,"resize",d.resizeCallback),c.unbind(window,"scroll",d.scrollCallback),p||(k.parentNode.removeChild(k),k.parentNode.removeChild(n),l=!1)},h.$watch("toggle",function(a){a?O._open():M===!1?M=!0:O._close()}),h.$watch("zIndex",function(){O.initChange?O.initChange=!1:O._open(!0)})});return O};return t.version=1,t.defaults={width:480,title:"&nbsp;",draggable:!1,type:"confirm",content:"",onConfirm:c.noop,onOpen:c.noop,onCancel:c.noop,onClose:c.noop,setTitle:c.noop,setContent:c.noop,setModel:c.noop,showClose:!0,toggle:!1,widgetElement:"",container:"body",confirmName:"确定",cancelName:"取消",getTemplate:function(a){return a},getFooter:function(a){return a},modal:!0,zIndex:0,zIndexIncrementGlobal:0},c(window).bind("keydown",function(a){var b=a.which,c=o.length;27===b&&c&&(o[c-1].toggle=!1)}),c}()},{"../avalon.getModel":3,"../button/avalon.button":4,"../draggable/avalon.draggable":14}],13:[function(a,b){var c='<div class="oni-doublelist oni-helper-reset oni-helper-clearfix oni-widget oni-helper-noselect"\r\n	 ms-visible="toggle">\r\n	<div class="oni-doublelist-data oni-doublelist-menu oni-widget-content" ms-widget="scrollbar,$left{{MS_OPTION_ID}}">\r\n		<ul class="oni-helper-reset oni-scrollbar-scroller" ms-each-item="data" data-each-rendered="updateScrollbar">\r\n		{{MS_OPTION_DATA}}\r\n		</ul>\r\n	</div>\r\n	<div class="oni-doublelist-option">\r\n		<div class="oni-dbl-button" ms-click="_update($event,\'add\')" \r\n			ms-class-101="oni-state-disabled:dataTmpSelect.size()==0">\r\n			<span>&nbsp;添加&nbsp;&gt;</span>\r\n		</div>\r\n		<div class="oni-dbl-button" ms-click="_update($event,\'delete\')" \r\n			ms-class-101="oni-state-disabled:selectTmpSelect.size()==0">\r\n			<span>&lt;&nbsp;删除&nbsp;</span>\r\n		</div>\r\n	</div>\r\n	<div class="oni-doublelist-select oni-doublelist-menu oni-widget-content" ms-widget="scrollbar,$right{{MS_OPTION_ID}}">\r\n		<ul class="oni-helper-reset oni-scrollbar-scroller" ms-each-item="_selectData" data-each-rendered="updateScrollbar">\r\n			{{MS_OPTION_SELECT}}\r\n		</ul>\r\n	</div>\r\n</div>',d='<li class="oni-doublelist-item" ms-class="oni-state-disabled:_itemSelected(item,\'{{MS_OPTION_TYPE}}\')" \r\nms-data-value="item.value" \r\nms-data-name="item.name" \r\nms-hover="oni-state-hover" \r\nms-class-1="oni-state-active:_activeClass(item,\'{{MS_OPTION_TYPE}}\')" \r\nms-class-2="oni-helper-hidden:_itemShow(item,\'{{MS_OPTION_TYPE}}\')" \r\nms-click="_select($event, item,\'{{MS_OPTION_TYPE}}\')" \r\nms-dblclick="_select($event, item,\'{{MS_OPTION_TYPE}}\', \'dbclick\')"  \r\nms-attr-id="\'{{MS_OPTION_TYPE}}\'+item.value+$uid">\r\n	{{ item.name | html }}\r\n</li>';a("../scrollbar/avalon.scrollbar"),b.exports=function(){var a=avalon.ui.doublelist=function(a,b,e){var f=b.doublelistOptions;f.template=f.getTemplate(c,f);var g=avalon.define(b.doublelistId,function(b){b.data=[],b.select=[],b._selectData=[],b.dataTmpSelect=[],b.selectTmpSelect=[],b.$changeCBS=[],avalon.mix(b,f),b.change!=avalon.noop&&b.onChange==avalon.noop&&(b.onChange=b.change),b.widgetElement=a,b.$skipArray=["widgetElement","template"];var h,i=+new Date;b.$uid=i,b.$init=function(b){if(!h){h=!0;var c=g._getTemplate("data"),d=g._getTemplate("select");g.template=g.template.replace(/\{\{MS_OPTION_SELECT\}\}/g,d).replace(/\{\{MS_OPTION_DATA\}\}/g,c).replace(/\{\{MS_OPTION_ID\}\}/g,i),a.innerHTML=g.template,g._getSelect(),b?b():(avalon.log("请尽快升到avalon1.3.7+"),avalon.scan(a,[g].concat(e)),"function"==typeof f.onInit&&f.onInit.call(a,g,f,e))}},b.$remove=function(){a.innerHTML=a.textContent=""},b._getTemplate=function(a){var b=c;return"data"===a?b=d.replace(/\{\{MS_OPTION_TYPE\}\}/g,"data"):"select"===a&&(b=d.replace(/\{\{MS_OPTION_TYPE\}\}/g,"select")),g.getTemplate(b,f,a)},b._itemSelected=function(a,b){for(var c=0,d=g.select;d>c;c++)if(g.select[c]==a.value)return!0&&"data"==b;return!1},b._itemShow=function(a,b){return g.hideSelect&&g._itemSelected(a,b)},b._getSelect=function(){g._selectData=[],avalon.each(g.select,function(a,b){avalon.each(g.data,function(a,c){b==c.value&&g._selectData.push(c)});var c=avalon(document.getElementById("data"+b+g.$uid));c.removeClass("oni-state-active").addClass("oni-state-disabled"),g.hideSelect&&c.addClass("oni-helper-hidden")})},b.updateScrollbar=function(){avalon.vmodels["$left"+g.$uid]&&avalon.vmodels["$left"+g.$uid].update(),avalon.vmodels["$right"+g.$uid]&&avalon.vmodels["$right"+g.$uid].update()},b._removeFrom=function(a,b){for(var c=b?g.selectTmpSelect:g.dataTmpSelect,d=0,e=c.length;e>d;d++)if(a==c[d]){c.splice(d,1);break}},b._select=function(a,b,c,d){var e=avalon(this),f=e.data();if(a.preventDefault(),!e.hasClass("oni-state-disabled"))if("select"==c){if(e.hasClass("oni-state-active"))e.removeClass("oni-state-active"),g._removeFrom(f.value,"fromSelected");else if(!e.hasClass("oni-state-disabled")){for(var h=0,i=g.selectTmpSelect.length;i>h;h++)if(g.selectTmpSelect[h]==f.value)return;e.addClass("oni-state-active"),g.selectTmpSelect.push(f.value)}if(d){if(!g.countLimit(g.select,"delete",1))return;
for(var h=0,i=g.select.length;i>h;h++)if(g.select[h]==f.value)return g.select.removeAt(h),g._removeFrom(f.value,"fromSelected"),g.selectTmpSelect.clear(),void g._getSelect()}}else{if(e.hasClass("oni-state-active"))e.removeClass("oni-state-active"),g._removeFrom(f.value);else if(!e.hasClass("oni-state-disabled")){for(var h=0,i=g.dataTmpSelect.length;i>h;h++)if(g.dataTmpSelect[h]==f.value)return;e.addClass("oni-state-active"),g.dataTmpSelect.push(f.value)}if(d){if(!g.countLimit(g.select,"add",1))return;for(var h=0,i=g.select.length;i>h;h++)if(g.select[h]==f.value)return;g.select.push(f.value),g._removeFrom(f.value),g.selectTmpSelect.clear(),g._getSelect()}}},b._update=function(a,b){var c="delete"===b?g.selectTmpSelect:g.dataTmpSelect;if(0!=c.length&&g.countLimit(g.select,b,c.length)){if("delete"===b){for(var d=0,e=c.length;e>d;d++)for(var f=0,h=g.select.length;h>f;f++)if(g.select[f]==c[d]){g.select.splice(f,1);break}}else for(var d=0,e=c.length;e>d;d++)g.select.push(c[d]);g.selectTmpSelect.clear(),g.dataTmpSelect.clear(),g._getSelect()}},b._activeClass=function(a,b){for(var c="data"===b?g.dataTemplate:g.selectTmpSelect,d=0,e=c.length;e>d;d++)if(a.value==c[d])return!0},b.reset=function(a,c){a&&(a.length==g.data.length&&a!=g.data&&(g.data.clear(),g.data=a),g.data=a),c&&(c.length==g.select.length&&c!=g.select&&b.select.clear(),b.select=c),g.selectTmpSelect.clear(),g.dataTmpSelect.clear(),g._getSelect()}});return g.select.$watch("length",function(a,b){g.onChange&&g.onChange(a,b,g),avalon.each(g.$changeCBS,function(c,d){d(a,b,g)})}),g};a.defaults={toggle:!0,hideSelect:!1,onInit:avalon.noop,getTemplate:function(a){return a},countLimit:function(){return!0},change:avalon.noop,onChange:avalon.noop,$author:"skipper@123"}}()},{"../scrollbar/avalon.scrollbar":30}],14:[function(a,b){b.exports=function(){function a(a,b){var c="page"+b;return o?a.changedTouches[0][c]:a[c]}function b(b,c,d,e,f){var g=a(b,e);if(d.containment){var h="X"===e?d.containment[0]:d.containment[1],i="X"===e?d.containment[2]:d.containment[3],j=g-("X"===e?d.clickX:d.clickY);h>j?g+=Math.abs(h-j):j>i&&(g-=Math.abs(i-j))}d["page"+e]=g;var k=t[e],l=k.toLowerCase(),m=d["start"+k]+g-d["startPage"+e]+(f?d["end"+k]:0);d[l]=m,d["drag"+e]&&(c.style[l]=m+"px")}function c(){var a=window.event||{};a.returnValue=!1}function d(a,b){if(!a.containment){if(Array.isArray(b.containment))return;return void(b.containment=null)}var c=b.$element.width(),d=b.$element.height();if("window"===a.containment){var e=avalon(window);return void(b.containment=[e.scrollLeft(),e.scrollTop(),e.scrollLeft()+e.width()-b.marginLeft-c,e.scrollTop()+e.height()-b.marginTop-d])}if("document"===a.containment)return void(b.containment=[0,0,avalon(document).width()-b.marginLeft,avalon(document).height()-b.marginTop]);if(Array.isArray(a.containment)){var f=a.containment;return void(b.containment=[f[0],f[1],f[2]-c,f[3]-d])}if("parent"===a.containment||"#"===a.containment.charAt(0)){var g;if(g="parent"===a.containment?b.element.parentNode:document.getElementById(a.containment.slice(1))){var h=avalon(g).offset();b.containment=[h.left+b.marginLeft,h.top+b.marginTop,h.left+g.offsetWidth-b.marginLeft-c,h.top+g.offsetHeight-b.marginTop-d]}}}var e={ghosting:!1,delay:0,axis:"xy",started:!0,start:avalon.noop,beforeStart:avalon.noop,drag:avalon.noop,beforeStop:avalon.noop,stop:avalon.noop,scrollPlugin:!0,scrollSensitivity:20,scrollSpeed:20},f=document.getElementById("avalonStyle"),g=".ui-helper-global-drag *{ -webkit-touch-callout: none;-khtml-user-select: none;-moz-user-select: none;-ms-user-select: none;user-select: none;}.ui-helper-global-drag img{-webkit-user-drag:none; pointer-events:none;}";try{f.innerHTML+=g}catch(h){f.styleSheet.cssText+=g}var i,j=navigator.userAgent,k=/Android/i.test(j),l=/BlackBerry/i.test(j),m=/IEMobile/i.test(j),n=/iPhone|iPad|iPod/i.test(j),o=k||l||m||n;if(o)p="touchstart",q="touchmove",r="touchend";else var p="mousedown",q="mousemove",r="mouseup";var s=avalon.bindingHandlers.draggable=function(b,c){var f,g,h=b.value.match(avalon.rword)||[],j=h[0]||"$",k=h[1]||"draggable";if("$"==j||(f=avalon.vmodels[j])){b.element.removeAttribute("ms-draggable"),f||(f=c.length?c[0]:null);var l=f||{};f&&"object"==typeof f[k]&&(g=f[k],g.$model&&(g=g.$model),l=g);var m=b.element,n=avalon(m),o=avalon.mix({},e,g||{},b[k]||{},avalon.getWidgetData(m,"draggable"));"drag,stop,start,beforeStart,beforeStop".replace(avalon.rword,function(a){var b=o[a];"string"==typeof b&&"function"==typeof l[b]&&(o[a]=l[b])}),""===o.axis||/^(x|y|xy)$/.test(o.axis)||(o.axis="xy"),i=document.body,n.bind(p,function(b){var c=avalon.mix({},o,{element:m,$element:n,pageX:a(b,"X"),pageY:a(b,"Y"),marginLeft:parseFloat(n.css("marginLeft"))||0,marginTop:parseFloat(n.css("marginTop"))||0});if(c.startPageX=c.pageX,c.startPageY=c.pageY,o.axis.replace(/./g,function(a){c["drag"+a.toUpperCase()]=!0}),c.dragX||c.dragY||(c.started=!1),"function"==typeof o.beforeStart&&o.beforeStart.call(c.element,b,c),c.handle&&l){var e=l[c.handle];if(e="function"==typeof e?e:c.handle,"function"==typeof e){var f=e.call(m,b,c);if(!f||1!==f.nodeType)return;if(!m.contains(f))return}}x();var g=n.css("position");/^(?:r|a|f)/.test(g)||(m.style.position="relative",m.style.top="0px",m.style.left="0px"),o.delay&&isFinite(o.delay)&&(c.started=!1,setTimeout(function(){c.started=!0},o.delay));var h=n.offset();if(o.ghosting){var j=m.cloneNode(!0);avalon(j).css("opacity",.7).width(m.offsetWidth).height(m.offsetHeight),c.clone=j,"fixed"!==g&&(j.style.position="absolute",j.style.top=h.top-c.marginTop+"px",j.style.left=h.left-c.marginLeft+"px"),i.appendChild(j)}var k=avalon(c.clone||c.element);c.startLeft=parseFloat(k.css("left")),c.startTop=parseFloat(k.css("top")),c.endLeft=parseFloat(n.css("left"))-c.startLeft,c.endTop=parseFloat(n.css("top"))-c.startTop,c.clickX=c.pageX-h.left,c.clickY=c.pageY-h.top,d(o,c),s.dragData=c,"start,drag,beforeStop,stop".replace(avalon.rword,function(a){s[a]=[o[a]]}),s.plugin.call("start",b,c)})}},t={X:"Left",Y:"Top"};s.dragData={},s.start=[],s.drag=[],s.stop=[],s.beforeStop=[],s.plugin={add:function(a,b){for(var c in b){var d=b[c];"function"==typeof d&&Array.isArray(s[c])&&(d.isPlugin=!0,d.pluginName=a+"Plugin",s[c].push(d))}},call:function(a,b,c){var d=s[a];if(Array.isArray(d)&&d.forEach(function(a){("undefined"==typeof a.pluginName?!0:c[a.pluginName])&&a.call(c.element,b,c)}),"stop"===a)for(var e in s)d=s[e],Array.isArray(d)&&d.forEach(function(a){a.isPlugin||avalon.Array.remove(d,a)})}};var u=new Date-0,v=document.querySelector?12:30;avalon(document).bind(q,function(a){var c=new Date-u;if(c>v){u=c;var d=s.dragData;if(d.started===!0){a.preventDefault();var e=d.clone||d.element;b(a,e,d,"X"),b(a,e,d,"Y"),s.plugin.call("drag",a,d)}}}),avalon(document).bind(r,function(a){var c=s.dragData;if(c.started===!0){y();var d=c.element;s.plugin.call("beforeStop",a,c),c.dragX&&b(a,d,c,"X",!0),c.dragY&&b(a,d,c,"Y",!0),c.clone&&i.removeChild(c.clone),s.plugin.call("stop",a,c),s.dragData={}}});var w=document.documentElement,x=function(){avalon(w).addClass("ui-helper-global-drag")},y=function(){avalon(w).removeClass("ui-helper-global-drag")};if(window.VBArray&&!("msUserSelect"in w.style)){var z;x=function(){z=i.onselectstart,i.onselectstart=c},y=function(){i.onselectstart=z}}return avalon}()},{}],15:[function(a,b){var c='<div class="oni-dropdown"\r\n     ms-class="oni-state-disabled:!enable"\r\n     ms-class-1="{{titleClass}}"\r\n     ms-css-width="{{width}}"\r\n     ms-class-2="oni-state-focus: focusClass"\r\n     ms-hover="oni-state-hover"\r\n     ms-keydown="_keydown"\r\n     tabindex="0">\r\n    <div class="oni-dropdown-source">\r\n        <div class="oni-dropdown-input"\r\n             ms-title="title"\r\n             ms-css-width="titleWidth"\r\n             id="title-MS_OPTION_ID">{{label|sanitize|html}}</div>\r\n        <div class="oni-dropdown-icon-wrap">\r\n            <i class="oni-dropdown-icon oni-icon oni-icon-angle-up"\r\n               ms-visible="toggle">&#xf106;</i>\r\n            <i class="oni-dropdown-icon oni-icon oni-icon-angle-down"\r\n               ms-visible="!toggle">&#xf107;</i>\r\n        </div>\r\n    </div>\r\n</div>\r\nMS_OPTION_TEMPLATE\r\n<div class="oni-dropdown"\r\n     ms-class="oni-dropdown-menu:!multiple"\r\n     ms-class-1="{{listClass}}"\r\n     ms-css-width="{{listWidth}}"\r\n     ms-mouseenter="_listenter"\r\n     ms-mouseleave="_listleave"\r\n     ms-visible="toggle||multiple">\r\n    <div class="oni-dropdown-menu-inner"\r\n         ms-css-width="menuWidth"\r\n         ms-css-height="menuHeight"\r\n         ms-widget="scrollbar,scrollbar-MS_OPTION_ID" id="menu-MS_OPTION_ID">\r\n        <div class="oni-scrollbar-scroller"\r\n             id="list-MS_OPTION_ID">\r\n            <div ms-repeat="data" class="oni-dropdown-item"\r\n                 ms-click-12="_select($index, $event)"\r\n                 ms-title="el.title||el.label"\r\n                 ms-visible="el.toggle"\r\n                 ms-hover="oni-state-hover: el.enable"\r\n                 ms-class-1="oni-state-disabled:!el.enable"\r\n                 ms-class-2="oni-state-active:isActive(el, multipleChange)"\r\n                 ms-class-4="oni-dropdown-group:el.group"\r\n                 ms-class-5="oni-dropdown-divider:el.group && !$first"\r\n                 data-repeat-rendered="repeatRendered"\r\n                 >{{el.label|sanitize|html}}</div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';a("../avalon.getModel"),a("../scrollbar/avalon.scrollbar"),b.exports=function(){function a(a){try{a="true"===a?!0:"false"===a?!1:"null"===a?null:+a+""===a?+a:a}catch(b){}return a}function b(a,c,d){var f=c||[];d=d||null;for(var g,h=0;g=a[h++];)Array.isArray(g.options)?(f.push({label:g.label,value:g.value,enable:e(g.enable,!0),group:!0,parent:d,toggle:!0}),b(g.options,f,g)):("string"==typeof g&&(g={label:g,value:g,title:g}),f.push({label:g.label,value:g.value,title:g.title,enable:e(d&&d.enable,!0)&&e(g.enable,!0),group:!1,parent:d,data:g,toggle:!0}));return f}function d(a){for(var b,c,d,e=document.createDocumentFragment(),f=0;d=a[f++];)d.group?(c=document.createElement("optgroup"),c.label=d.label,c.disabled=!d.enable,e.appendChild(c),b=c):(c=document.createElement("option"),c.text=d.label,c.value=d.value,c.disabled=!d.enable,d.parent&&b?b.appendChild(c):e.appendChild(c));return e}function e(a,b){return"boolean"==typeof a?a:b}function f(b,c,d){var g=c||[],h=b.children;d=d||null;for(var i,j=0;i=h[j++];)1===i.nodeType&&("OPTGROUP"===i.tagName?(d={label:i.label,value:"",enable:!i.disabled,group:!0,parent:!1,toggle:!0},g.push(d),f(i,g,d)):"OPTION"===i.tagName&&g.push({label:i.label.trim()||i.text.trim()||i.value.trim(),title:i.title.trim(),value:a(i.value.trim()||i.text.trim()),enable:e(d&&d.enable,!0)&&!i.disabled,group:!1,parent:d,toggle:!0}));return g}function g(a,b,c){var d,e,f=a.size(),g=[],h=[],i={};for(d=0;b>d;d++)i=a[d],i.enable&&!i.group&&i.toggle&&g.push(d);for(d=b+1;f>d;d++)i=a[d],i.enable&&!i.group&&i.toggle&&h.push(d);return e=0===g.length&&0===h.length?null:c?h.length>0?h.shift():g.shift():g.length>0?g.pop():h.pop()}function h(a){for(var b=[];a;a=a.nextSibling)1===a.nodeType&&b.push(a);return b}var i=/^(\d+).*$/,j=!-[1]&&!window.XMLHttpRequest,k=avalon.ui.dropdown=function(e,k,m){function n(){avalon.each(e.getElementsByTagName("option"),function(b,c){if(K.value.$model.indexOf(c.value)>-1||K.value.$model.indexOf(a(c.value))>-1)try{c.selected=!0}catch(d){avalon(c).attr("selected","selected")}else try{c.selected=!1}catch(d){c.removeAttribute("selected")}})}function o(b){var c,d=(e.msData["ms-duplex"]||"").trim();if(d&&(c=avalon.getModel(d,m)))b.value=c[1][c[0]],b.$hasDuplex=!0;else if(E){var f=[];Array.prototype.forEach.call(e.options,function(b){b.selected&&f.push(a(b.value))}),b.value=f}else Array.isArray(b.value)||(b.value=[b.value||""]);if(!b.multiple){Array.isArray(b.value)&&(b.value=void 0!==b.value[0]?b.value[0]:"");var g=b.data.filter(function(a){return a.value===b.value&&!a.group}),h=b.data.filter(function(a){return!a.group});0===g.length&&h.length>0&&(b.value=h[0].value,c&&(c[1][c[0]]=b.value))}var i,j=B.attr("data-duplex-changed");j&&(i=avalon.getModel(j,m))&&(b.changedCallback=i[1][i[0]]),b.duplexName=d;var k=document.body,l=b.container;b.container=("object"===avalon.type(l)&&1===l.nodeType&&k.contains(l)?l:document.getElementById(l))||k}function p(){return avalon.parseHTML(x)}function q(a){var b=K.data.$model.filter(function(b){return b.value===a});return b=b.length>0?b[0]:null,b?(K.label=b.label,K.title=b.title||b.label||""):avalon.log("[log] avalon.dropdown 设置label出错"),b}function r(){var a=document.getElementById("title-"+K.$id),b=avalon(a);return K.width-b.css("paddingLeft").replace(i,"$1")-b.css("paddingRight").replace(i,"$1")}function s(){!K.multiple&&J&&K._position()}var t,u,v,w,x,y,z,A,B=avalon(e),C=e.parentNode,D=k.dropdownOptions,E=!0,F=!1;"multiple,size".replace(avalon.rword,function(a){l(e,a)&&(D[a]=e[a])}),D.enable=!e.disabled,v=D.template=D.getTemplate(c,D).replace(/MS_OPTION_ID/g,k.dropdownId).split("MS_OPTION_TEMPLATE"),w=v[0],x=v[1],t=D.data.$model||D.data,e.removeAttribute("ms-duplex"),avalon.scan(e,m),u=f(e),E=!!u.length,0===u.length&&(u=b(t)),D.data=u,avalon(e).css("display","none"),o(D);for(var G=0,H=u.length;H>G;G++)if(u[G].value==D.value){D.activeIndex=G,D.currentOption=u[G];break}var I,J,K=avalon.define(k.dropdownId,function(a){avalon.mix(a,D),a.$skipArray=["widgetElement","duplexName","menuNode","dropdownNode","scrollWidget"],a.multiple&&a.$hasDuplex&&-1===a.$skipArray.indexOf("value")&&a.$skipArray.push("value"),a.render=function(a){void 0!==a&&(K.data=b(a.$model||a),K.toggle&&K._styleFix(!0))},a.widgetElement=e,a.menuWidth="auto",a.menuHeight=a.height,a.dataSource=t,a.focusClass=!1,a.$init=function(a){if(K.multiple)J=p(),C.insertBefore(J,e);else{var b;I=avalon.parseHTML(w),b=I.firstChild,C.insertBefore(I,e),I=b,K.titleWidth=r(),q(K.value),y=avalon.bind(document.body,"click",function(a){return I.contains(a.target)?void K._toggle():void(J&&J.contains(a.target)||K.__cursorInList__||K.multiple||!K.toggle||(K.toggle=!1))}),K.position&&(z=avalon.bind(window,"scroll",s),A=avalon.bind(window,"resize",s))}if(E||(e.appendChild(d(u)),avalon.each(["multiple","size"],function(a,b){avalon(e).attr(b,K[b])})),K.multiple)K.value.$watch("length",function(){K.multipleChange=!K.multipleChange,n()});else{var c,f=(e.msData["ms-duplex"]||"").trim();f&&(c=avalon.getModel(f,m))&&c[1].$watch(c[0],function(a){K.value=a}),K.$watch("value",function(a,b){function d(d){d?(F=!0,K.value=b):(c&&(c[1][c[0]]=a,e.value=a),K.currentOption=q(a))}var f="function"===avalon.type(K.onChange)&&K.onChange||!1;return F?void(F=!1):void((f&&f.call(e,a,b,K,d)!==!1||!f)&&(c&&(c[1][c[0]]=a,e.value=a),K.currentOption=q(a)))})}var g,h,i=e.msData["ms-disabled"],j=e.msData["ms-enabled"];i&&(g=avalon.getModel(i,m))&&(g[1].$watch(g[0],function(a){K.enable=!a}),K.enable=!g[1][g[0]]),j&&(h=avalon.getModel(j,m))&&(h[1].$watch(h[0],function(a){K.enable=a}),K.enable=h[1][h[0]]),K.enable=!e.disabled;var k,l=K.readonlyAttr;if(l&&(k=avalon.getModel(l,m))&&(k[1].$watch(k[0],function(a){K.readOnly=a}),K.readOnly=k[1][k[0]]),K.$source){if("string"===avalon.type(K.$source)){var o=avalon.getModel(K.$source,m);o&&(K.$source=o[1][o[0]])}else K.$source.$id?K.$source.length>0&&K._refresh(K.$source.length):K.$source=null;K.$source&&K.$source.$watch&&K.$source.$watch("length",function(a){K._refresh(a)})}avalon.ready(function(){avalon.scan(e.previousSibling,[K].concat(m)),a?a():(avalon.log("请尽快升到avalon1.3.7+"),"function"==typeof D.onInit&&D.onInit.call(e,K,D,m)),K.multiple&&n()})},a.repeatRendered=function(){K.multiple&&avalon.vmodels["scrollbar-"+K.$id].update()},a.$remove=function(){y&&avalon.unbind(window,"click",y),z&&avalon.unbind(window,"scroll",z),A&&avalon.unbind(window,"resize",A),K.toggle=!1,J&&K.container.removeChild(J),avalon.log("dropdown $remove")},a._select=function(a,b){var c=K.data[a].$model;if(c&&c.enable&&!c.group){var d=K.value;K.multiple?(a=K.value.indexOf(c.value),a>-1?K.value.splice(a,1):K.value.push(c.value)):K.value=c.value,K.toggle=!1,"function"===avalon.type(K.onSelect)&&K.onSelect.call(e,b,K.value,d,K),K.activeIndex=a}},a._refresh=function(a){if(K.data.clear(),K.label="",a>0){K._disabledScrollbar(!1),K.data.pushArray(b(K.$source.$model||K.$source));var c;(c=q(K.value))?K.activeIndex=K.data.$model.indexOf(c):(K.currentOption=K.data[0].$model,K.activeIndex=0,q(K.value=K.data[0].value)),K.menuNode&&K._styleFix(!0)}},a._keydown=function(a){if(K.keyboardEvent!==!1&&!K.multiple){var b=K.activeIndex||0,c=K.value;switch(a.keyCode){case 9:case 27:a.preventDefault();break;case 13:K._select(b,a);break;case 38:case 63233:if(a.preventDefault(),b=g(K.data,b),null===b)return;K.value=K.data[b].value,K.activeIndex=b,K.scrollTo(b),"function"===avalon.type(K.onSelect)&&K.onSelect.call(e,a,K.value,c,K);break;case 40:case 63235:if(a.preventDefault(),b=g(K.data,b,!0),null===b)return;K.value=K.data[b].value,K.activeIndex=b,K.scrollTo(b),"function"===avalon.type(K.onSelect)&&K.onSelect.call(e,a,K.value,c,K)}}},a._toggle=function(a){if(0===K.data.length&&!K.realTimeData||!K.enable||K.readOnly)return void(K.toggle=!1);if(!J){var b;J=p(),b=J.firstChild,K.container.appendChild(J),J=b,avalon.scan(b,[K].concat(m)),K.menuNode=document.getElementById("menu-"+K.$id),K.dropdownNode=document.getElementById("list-"+K.$id)}if("boolean"!=typeof a)return void(K.toggle=!K.toggle);if(a){var c,d,e=K.value;"array"!==avalon.type(e)&&(e=[e]),null==K.activeIndex&&(avalon.each(K.data,function(a,b){return void 0===c&&b.enable&&(c=a),b.value===e[0]?(d=a,!1):!0}),d||(d=c),K.activeIndex=d||0),K.scrollWidget=avalon.vmodels["scrollbar-"+K.$id],K._styleFix(),K._position(),"function"===avalon.type(K.onShow)&&K.onShow.call(this,J)}else"function"===avalon.type(K.onHide)&&K.onHide.call(this,J)},a.$watch("toggle",function(a){K.focusClass=a,K._toggle(a)}),a.toggle=!1,a._position=function(){for(var a=avalon(I),b=a.offset(),c=a.outerHeight(!0),d=avalon(J),e=avalon(I.firstChild),f=d.height(),g=avalon(window),h={},j=J.offsetParent,k=avalon(j);e.element&&1!=e.element.nodeType;)e=avalon(e.element.nextSibling);h.top=D.position&&b.top+c+f>g.scrollTop()+g.height()&&b.top-f>g.scrollTop()?b.top-f:b.top+c-e.css("borderBottomWidth").replace(i,"$1"),j&&"BODY"!==j.tagName&&"HTML"!==j.tagName?(h.top=h.top-k.offset().top+J.offsetParent.scrollTop,h.left=b.left-k.offset().left+J.offsetParent.scrollLeft):h.left=b.left,d.css(h)},a.__cursorInList__=!1,a._listenter=function(){K.__cursorInList__=!0},a._listleave=function(){K.__cursorInList__=!1},a._blur=function(){K.__cursorInList__||K.multiple||!K.toggle||(K.toggle=!1)},a.val=function(a){return"undefined"!=typeof a&&("array"!==avalon.type(a)&&(a=[a]),K.value=a),K.value},a.isActive=function(a){var b=a.value,c=a.enable,d=a.group;return K.multiple?K.value.indexOf(b)>-1&&c&&!d:K.value===b&&c&&!d},a._styleFix=function(a){var b=D.height||200,c=avalon(K.menuNode),d="";a&&(K.menuHeight="",avalon(K.dropdownNode).css({height:""})),d=K.dropdownNode.scrollHeight,K.menuWidth=j?K.listWidth:K.listWidth-c.css("borderLeftWidth").replace(i,"$1")-c.css("borderRightWidth").replace(i,"$1"),d>b?(K._disabledScrollbar(!1),d=b,avalon(K.dropdownNode).css({width:K.menuWidth-K.scrollWidget.getBars()[0].width()})):(K._disabledScrollbar(!0),avalon(K.dropdownNode).css({width:K.menuWidth})),K.menuHeight=d,K.updateScrollbar(),K.scrollTo(K.activeIndex)},a.updateScrollbar=function(){K.scrollWidget.update()},a.scrollTo=function(a){if(K.dropdownNode){var b=h(K.dropdownNode.firstChild),c=avalon(b[a]),d=K.menuHeight,e=b.length?c.position().top-avalon(b[0]).position().top:0,f=b.length?c.height():0,g=K.dropdownNode.scrollTop;(e>g+d-f||g>e+f)&&K.scrollWidget.scrollTo(0,e+f-d)}},a._disabledScrollbar=function(a){K.scrollWidget&&(K.scrollWidget.disabled=!!a)}});return K.$watch("enable",function(a){a||(K.toggle=!1)}),K.$watch("readOnly",function(a){a&&(K.toggle=!1)}),K};k.version="1.0",k.defaults={realTimeData:!1,container:null,width:200,listWidth:200,titleWidth:0,height:200,enable:!0,readOnly:!1,readonlyAttr:null,currentOption:null,data:[],$source:null,textFiled:"text",valueField:"value",value:[],label:"",multiple:!1,listClass:"",title:"",titleClass:"",activeIndex:null,size:1,menuNode:null,dropdownNode:null,scrollWidget:null,position:!0,onSelect:null,onShow:null,onHide:null,onChange:null,$hasDuplex:!1,multipleChange:!1,keyboardEvent:!0,getTemplate:function(a){return a},onInit:avalon.noop};var l=document.documentElement.hasAttribute?function(a,b){return a.hasAttribute(b)}:function(a,b){var c=a.outerHTML,d=c.slice(0,c.search(/\/?['"]?>(?![^<]*<['"])/));return new RegExp("\\s"+b+"\\b","i").test(d)};return avalon}()},{"../avalon.getModel":3,"../scrollbar/avalon.scrollbar":30}],16:[function(a,b){var c=a("../textbox/avalon.textbox.js");a("../dropdown/avalon.dropdown.js"),b.exports=function(){var a=c.ui.dropdownlist=function(a,b,d){var e=b.dropdownlistOptions,f=c(a),g={getTemplate:function(a){return a.replace(/MS_OPTION_ICON/,'<i class="oni-icon oni-textbox-icon" ms-visible="textboxToggle">&#xf002;</i>')},onInit:function(a){i.searchBox=a}},h={realTimeData:e.realTimeData,enable:e.enable,getTemplate:function(a){return a.replace('ms-visible="toggle||multiple">',"$&<input ms-widget='textbox' ms-css-width='{{listWidth-12}}' ms-duplex='_search' ms-keydown='_keydown' ms-attr-placeholder='placeholder'/>")},onShow:function(){i.searchBox.widgetElement.focus()},onInit:function(a){i.dropdown=a,i.$watch("_search",function(b){var c=a.data,d={},e=[],f=!1,g="",h={},j=!1;return i.realTimeData?void i.getRealTimeData(b,i):(j=-1==c[a.activeIndex].label.toLowerCase().indexOf(b),c.forEach(function(c,e){f=-1!=c.label.toLowerCase().indexOf(b),c.group||(c.parent?(g=c.parent.label,d[g]?h=d[g]:d[g]=h={t:0},f?(h.t+=1,j&&(a.value=c.value,a.activeIndex=e,j=!1),c.toggle=!0):c.toggle=!1):f?(c.toggle=!0,j&&(a.value=c.value,a.activeIndex=e,j=!1)):c.toggle=!1)}),e=Object.keys(d),e.forEach(function(a){var b=a;a=d[b];for(var e=0,f=c.length;f>e;e++){var g=c[e];if(g.group&&g.label==b){g.toggle=a.t?!0:!1;break}}}),void(a.toggle&&a._styleFix(!0)))}),a.$watch("toggle",function(a){a||(i._search="")}),i.$watch("_dataRerender",function(){a.activeIndex=0,a.render(i.data)}),i.$watch("enable",function(b){a.enable=b})}};e.textbox=c.mix(e.textbox,g),e.dropdown=c.mix(e.dropdown,h),e.dropdown.data=e.data;var i=c.define(b.dropdownlistId,function(b){c.mix(b,e),b.$skipArray=["widgetElement","data","textbox","dropdown","searchBox","realTimeData"],b.searchBox=null,b._search="",b._dataRerender=!1,b.getSelected=function(){return i.dropdown.value},b.render=function(a){void 0!==a&&(i.data=a,i._dataRerender=!i._dataRerender)},b.widgetElement=a,b.$init=function(){f.addClass("oni-dropdownlist"),f.attr("ms-widget",["dropdown","$","dropdown"].join()),c.scan(a,[i].concat(d))}});return i};return a.version=1,a.defaults={placeholder:"",realTimeData:!1,enable:!0,getRealTimeData:function(a,b){b.render()},getTemplate:function(a){return a}},c}()},{"../dropdown/avalon.dropdown.js":15,"../textbox/avalon.textbox.js":38}],17:[function(a,b){var c='<div class="oni-flipswitch oni-state-default oni-helper-reset oni-flipswitch-use-no-img" \r\n	 ms-class-100="oni-flipswitch-{{MS_OPTION_SIZE}} oni-flipswitch-{{MS_OPTION_THEME}}" \r\n	 ms-class-100="oni-flipswitch-off:_addThisClass()" \r\n	 ms-class-101="oni-state-disabled:disabled" \r\n	 ms-click="toggleStatus" \r\n	 ms-hover="oni-state-hover" \r\n	 ms-visible="toggle">\r\n	<div class="oni-flipswitch-modal" ms-visible="disabled"></div>\r\n	<div class="oni-flipswitch-bar oni-helper-clearfix" ms-class="oni-flipswitch-animate:$css3support" ms-if="dir==\'left\'">\r\n		<span class="oni-flipswitch-left" ms-if="hdir">{{MS_OPTION_ON_TEXT|html}}</span>\r\n		<span class="oni-flipswitch-right" ms-if="!hdir">{{MS_OPTION_OFF_TEXT|html}}</span>\r\n		<label class="oni-flipswitch-dragger">\r\n		   	<b class="oni-flipswitch-dragger-ball oni-flipswitch-ico" ms-class-103="oni-flipswitch-dragger-ball-unchecked:!checked">\r\n				<svg ms-if="_shallDrawSvg()" version="1.1" \r\n				width="100%" \r\n				height="100%" \r\n				style="position:absolute;z-index:3;left:0;" \r\n				xmlns="http://www.w3.org/2000/svg">\r\n					<circle stroked="false" \r\n					ms-attr-cx="draggerRadius" \r\n					ms-attr-cy="draggerRadius" \r\n					ms-attr-r="draggerRadius"  \r\n					ms-attr-fill="draggerColor"/>\r\n				</svg>\r\n				<v:oval class="oni-flipswitch-oval-n" \r\n				ms-if="_shallDrawVML()"\r\n			   	stroked="false" \r\n			   	filled="true" \r\n			    ms-css-height="draggerRadius*2+\'px\'" \r\n			    ms-css-width="draggerRadius*2+\'px\'" \r\n			   	ms-attr-fillcolor="draggerColor" \r\n			   	style="position:absolute;z-index:2;left:-1px;top:0;behavior: url(#default#VML)">\r\n				    <v:fill opacity="1"></v:fill>\r\n			    </v:oval>\r\n				<v:oval class="oni-flipswitch-oval-hd" \r\n				ms-if="_shallDrawVML()"\r\n			   	stroked="false" \r\n			   	filled="true" \r\n			    ms-css-height="draggerRadius*2+\'px\'" \r\n			    ms-css-width="draggerRadius*2+\'px\'" \r\n			   	ms-attr-fillcolor="draggerColor" \r\n			   	style="position:absolute;z-index:2;left:-1px;top:0;behavior: url(#default#VML);">\r\n				    <v:fill opacity="0.4"></v:fill>\r\n			    </v:oval>\r\n		   	</b>\r\n		</label>\r\n		<span class="oni-flipswitch-left" ms-if="!hdir">{{MS_OPTION_ON_TEXT|html}}</span>\r\n		<span class="oni-flipswitch-right" ms-if="hdir">{{MS_OPTION_OFF_TEXT|html}}</span>\r\n	</div>\r\n	<div class="oni-flipswitch-bg oni-flipswitch-ico" ms-class-101="oni-flipswitch-uckbg:!checked" ms-class-102="oni-flipswitch-uckbg-disabled:disabled"><svg ms-if="_shallDrawSvg()" version="1.1" \r\n		width="100%" \r\n		height="100%" \r\n		style="position:absolute;z-index:3;left:0;top:0;" \r\n		xmlns="http://www.w3.org/2000/svg">\r\n			<rect x="0" y="0" \r\n			ms-attr-rx="height/2" \r\n			ms-attr-ry="height/2" \r\n			width="100%" \r\n			height="100%" \r\n			ms-attr-fill="_getFillColor()"/>\r\n		</svg>\r\n		<v:roundrect ms-if="_shallDrawVML()" style="behavior:url(#default#VML);position:absolute;left:-1px;top:0;" \r\n		stroked="false"  \r\n		filled="t" \r\n		arcsize="1.0" \r\n		ms-attr-fillcolor="_getFillColor()" \r\n	    ms-css-height="height+\'px\'" \r\n	    ms-css-width="width+\'px\'">\r\n		</v:roundrect>\r\n	</div>\r\n</div>';a("../draggable/avalon.draggable"),b.exports=function(){function a(a){return a.replace(/MS_OPTION_[^\}]+/g,function(a){return a.split("MS_OPTION_")[1].toLowerCase().replace(/_[^_]/g,function(a){return a.split("_")[1].toUpperCase()})})}function b(a,b){var a=a.nextSibling,c=a.parentNode;a?c.insertBefore(b,a):c.appendChild(b)}var d=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,e="string"==typeof avalon.cssName("border-radius"),f="string"==typeof avalon.cssName("transition"),g=avalon.ui.flipswitch=function(g,h,i){var j=h.flipswitchOptions;j.template=j.getTemplate(c,j);var k,l=avalon.define(h.flipswitchId,function(c){avalon.mix(c,j),c.widgetElement=g,c.$css3support=f&&c.animated,c.$skipArray=["widgetElement","template"],c.$svgSupport=d,"large"==c.size?(c.draggerRadius=19,c.height=38,c.width=76):"mini"==c.size?(c.draggerRadius=7,c.height=12,c.width=28):"small"==c.size&&(c.draggerRadius=9,c.height=18,c.width=36);var h,m,n,o,p={},q={draxis:"x",drStop:function(a){if(a.x==p.x)l._toggle();else{var b=p.x-a.x,d=l._getDir();Math.abs(b)>=2*o.offsetWidth/5&&(b>0&&!d||0>b&&d)&&(l.checked=!l.checked);var e=l._getDir()?-50:0;f?n.style[l.dir]=e?e+"%":0:c._animate(-e)}},drStart:function(a){p=a},drDrag:function(){},drHandle:function(a){return l.disabled?void 0:(a.target||a.srcElement)!=o&&(a.target||a.srcElement).parentNode!=o&&(a.target||a.srcElement).parentNode.parentNode!=o?void l._toggle():o},drBeforeStart:function(a,b){var c=n.parentNode.clientWidth,d=n.parentNode.offsetWidth,e=(d-c)/2,f=avalon(n.parentNode).position();l.drContainment=b.containment=[.5*-c+e+f.left,0,f.left+e,0]},drBeforeStop:function(){},drContainment:[0,0,0,0]};avalon.mix(c,q);var r;return c.$init=function(c){if(!r){r=!0;var d=avalon.parseHTML(a(l.template));for(h=d.childNodes[0],b(g,h),d=null,m=g,m.msRetain=!0,m.parentNode.removeChild(m),m.style.display="none",m.checked&&(l.checked=!0),m.setAttribute("ms-checked","checked"),h.appendChild(m),m.msRetain=!1,c?c():(avalon.log("avalon请尽快升到1.3.7+"),"function"==typeof j.onInit&&j.onInit.call(g,l,j,i)),avalon.scan(h,[l].concat(i)),n=h.firstChild;n&&(!n.className||-1==n.className.indexOf("oni-flipswitch-bar"));)n=n.nextSibling;if(n.style[l.dir]=l._addthisCss(),l.draggable){for(o=n.firstChild;o&&(!o.className||-1==o.className.indexOf("oni-flipswitch-dragger"));)o=o.nextSibling;if(o){n.setAttribute("ms-draggable","");var e=avalon(n);avalon.each(q,function(a,b){var c=a.replace(/^dr/,"").replace(/[A-Z]/,function(a){return"-"+a.toLowerCase()});e.data("draggable"+c,"function"!=typeof b?b:a)})}avalon.scan(n,[l].concat(i))}}},c.$remove=function(){h.parentNode.insertBefore(m,h),h.parentNode.removeChild(h),m.style.display="inline",g.innerHTML&&(g.innerHTML=g.textContent="")},c._addThisClass=function(){return!l.checked&&l.hdir||l.checked&&!l.hdir?!0:!1},c._addthisCss=function(){return l.checked&&!l.hdir||!l.checked&&l.hdir?"-50%":"0"},c.toggleStatus=function(){l.disabled||l.draggable||l._toggle()},c._toggle=function(){l.checked=!l.checked,l._animate()},c._getDir=function(){return l.checked&&!l.hdir||!l.checked&&l.hdir},c._animate=function(a,b){var c=l._getDir(),d=n.style[l.dir];if(!f&&l.animated){clearTimeout(k),d=/px/.test(d)?-parseInt((parseInt(d)>>0)/n.parentNode.clientWidth*100):-parseInt(d)>>0;var e;e=c?l._animateArrMaker(d,void 0==a?50:a):l._animateArrMaker(d,void 0==a?0:a),n.style[l.dir]=-e[0]+"%",e.splice(0,1),k=setInterval(function(){return e.length?(n.style[l.dir]=-e[0]+"%",void e.splice(0,1)):void(b&&b())},100)}else l.animated&&(n.style[l.dir]=c?"-50%":"0")},c.disable=function(){l.disabled=!0},c.enable=function(){l.disabled=!1},c._getFillColor=function(){return l.disabled?l.disabledColor:l.checked?l.onColor:l.offColor},c._shallDrawSvg=function(){return l.$svgSupport&&!e},c._shallDrawVML=function(){return!l.$svgSupport&&!e},c});return l.$watch("checked",function(a){l.onChange&&l.onChange(a,l)}),l};g.defaults={toggle:!0,onText:'<b class="oni-flipswitch-on"></b>',offText:"",size:"normal",theme:"normal",draggable:!1,disabled:!1,checked:!1,animated:!0,hdir:!0,dir:"left",getStyleFromSkin:!0,draggerColor:"#ffffff",onColor:"#45A846",offColor:"#D5D5D5",disabledColor:"#DEDEDE",draggerRadius:7,height:24,width:48,css3support:!1,onInit:avalon.noop,_animateArrMaker:function(a,b){for(var c=[],d=b-a;a!=b;)a+=parseInt(d/1.5),d=parseInt(d-d/1.5),Math.abs(d)<=1&&(a=b),c.push(a);return c.length||(c=[b]),c},onChange:avalon.noop,getTemplate:function(a){return a},_author:"skipper@123"}}()},{"../draggable/avalon.draggable":14}],18:[function(a){a("./accordion/avalon.accordion.js"),a("./checkboxlist/avalon.checkboxlist.js"),a("./datepicker/avalon.datepicker.js"),a("./datepicker/avalon.coupledatepicker.js"),a("./datepicker/avalon.daterangepicker.js"),a("./dialog/avalon.dialog.js"),a("./doublelist/avalon.doublelist.js"),a("./dropdown/avalon.dropdown.js"),a("./switchdropdown/avalon.switchdropdown.js"),a("./menu/avalon.menu.js"),a("./flipswitch/avalon.flipswitch.js"),a("./notice/avalon.notice.js"),a("./pager/avalon.pager.js"),a("./scrollbar/avalon.scrollbar.js"),a("./spinner/avalon.spinner.js"),a("./tab/avalon.tab.js"),a("./textbox/avalon.textbox.js"),a("./tooltip/avalon.tooltip.js"),a("./smartgrid/avalon.smartgrid.js"),a("./loading/avalon.loading.js"),a("./validation/avalon.validation.js"),a("./dropdownlist/avalon.dropdownlist.js"),a("./progressbar/avalon.progressbar.js"),a("./miniswitch/avalon.miniswitch.js"),a("./preview/avalon.preview.js"),a("./rating/avalon.rating.js"),a("./simplegrid/avalon.simplegrid.js"),a("./timer/avalon.timer.js"),a("./tree/avalon.tree.menu.js"),a("./colorpicker/avalon.colorpicker.js"),a("./carousel/avalon.carousel.js"),a("./at/avalon.at.js")},{"./accordion/avalon.accordion.js":1,"./at/avalon.at.js":2,"./carousel/avalon.carousel.js":5,"./checkboxlist/avalon.checkboxlist.js":6,"./colorpicker/avalon.colorpicker.js":7,"./datepicker/avalon.coupledatepicker.js":8,"./datepicker/avalon.datepicker.js":9,"./datepicker/avalon.daterangepicker.js":11,"./dialog/avalon.dialog.js":12,"./doublelist/avalon.doublelist.js":13,"./dropdown/avalon.dropdown.js":15,"./dropdownlist/avalon.dropdownlist.js":16,"./flipswitch/avalon.flipswitch.js":17,"./loading/avalon.loading.js":20,"./menu/avalon.menu.js":21,"./miniswitch/avalon.miniswitch.js":22,"./notice/avalon.notice.js":24,"./pager/avalon.pager.js":25,"./preview/avalon.preview.js":27,"./progressbar/avalon.progressbar.js":28,"./rating/avalon.rating.js":29,"./scrollbar/avalon.scrollbar.js":30,"./simplegrid/avalon.simplegrid.js":31,"./smartgrid/avalon.smartgrid.js":33,"./spinner/avalon.spinner.js":34,"./switchdropdown/avalon.switchdropdown.js":35,"./tab/avalon.tab.js":36,"./textbox/avalon.textbox.js":38,"./timer/avalon.timer.js":39,"./tooltip/avalon.tooltip.js":40,"./tree/avalon.tree.menu.js":42,"./validation/avalon.validation.js":43}],19:[function(a,b){b.exports=function(){function a(a){var b=a.type;
if("select-multiple"===b){if(a.selectedIndex>-1){for(var c,d=[],e=0;c=a.options[e++];)d.push(c.selected);return d.join("-")}return""}return"select"===a.nodeName.toLowerCase()?a.selectedIndex:a.value}function b(b){for(var d,f=g.fixChangechange,h=b.target,i=f.length;d=f[--i];){var j=d.elem;if(e.contains(j)){if(j===h){var k=a(j);d.__change__!==k&&(b.type="change",d.fn.call(j,b),d.__change__=k)}}else c(f,d,i)}}function c(a,b,c){var d=b.elem.parentNode;d&&11!=d.nodeType||a.splice(c,1)}var d=document,e=d.documentElement,f={change:"click",focus:"focusin",blur:"focusout"},g=avalon.bindingHandlers.live=function(h,i){var j=h.param,k=h.element;h.type="on";var l="noFix";if(!d.createEvent)if(/focus|blur/.test(j))l="fixFocus";else if("change"==j){var m=k.type;"radio"==m||"checkbox"===m?(l="fixFocus","_just_changed"in k||(k._just_changed=!1,k.attachEvent("onpropertychange",function(a){"checked"==a.propertyName&&(k._just_changed=!0)}))):l="fixChange"}else/submit|reset|select/.test(j)&&(l=!1);l&&(g[l+j]||(g[l+j]=[],"noFix"===l&&avalon.bind(d,j,function(a){for(var b,d=g[l+j],f=a.target,h=d.length;b=d[--h];)e.contains(b.elem)?(b.elem===f||b.elem.contains(f))&&b.fn.call(b.elem,a):c(d,b,h)},!0),"fixFocus"===l&&avalon.bind(d,f[j],function(a){for(var b,d=g[l+j],f=a.target,h=d.length;b=d[--h];){var i=b.elem;e.contains(i)?(i===f||i.contains(f))&&("change"===j?i._just_changed===!0&&(a.type="change",b.fn.call(i,a),i._just_changed=!1):(a.type=j,b.fn.call(i,a))):c(d,b,h)}}),"fixChange"===l&&(avalon.bind(d,"beforeactivate",b),avalon.bind(d,"beforedeactivate",b))),h.specialBind=function(b,c){var d={elem:b,fn:c};/focus|blur/.test(j)&&(b.tabIndex=b.tabIndex||-1),"fixChange"===l&&(d.__change__=a(b));var e=g[l+j];e.unshift(d),h.specialUnbind=function(){avalon.Array.remove(e,d),delete h.specialBind,delete h.specialUnbind}}),avalon.bindingHandlers.on(h,i)}}()},{}],20:[function(a,b){var c='<div class="oni-helper-reset oni-helper-clearfix oni-widget oni-loading-modal" \r\n     ms-class-100="oni-helper-max-index:toggle" \r\n     ms-if="modal" \r\n     ms-attr-id="\'modal\'+$loadingID" \r\n     style="z-index:999;" \r\n     ms-css-opacity="modalOpacity" \r\n     ms-css-background-color="modalBackground" \r\n     ms-visible="toggle">\r\n     <iframe allowTransparency="true" frameborder="none" src="javascript:\'\'"></iframe>\r\n     </div>\r\n<div class="oni-helper-reset oni-helper-clearfix oni-widget oni-widget-content oni-loading" \r\n     ms-class-100="oni-helper-max-index:toggle" \r\n     ms-visible="toggle" \r\n     ms-css-width="width" \r\n     ms-css-height="height" \r\n     ms-css-margin-left="-width/2+\'px\'" \r\n     ms-css-margin-top="-height/2+\'px\'" \r\n     ms-attr-id="\'oni-loading-\'+$loadingID"><div \r\n     ms-css-width="width" \r\n     ms-css-height="height">{{MS_WIDGET_HTML}}</div></div>',d='{{MS_WIDGET_BALL}}\r\n<v:oval ms-repeat-item="data" style="position:absolute;" stroked="false" \r\n  ms-attr-fillcolor="color" \r\n  ms-css-left="item.x + \'px\'" \r\n  ms-css-top="item.y + \'px\'" \r\n  ms-css-width="item.r * 2 + \'px\'" \r\n  ms-css-height="item.r * 2 + \'px\'">\r\n</v:oval>\r\n{{MS_WIDGET_DIVIDER}}\r\n<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%">\r\n  <circle  \r\n          ms-attr-r="data[$index].r" \r\n          ms-attr-cx="data[$index].x+data[$index].r" \r\n          ms-attr-cy="data[$index].y+data[$index].r" \r\n          ms-repeat="data" \r\n          ms-attr-fill="color">\r\n      <animate attributeName="opacity" from="1" to=".1" repeatCount="indefinite" \r\n               ms-if="type==\'ball\'" \r\n               ms-attr-dur="svgDur" \r\n               ms-attr-begin="data[$index].begin"/>\r\n      <animate attributeName="r" repeatCount="indefinite" keySplines="0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8;0.2 0.2 0.4 0.8" calcMode="spline" \r\n               ms-attr-values="\'0;\'+data[$index].r+\';0;0\'"\r\n               ms-attr-dur="svgDur" \r\n               ms-if="type==\'spinning-bubbles\'" \r\n               ms-attr-begin="data[$index].begin"/>\r\n      <animate attributeName="r" repeatCount="indefinite" keytimes="0;0.2;0.7;1" keySplines="0.2 0.2 0.4 0.8;0.2 0.6 0.4 0.8;0.2 0.6 0.4 0.8" calcMode="spline" \r\n        ms-if="type==\'bubbles\'"\r\n        ms-attr-begin="data[$index].begin"  \r\n        ms-attr-dur="svgDur" \r\n        ms-attr-values="\'0;\'+data[$index].r+\';0;0\'" />\r\n  </circle>\r\n</svg>\r\n{{MS_WIDGET_TYPE}}\r\n{{MS_WIDGET_SPIN}}\r\n<v:oval stroked="true" filled="F" \r\n        ms-attr-strokecolor="color" \r\n        ms-css-height="width+\'px\'" \r\n        ms-css-width="width+\'px\'" \r\n        ms-css-opacity="opacity" \r\n        ms-attr-strokeweight="width / 2 - widthInner / 2+\'px\'" \r\n        ms-repeat="data" \r\n  style="position:absolute;z-index:2;left:0;top:0;"></v:oval>\r\n<v:arc stroked="true" filled="F" \r\n    ms-attr-strokecolor="color" \r\n    ms-attr-strokeweight="width / 2 - widthInner / 2+\'px\'" \r\n    style="position:absolute;z-index:3;text-indent:-1000px;overflow:hidden;left:0;top:0;" \r\n    ms-attr-startangle="startangle" \r\n    ms-attr-endangle="endangle" \r\n    ms-css-height="width+\'px\'" \r\n    ms-css-width="width+\'px\'" \r\n    ms-repeat="data">\r\n  </v:arc>\r\n{{MS_WIDGET_DIVIDER}}\r\n<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">\r\n  <path \r\n    ms-attr-d="arc" \r\n    ms-attr-stroke="color" \r\n    ms-attr-stroke-width="radius" \r\n    ms-attr-transform="\'rotate(0 \' + spinPoint +\')\'"\r\n    stroke-linejoin="round" fill="none">\r\n      <animateTransform attributeName="transform" repeatCount="indefinite" attributeType="XML" type="rotate" begin="0s" \r\n        ms-attr-from="0 + \' \' + spinPoint" \r\n        ms-attr-to="360 + \' \' + spinPoint" \r\n        ms-attr-dur="svgDur" />\r\n    </path>\r\n  <path stroke-linejoin="round" \r\n    ms-attr-d="circle" \r\n    ms-attr-stroke-width="radius" \r\n    ms-attr-stroke="color" \r\n    ms-css-opacity="opacity" \r\n    fill="none"></path>\r\n  </svg>\r\n{{MS_WIDGET_TYPE}}\r\n{{MS_WIDGET_SPINNING_SPIN}}\r\n<v:arc stroked="true" filled="F" \r\n    ms-attr-strokecolor="color" \r\n    ms-attr-strokeweight="radius+\'px\'" \r\n    style="position:absolute;z-index:3;text-indent:-1000px;overflow:hidden;left:0;top:0;" \r\n    ms-attr-startangle="item.startangle" \r\n    ms-attr-endangle="item.endangle" \r\n    ms-css-opacity="opacities[$index]" \r\n    ms-css-height="width+\'px\'" \r\n    ms-css-width="width+\'px\'" \r\n    ms-repeat-item="data">\r\n  </v:arc>\r\n{{MS_WIDGET_DIVIDER}}\r\n<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">\r\n  <path \r\n    ms-attr-d="arc" \r\n    ms-attr-stroke="color" \r\n    ms-attr-stroke-width="radius" \r\n    ms-attr-transform="item.rotate" \r\n    ms-repeat-item="data" \r\n    ms-css-opacity="opacities[$index]" \r\n    stroke-linejoin="round" fill="none">\r\n      <animate ms-if="0" attributeName="opacity" from="1" to=".2" repeatCount="indefinite" \r\n               ms-attr-dur="svgDur" \r\n               ms-attr-begin="item.begin"/>\r\n    </path>\r\n  </svg>\r\n{{MS_WIDGET_TYPE}}\r\n{{MS_WIDGET_SPOKES}}\r\n<v:rect style="position:absolute;" stroked="false" \r\n        ms-attr-fillcolor="color" \r\n        ms-css-left="item.spokesLeft+\'px\'" \r\n        ms-css-top="item.spokesTop+\'px\'"\r\n        ms-css-width="spokesWidth+\'px\'" \r\n        ms-css-height="spokesHeight+\'px\'" \r\n        ms-css-rotation="item.spokesRotation" \r\n        ms-repeat-item="data">\r\n        <v:fill \r\n                ms-attr-color="color"></v:fill>\r\n  </v:rect>\r\n{{MS_WIDGET_DIVIDER}}\r\n<svg width="100%" height="100%" version="1.1" xmlns="http://www.w3.org/2000/svg">\r\n  <path opacity=".1" ms-attr-d="svgPath" \r\n      ms-attr-transform="data[$index].rotate" \r\n        ms-repeat="data" \r\n    ms-attr-fill="color">\r\n    <animate attributeName="opacity" from="1" to=".1" repeatCount="indefinite" \r\n             ms-attr-dur="svgDur" \r\n             ms-attr-begin="data[$index].begin"/></path>\r\n  </svg>\r\n{{MS_WIDGET_TYPE}}\r\n{{MS_WIDGET_IMG}}\r\n<img width="100%" height="100%" ms-attr-src="src">';b.exports=function(){function a(a,b,c,d){b.drawer=c,b.effect=d,k[a]=b}function b(a){return document.getElementById(a)}function e(a,b,c){for(var d,e,f,g,h=[],i=c||36,a=a-b,j=0;i>=j;j++)d=Math.PI/2-2*Math.PI/i*j,e=Math.cos(d)*a+1*a+1*b,f=(1-Math.sin(d).toFixed(4))*a+1*b,g=(j?" L":"M")+e+" "+f+(100==j?"Z":""),h.push(g);return h}var f=0,g=navigator.userAgent.match(/msie/gi)||"ActiveXObject"in window,h=99999-1e4*Math.random()>>0,i={},j=d.split("{{MS_WIDGET_TYPE}}"),k={};avalon.each(j,function(a,b){var c,b=b.trim().replace(/^\{\{MS_WIDGET_[^\}]+\}\}/g,function(a){return c=a.replace(/\{\{MS_WIDGET_|\}\}/g,"").replace(/_/g,"-").toLowerCase(),""});c&&(c=c,b=b.split("{{MS_WIDGET_DIVIDER}}"),i[c]={svg:b[1]||b[0],vml:b[0]})}),a("ball",{width:32,widthInner:28,count:10,interval:120,circleMargin:1,svgDur:"1s"},function(a){var b=a.type,c=a.count,d=a.width,e=d/2,f=a.interval,g=(d-a.widthInner)/2;return"ball"===b&&(a.svgDur=f*c/1e3+"s"),function(b){var d=Math.PI*(.5-2*b/c);a.data.push({x:(e-g)*(Math.cos(d)+1),y:(g-e)*(Math.sin(d)-1),r:g,begin:[f*b/1e3,"s"].join("")}),a.opacities.push((b/c).toFixed(2))}},function(a,b,c,d){if(g||"ticks"===a.type||"spinning-spin"==a.type){var c=Array.isArray(c)?c:["circle","oval"],e=a.svgSupport?c[0]:c[1],b=b.getElementsByTagName(e),f=b.length,h=f,i=[];return avalon.each(b,function(b,c){i.push(avalon(c)),b!==f-1||a.svgSupport||(c.style.display="none",c.style.display="block")}),"ticks"===a.type?(h=0,function(){for(var b=0;f>b;b++){var c=b>h?a.opacities[1]:a.opacities[0];i[b]&&i[b].css("visibility",c>=1?"visible":"hidden")}h++,h>=f&&(h=-1)}):function(){h--,0>h&&(h=f-1);for(var b=0;f>b;b++)if(d)d(i[b],b,h);else{var c=100*a.opacities[(b+h)%f]/100;i[b]&&i[b].css("opacity",c)}}}}),a("ticks",avalon.mix({},k.ball,{count:3,height:20,interval:360}),function(a){var b=a.count,c=2+a.circleMargin,d=(a.width-a.widthInner)/2,e=(a.width-d*(3*b-1))/2;return function(b){a.data.push({x:e+b*c*d,y:a.height/2-d,r:d,begin:[a.interval*b/1e3,"s"].join("")}),a.opacities.push(b?0:1)}},k.ball.effect),i.ticks=i.ball,a("spin",{width:32,widthInner:26,angel:90,arc:"",circle:"",radius:"",opacity:.2,startangle:0,endangle:0,interval:36,$circleData:"",$partsData:"",spinPoint:"23 23",svgDur:"1s",data:[1]},function(a){if(a.radius=a.width/2-a.widthInner/2,a.svgSupport){a.svgDur=36*a.interval/1e3+"s",a.spinPoint=[a.width/2,a.width/2].join(" ");var b=a.$circleData=e(a.width/2,a.width/2-a.widthInner/2),c=a.$partsData=b.slice(0,Math.floor(a.angel/360*(b.length-1)));a.arc=c.join(""),a.circle=b.join("")}else a.startangle=0,a.endangle=a.angel},function(a,b){if(g){var c=stepper=a.angel;if(a.svgSupport){var d=a.$circleData.length,b=avalon(b.getElementsByTagName("path")[0]);return c=stepper=Math.floor(a.angel/360*d),function(){stepper+=1,stepper>=d&&(stepper=0),b.attr("transform","rotate("+10*stepper+" "+a.spinPoint+")")}}return function(){stepper+=10;var b=stepper-c;stepper>360&&(stepper-=360,b-=360),a.startangle=b,a.endangle=stepper}}}),a("spokes",{count:8,width:32,spokesWidth:4,spokesHeight:8,interval:125,svgPath:"M14 0 H18 V8 H14 z",svgDur:"1s"},function(a){var b=a.count,c=a.width,d=a.spokesWidth,e=a.spokesHeight,f=a.interval;if(a.svgSupport){a.svgPath=["M",(c-d)/2," 0 H",(c+d)/2," V",e," H",(c-d)/2," z"].join(""),a.svgDur=f*b/1e3+"s";var g=360/b;return function(d){a.data.push({begin:[f*d/1e3,"s"].join(""),rotate:["rotate(",d*g," ",[c/2,c/2].join(" ")+")"].join("")}),a.opacities.push((d/b).toFixed(2))}}var h,g=2*Math.PI/b;return function(e){h=Math.PI/2-g*e;var f=Math.sin(h),i=Math.cos(h),j=(e/b).toFixed(2);a.data.push({spokesRotation:360*e/b,spokesOpacity:50*j,spokesLeft:(c/2-d)*(1+i),spokesTop:(c/2-d)*(1-f)}),a.opacities.push(j)}},function(a,b){return k.ball.effect(a,b,["path","rect"])}),a("spinning-bubbles",avalon.mix({},k.ball,{width:64,widthInner:54,$zooms:[]}),function(a){var b=k.ball.drawer(a),c=a.count;for(a.$zooms=c>=7?[.2,.4,.8,1,.8,.4,.2]:c>=5?[.2,.8,1,.8,.2]:[1,.1,.1,.1];a.$zooms.length<a.count;)a.$zooms.push(.1);return function(a){b(a)}},function(a,b){var c=(a.width-a.widthInner)/2,d=a.count;return a.svgSupport?k.ball.effect(a,b,["circle","oval"],function(b,e,f){b.attr("r",c*a.$zooms[(e+f)%d])}):k.ball.effect(a,b,["circle","oval"],function(b,c,d){b.css("zoom",a.$zooms[(c+d)%a.count])})}),a("bubbles",avalon.mix({},k["spinning-bubbles"],{height:30,widthInner:50,count:3,interval:360,circleMargin:.5}),function(a){return k["spinning-bubbles"].drawer(a),k.ticks.drawer(a)},k["spinning-bubbles"].effect),a("spinning-spin",avalon.mix({},k.spin,{opacities:[],data:[],radius:1,interval:k.ball.interval,count:8,width:46,widthInner:38,padding:5}),function(a){function b(b){var c=(b/g).toFixed(2);c=c>.6?c:.2,a.opacities.push(c)}var c=360/a.padding*3,d=a.width/2,f=e(d,d-a.widthInner/2,c),g=a.count,h=a.interval,i=360/g;return a.radius=a.width/2-a.widthInner/2,a.svgSupport?(a.svgDur=h*g/1e3+"s",a.arc=f.slice(0,Math.floor((1/g-a.padding/360)*f.length)).join(""),function(c){a.data.push({rotate:"rotate("+i*c+" "+d+" "+d+")",begin:[h*c/1e3,"s"].join("")}),b(c)}):function(c){a.data.push({startangle:c/g*360,endangle:(c+1)/g*360-10}),b(c)}},function(a,b){return k.ball.effect(a,b,["path","arc"])}),a("img",{src:"https://source.qunarzz.com/piao/images/loading_camel.gif",width:52,height:39,miao:0},void 0,void 0);var l=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,m=avalon.ui.loading=function(a,d,e){var g=d.loadingOptions;g.template=g.getTemplate(c,g),k[g.type]||(g.type="ball"),avalon.each(k[g.type],function(a,b){void 0===g[a]&&(g[a]=b)});var j=avalon.define(d.loadingId,function(c){c.height="",c.width="",c.data=[],c.opacities=[],avalon.mix(c,g),c.widgetElement=a,c.svgSupport=l,c.$loadingID=f+""+h,c.$timer="",c.$skipArray=["widgetElement","template","opacities","data"];var d;c.$init=function(){if(!d){d=!0;var b=g.container||j.widgetElement,c=("object"===avalon.type(b)&&1===b.nodeType&&document.body.contains(b)?b:document.getElementById(b))||document.body,f=j.type,h=(i[f]||i.ball)[j.svgSupport?"svg":"vml"];if(j.width=0==j.width?j.height:j.width,j.height=0==j.height?j.width:j.height,j.drawer)for(var k=0,l=j.drawer(j);k<j.count&&l;)l(k),k++;c.appendChild(avalon.parseHTML(j.template.replace("{{MS_WIDGET_HTML}}",h).replace("{{MS_WIDGET_ID}}",j.$loadingID))),avalon.log("avalon请尽快升到1.3.7+"),avalon.scan(c,[j].concat(e)),"function"==typeof g.onInit&&g.onInit.call(a,j,g,e),j._effect()}},c._effect=function(){if(j.toggle){var a=document.getElementById("oni-loading-"+j.$loadingID);if(a){var b=j.effect&&j.effect(j,a);b&&(clearInterval(j.$timer),j.$timer=setInterval(b,j.interval))}}},c.$remove=function(){clearInterval(j.$timer),a.innerHTML=a.textContent=""},c.showLoading=function(){j.toggle||(j.toggle=!0,j._effect())},c.hideLoading=function(){j.toggle=!1},c.destroyLoading=function(){j.toggle=!1,j.$remove()},c.appendTo=function(a){var d=a||c.widgetElement,e=b("modal"+c.$id),f=b("loading"+c.$id);e&&d.appendChild(e),f&&d.appendChild(f)}});return j.$watch("toggle",function(a){a?j._effect():clearInterval(j.$timer)}),f++,j};m.defaults={onInit:avalon.noop,color:"#619FE8",type:"ball",toggle:!0,modal:!0,modalOpacity:.1,modalBackground:"#fff",container:void 0,getTemplate:function(a){return a},$author:"skipper@123"}}()},{}],21:[function(require,module,exports){var template='<li class="oni-state-default oni-menu-item" \r\n    data-repeat-rendered="_rescan" \r\n    ms-repeat-menu="data"   \r\n    ms-class-11="oni-state-active:!!_canActive(menu, $index)" \r\n    ms-class-12="oni-state-disabled:menu.disabled" \r\n    ms-class-13="oni-menu-last:$last" \r\n    ms-class-14="oni-menu-removable:!!_canRemove(menu)" \r\n    ms-class-15="oni-menu-item-{{_depth}}" \r\n    ms-class-16="oni-menu-with-sub oni-menu-with-sub-{{_depth}}:_hasSubMenu(menu)" \r\n    ms-hover="oni-state-hover" \r\n    ms-click-101="_ifEventIsMouseEnter($event, $index)" \r\n    ms-data-sub="_hasSubMenu(menu)" \r\n    ms-data-depth="_depth" \r\n    ms-data-index="$index" \r\n    ms-{{MS_OPTION_EVENT}}-100="activate($event, $index)" \r\n    > \r\n    {{_menuTitle(menu.title, menu, _cutCounter(), cutEnd) | html}}\r\n    <span ms-if="_hasSubMenu(menu)" class="oni-menu-icon">&gt;</span>\r\n	<ul ms-if="_hasSubMenu(menu)" class="oni-menu oni-menu-sub oni-helper-clearfix oni-helper-reset" \r\n		 ms-data-widget-index="$index" \r\n		 ms-class-101="oni-menu-depth-{{_depth+1}}" \r\n		 ms-class-102="oni-helper-hidden:!_canActive(menu, $index)" \r\n		 ms-data-widget="\'menu\'">\r\n	</ul>\r\n</li>';module.exports=function(){function getCnt(){return counter++}function buildData(a,b,c){for(var d,e=[],f=0,c=c||0;d=a[0];){var g=d.getElementsByTagName&&(d.getElementsByTagName("ul")[0]||d.getElementsByTagName("ol")[0]),h={};g?(h.data=buildData(g.children,b,c+1),d.removeChild(g)):h.data="";var i=d.innerHTML,j=avalon(d).data();(i&&i.trim()||g)&&(h.title=i||"",h.disabled=j&&j.disabled,h.active=j&&j.active||f===b.active,h.active&&(b.active=f),e.push(h),f++),d.parentNode.removeChild(d)}return e}function formateData(a){avalon.each(a,function(a,b){if(b&&!b.$id){var c=avalon.mix({disabled:!1,title:"",data:"",active:!1},b);avalon.mix(b,c),Array.isArray(b.data)&&formateData(b.data)}})}function bindClick(a){for(var b in widgetInit)widgetInit[b]&&widgetInit[b](a)}function hasSubMenu(a){return a.getElementsByTagName("ol")[0]||a.getElementsByTagName("ul")[0]}var counter=0,widgetInit,widget=avalon.ui.menu=function(element,data,vmodels){var options=data.menuOptions;options.event="mouseover"===options.event?"mouseenter":options.event,options.template=options.getTemplate(template,options).replace(/\{\{MS_OPTION_EVENT\}\}/,options.event).replace(/\{\{\MS_OPTION_CNT}\}/g,counter),void 0==options.data?options.data=buildData(element.children,options):formateData(options.data);var uid=+new Date,vmodel=avalon.define(data.menuId,function(vm){avalon.mix(vm,options),vm.widgetElement=element,vm._oldActive=options.active,vm._subMenus={},vm.$skipArray=["widgetElement","template","_subMenus","_oldActive"];var inited,outVmodel=vmodels&&vmodels[1],clickKey="fromMenu"+uid;vm.$init=function(a){inited||(inited=!0,outVmodel&&void 0!=outVmodel._depth&&(vmodel._depth=outVmodel._depth+1),element.innerHTML=vmodel.template,1===vmodel._depth&&(element.setAttribute("ms-hover-100","oni-helper-max-index"),avalon(element).addClass("oni-menu oni-helper-clearfix oni-helper-reset"+("v"===vmodel.dir?" oni-menu-vertical":""))),a?a():(avalon.log("avalon请尽快升到1.3.7+"),avalon.scan(element,[vmodel].concat(vmodels)),"function"==typeof options.onInit&&options.onInit.call(element,vmodel,options,vmodels)),"mouseenter"===vmodel.event&&avalon(element).bind("mouseleave",function(){vmodel._restMenu(vmodel)}),"click"===vmodel.event&&(widgetInit||(widgetInit={},avalon(document).bind("click",bindClick)),widgetInit[clickKey]=function(){vmodel._restMenu(vmodel)}),1===vmodel._depth&&avalon(element).bind("click",function(a){a&&a.stopPropagation()}))},vm.$remove=function(){delete widgetInit[clickKey],element.innerHTML=element.textContent=""},vm._canActive=function(a,b){return vmodel.active===b&&!a.disabled},vm.activate=function(e,index){var _index=void 0===index?e:index;if(vmodel.data[_index]&&vmodel.data[_index].disabled!==!0&&!vmodel.disabled&&(vmodel._oldActive=vmodel.active,_index!==vmodel._oldActive&&vmodel.resetSubMenus(),vmodel.active=_index,e&&void 0!==index&&"click"===vmodel.event)){var activeData=vmodel.getActiveList(),last=activeData[activeData.length-1],node=hasSubMenu(this);if(node&&last&&last[1]===eval(this.getAttribute("data-index"))&&vmodel._oldActive!==vmodel.active)return e&&e.preventDefault(),void(e&&e.stopPropagation());vmodel._onSelect.call(this,e,activeData)}},vm._onSelect=function(a,b){if(1===vmodel._depth){for(var c=a.srcElement||a.target;c&&"li"!==c.tagName.toLowerCase();)c=c.parentNode;var d=avalon(c),e=d.data(),f=!!hasSubMenu(c);realSelect=b.slice(0,e.depth),options.onSelect.call(c,vmodel,realSelect,f),vmodel._restMenu(vmodel)}},vm._ifEventIsMouseEnter=function(a){"click"!==vmodel.event&&1===vmodel._depth&&vmodel._onSelect(a,vmodel.getActiveList())},vm._clickActive=function(a,b){if(vmodel.active===b){var c=avalon(this),d=c.data();vmodel._onClickActive.call(this,a,vmodel.active,vmodel.data,d&&d.sub)}},vm._getNodeByData=function(a){if(a.length>0){var b=vmodel._subMenus[a[0]];if(b)return b._getNodeByData(a.slice(1));for(var c=vmodel.widgetElement.children,d=0,e=0;c[++d];){var f=c[d-1];if("li"===f.tagName.toLowerCase()){if(e==vmodel.active)return f;e++}}}return!1},vm.getActiveList=function(a){var b=a||[];if(vmodel.active!==!1&&vmodel.data[vmodel.active]){b.push([vmodel.data[vmodel.active].$model,vmodel.active]);var c=vmodel._subMenus[vmodel.active];c&&c.getActiveList(b)}return b},vm.setActiveList=function(arr){if(arr){if(!Array.isArray(arr))var arr=[arr].join("").split(",");if(arr.length){if(vmodel.activate(eval(arr[0])),vmodel.active===!1)return void vmodel.resetSubMenus();if(arr.length){var sub=vmodel._subMenus[vmodel.active];sub&&sub.setActiveList(arr.slice(1))}}}},vm._hasSubMenu=function(a){return!!(a&&a.data&&Array.isArray(a.data)&&a.data.length)},vm._rescan=function(){vmodel._subMenus={};for(var a=vmodel.widgetElement.children,b=0,c=0,d=a.length;d>c;c++){var e=a[c];if(1===e.nodeType&&"li"===e.tagName.toLowerCase()){var f=e.getElementsByTagName("ul")[0]||e.getElementsByTagName("ol")[0];if(f){var g=avalon(f),h=g.data();if("menu"===h.widget){var i=avalon.mix({},options),j=data.menuId+"r"+getCnt();f.setAttribute("ms-widget","menu, $"+uid+c);var k=vmodel.data[h.widgetIndex],l={};k&&(l=avalon.mix(i,{data:k.$model.data})),l.index=h.widgetIndex;var m=avalon.define(j,function(a){a.menu=l,a.$skipArray=["menu"]});avalon.scan(f,[m,vmodel].concat(vmodels)),vmodel._subMenus[b]=avalon.vmodels["$"+uid+c]}}b++}}},vm.resetSubMenus=function(){avalon.each(vmodel._subMenus,function(a,b){vmodel._restMenu(b),b.resetSubMenus()})},vm._restMenu=function(a){a.menuResetter(a),a._oldActive=a.active},vm._cutCounter=avalon.noop,vm._canRemove=avalon.noop});return vmodel};widget.defaults={active:!1,event:"mouseenter",disabled:!1,_depth:1,index:0,dir:"h",onInit:avalon.noop,menuResetter:function(a){a.active=!1},getTemplate:function(a){return a},_menuTitle:function(a){return a},onSelect:avalon.noop,cutEnd:"",$author:"skipper@123"}}()},{}],22:[function(a,b){var c='<div class="oni-dropdown"\r\n     ms-class="oni-dropdown-disabled:!enable"\r\n     ms-class-1="oni-state-focus: focusClass"\r\n     ms-css-width="{{width}}"\r\n     ms-hover="oni-state-hover"\r\n     ms-keydown="_keydown"\r\n     tabindex="0">\r\n    <div class="oni-dropdown-source">\r\n        <div class="oni-dropdown-input"\r\n             ms-title="title" ms-css-width="titleWidth" id="title-MS_OPTION_ID">\r\n            <i class="oni-icon"\r\n               ms-class="{{currentOption.data.iconClass}}">{{currentOption.data.font|html}}</i>\r\n        </div>\r\n        <div class="oni-dropdown-icon-wrap">\r\n            <i class="oni-dropdown-icon oni-icon oni-icon-angle-up"\r\n               ms-if="toggle">&#xf106;</i>\r\n            <i class="oni-dropdown-icon oni-icon oni-icon-angle-down"\r\n               ms-if="!toggle">&#xf107;</i>\r\n        </div>\r\n    </div>\r\n</div>\r\nMS_OPTION_TEMPLATE\r\n<div class="oni-dropdown"\r\n     ms-class="oni-dropdown-menu:!multiple"\r\n     ms-css-width="{{listWidth}}"\r\n     ms-mouseenter="_listenter"\r\n     ms-mouseleave="_listleave"\r\n     ms-visible="toggle||multiple">\r\n    <div class="oni-dropdown-menu-inner"\r\n         ms-css-width="menuWidth"\r\n         ms-css-height="menuHeight"\r\n         ms-widget="scrollbar,scrollbar-MS_OPTION_ID" id="menu-MS_OPTION_ID">\r\n        <div class="oni-scrollbar-scroller"\r\n             id="list-MS_OPTION_ID">\r\n            <div ms-repeat="data"  class="oni-dropdown-item"\r\n                 data-repeat-rendered="updateScrollbar"\r\n                 ms-click-12="_select($index, $event)"\r\n                 ms-title="el.title||el.label"\r\n                 ms-hover="oni-state-hover: el.enable"\r\n                 ms-class-1="oni-state-disabled:!el.enable"\r\n                 ms-class-2="oni-state-active:isActive(el) "\r\n                 ms-class-4="oni-dropdown-group:el.group"\r\n                 ms-class-5="oni-dropdown-divider:el.group && !$first"\r\n                 data-repeat-rendered="updateScrollbar"\r\n                    >{{el.label|sanitize|html}}</div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';a("../switchdropdown/avalon.switchdropdown"),a("../avalon.getModel"),b.exports=function(){var a=avalon.ui.miniswitch=function(a,b,c){var d=b.miniswitchOptions,e=avalon.define("miniswitch"+setTimeout("1"),function(b){b.$opts=d,b.$init=function(b){b?b():(avalon.log("请尽快升到avalon1.3.7+"),avalon.scan(a,[e].concat(c)),"function"==typeof d.onInit&&d.onInit.call(a,e,d,c))}});return avalon(a).attr("ms-widget",["switchdropdown",b.miniswitchId,"$opts"].join()),e};a.version="1.0",a.defaults={width:40,listWidth:100,height:60,enable:!0,readOnly:!1,data:[],value:"",getTemplate:function(){return c},onInit:avalon.noop}}()},{"../avalon.getModel":3,"../switchdropdown/avalon.switchdropdown":35}],23:[function(a,b){b.exports=function(){function a(a,b){if("pending"===a._state)if(a._state="fulfilled",b&&"function"==typeof b.then){var d=b instanceof h?"_then":"then";b[d](function(b){c(a,b)},function(b){a._state="rejected",c(a,b)})}else c(a,b)}function b(a,b){"pending"===a._state&&(a._state="rejected",c(a,b))}function c(a,b){a._fired=!0,a._value=b,i(function(){a._callbacks.forEach(function(b){a._fire(b.onSuccess,b.onFail)})})}function d(a,b){b=Array.isArray(b)?b:[];var c,d=0,e=[];return new h(function(f,g){function h(h,i){h.then(function(g){c||(e[i]=g,d++,(a||d>=b.length)&&(f(a?g:e),c=!0))},function(a){c=!0,g(a)})}b.length||f();for(var i=0,j=b.length;j>i;i++)h(b[i],i)})}function e(a){return this.then(a)}function f(a){return this.then(null,a)}var g;if(/native code/.test(window.Promise))g=window.Promise;else{var h=function(c){this._callbacks=[];var d=this;if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof c)throw new TypeError("not a function");c(function(b){a(d,b)},function(a){b(d,a)})},i="function"==typeof window.setImmediate?function(a){window.setImmediate(a)}:function(a){window.setTimeout(a,0)};h.resolve=function(a){return new h(function(b){b(a)})},h.reject=function(a){return new h(function(b,c){c(a)})},h.prototype={constructor:h,_state:"pending",_fired:!1,_fire:function(a,b){if("rejected"===this._state){if("function"!=typeof b)throw this._value;b(this._value)}else"function"==typeof a&&a(this._value)},_then:function(a,b){if(this._fired){var c=this;i(function(){c._fire(a,b)})}else this._callbacks.push({onSuccess:a,onFail:b})},then:function(a,b){var c=this;return new h(function(d,e){c._then(function(b){if("function"==typeof a)try{b=a(b)}catch(c){return void e(c)}d(b)},function(a){if("function"==typeof b){try{a=b(a)}catch(c){return void e(c)}d(a)}else e(a)})})},done:e,"catch":f,fail:f},h.all=function(a){return d(!1,a)},h.race=function(a){return d(!0,a)},g=h}return g.prototype.done=e,g.prototype.fail=f,g.any=g.race,g.defer||(g.defer=function(){var a={};return a.promise=new this(function(b,c){a.resolve=b,a.reject=c}),a}),window.Promise=avalon.Promise=g}()},{}],24:[function(a,b){var c=a("../avalon.getModel"),d='<div class="oni-notice" ms-class="{{typeClass}}" ms-css-height="height" ms-visible="toggle">\n    <div class="oni-notice-inner">\n        <div class="oni-notice-header" ms-if="!!header">{{title|html}}</div>\n        <div class="oni-notice-content">\n            <span class="js_notice_content">{{content|html}}</span>\n            <span class="oni-notice-close js_notice_close" \n                ms-if="hasCloseBtn"\n                ms-click="_close">关闭</span>\n        </div>\n    </div>\n</div>\n<div ms-if="_isAffix" ms-css-width="noticeAffixWidth" ms-css-height="noticeAffixHeight" ms-css-display="affixPlaceholderDisplay"></div>\n';b.exports=function(){function a(){for(var a=c(document).scrollTop(),b=0,d=j.length;d>b;b++){var e=j[b],f=e.style,g=c(e),h=e.vmodel;if(a>=k[b][2]){if("fixed"!==f.position||l&&"absolute"!==f.position){for(var i=0,n=0,o=1;b>=o;o++)i+=k[o-1][0];i=l?a+i:i,n=k[b][3],g.css({width:k[b][1]+"px",top:i+"px",left:n+"px",position:l?"absolute":"fixed","z-index":m}),h.affixPlaceholderDisplay="block"}}else g.css("position","static"),h.affixPlaceholderDisplay="none"}}function b(){for(var a,b,d=document.body.children,e=10,f=0;b=d[f++];)1===b.nodeType&&(a=~~c(b).css("z-index"),a&&(e=Math.max(e,a)));return e+1}function e(a){return a.indexOf("-")<0&&a.indexOf("_")<0?a:a.replace(/[-_][^-_]/g,function(a){return a.charAt(1).toUpperCase()})}function f(a){var b,c=["","-webkit-","-o-","-moz-","-ms-"],d=document.documentElement.style;for(b in c)if(camelCase=e(c[b]+a),camelCase in d)return!0;return!1}function g(a,b){function c(){return d=a?d+1:d-1,0>d?void(b.height=0):d>e?(b.height=e,void setTimeout(function(){b.$fire("elementHeightOk")},600)):(b.height=d,void setTimeout(c,0))}var d,e=b.elementHeight;f("transition")?(d=a?e:0,a?b.height=d:setTimeout(function(){b.height=d},10),d&&setTimeout(function(){b.$fire("elementHeightOk")},600)):(d=a?0:e,c())}var h=d,i=[],j=[],k=[],l=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6"),m=0,n=c.ui.notice=function(d,e,f){function l(){z.timer&&(window.clearTimeout(z.$closeTimer),z.$closeTimer=window.setTimeout(function(){z.toggle=!1},z.timer))}function n(){if(z._isAffix){var b=c(t),d=b.offset(),e=t.offsetWidth,f=t.offsetHeight;z.noticeAffixWidth=e,z.noticeAffixHeight=f,t.vmodel=z,j.push(t),k.push([f,e,d.top,d.left]),a()}}function o(){setTimeout(function(){var a,b=document.createElement("div"),d=t.cloneNode(!0),e=c(t).innerWidth(),f=t.parentNode;if(!e)for(;f&&(1===f.nodeType&&(e=c(f).innerWidth()),!e);)f=f.parentNode;b.style.position="absolute",b.style.height=0,document.body.appendChild(b),b.appendChild(d),a=c(d),a.css({visibility:"hidden",width:e,height:"auto"}),z.elementHeight=a.height(),document.body.removeChild(b)},10)}function p(){for(var a=[],b=z.container,d=!1,e=0,f=i.length;f>e;e++){var g=i[e];if(g[2]===b){if(d=!0,b=z.isPlace?g[0]:g[1],!b){var h=document.createElement("div"),j=z.container.childNodes[0];j?z.container.insertBefore(h,j):z.container.appendChild(h),z.isPlace?(g[0]=b=h,c(h).addClass("oni-notice-flow")):(c(h).addClass("oni-notice-detach"),g[1]=b=h)}break}}if(!d){var h=document.createElement("div");if(z.isPlace){var j=b.childNodes[0];j?b.insertBefore(h,j):b.appendChild(h)}else b.appendChild(h);c(h).addClass(z.isPlace?"oni-notice-flow":"oni-notice-detach"),a[2]=b,z.isPlace?a[0]=b=h:a[1]=b=h,i.push(a)}return b}var q=e.noticeOptions,r=h;q.animate?(r=h.replace('ms-visible="toggle"',""),q.height=0):q.height="auto",q.template=q.getTemplate(r,q);var s=q.container;q.container=s?1===s.nodeType?s:document.getElementById(s.substr(1)):d;var t=null,u=d.innerHTML.trim(),v=q.onShow,w=null,x=q.onHide,y=null;"string"==typeof v&&(w=c.getModel(v,f),q.onShow=w&&w[1][w[0]]||c.noop),"string"==typeof x&&(y=c.getModel(x,f),q.onHide=y&&y[1][y[0]]||c.noop),d.innerHTML="","notice title"!==q.header&&"notice title"===q.title&&(q.title=q.header);var z=c.define(e.noticeId,function(h){c.mix(h,q),h.$closeTimer=0,h.$skipArray=["template","widgetElement","_isAffix","container","elementHeight"],h.elementHeight=0,h.content=h.content||u,h._isAffix=h.isPlace&&h.isAffix,h.widgetElement=d,h.typeClass=h[h.type+"Class"],h.noticeAffixWidth=0,h.noticeAffixHeight=0,h.affixPlaceholderDisplay="none",h.isPlace?h.container:h.container=document.body,h._show=function(a){l(),n(),z.animate&&g(a,z),z.onShow.call(d,e,f)},h.$watch("elementHeightOk",function(){z.height="auto"}),h._close=function(){z.toggle=!1},h._hide=function(b){var h=j.indexOf(t),i=c(t);if(z.animate&&(z.elementHeight=i.innerHeight(),i.css("height",z.elementHeight),g(b,z)),-1!==h){t.style.position="static",j.splice(h,1),k.splice(h,1);
for(var l=0,m=j.length;m>l;l++)j[l].style.position="static";m&&a()}z.onHide.call(d,e,f)},h.setContent=function(a){z.content=a},h.$init=function(){var a=null,e=c.parseHTML(q.template),g=e.lastChild;if(m||(m=b()),t=e.firstChild,a=p(),a.appendChild(t),!z.isPlace){var h=c(q.container),i=c(h[0].parentNode);t.style.width=(h.width()||i.width())+"px",t.style.position="relative",t.style.left=h.offset().left+"px"}z._isAffix&&(a.appendChild(g),c.scan(g,[z])),c.scan(t,[z].concat(f)),"function"==typeof q.onInit&&q.onInit.call(d,z,q,f),z.animate&&o()},h.$remove=function(){for(var a=t.parentNode,b=0,c=i.length;c>b;b++){var d=i[b];if(d[2]===q.container)break}if(z._isAffix){var e=t.nextSibling;a.removeChild(e)}t.innerHTML=t.textContent="",a.removeChild(t),a.children.length||(a.parentNode.removeChild(a),d[0]=void 0)}});return z.$watch("toggle",function(a){a?z._show(a):z._hide(a)}),z.$watch("type",function(a){z.typeClass=z[a+"Class"]}),z.$watch("header",function(a){z.title=a}),z.$watch("successClass",function(a){z.typeClass=a}),z.$watch("errorClass",function(a){z.typeClass=a}),z.$watch("infoClass",function(a){z.typeClass=a}),z.$watch("zIndex",function(b){m=b,a()}),z.$watch("content",function(){z.animate&&o()}),z};return c.bind(window,"scroll",function(){a()}),n.version=1,n.defaults={content:"",container:"",type:"info",header:"notice title",title:"notice title",timer:0,hasCloseBtn:!0,toggle:!1,isPlace:!0,isAffix:!1,onShow:c.noop,onHide:c.noop,successClass:"oni-notice-info",errorClass:"oni-notice-danger",infoClass:"",widgetElement:"",zIndex:"auto",animate:!0,getTemplate:function(a){return a}},c}()},{"../avalon.getModel":3}],25:[function(a,b){var c='<div class="oni-pager" onselectstart="return false;" unselectable="on" ms-visible="!!totalPages">\r\n    <span class="oni-pager-prev"\r\n          ms-class="oni-state-disabled:firstPage==1"\r\n          ms-if="isShowPrev()"\r\n          ms-title="getTitle(\'prev\')" \r\n          ms-click="jumpPage($event,\'prev\')" \r\n          ms-text="prevText"\r\n          ></span>\r\n    <span class="oni-pager-item"\r\n          ms-visible="firstPage!==1" \r\n          ms-title="getTitle(\'first\', currentPage)" \r\n          ms-click="jumpPage($event,\'first\')" \r\n          ms-class-oni-state-active="currentPage == 1"\r\n          ms-hover="oni-state-hover">1</span>\r\n    <span class=\'oni-pager-omit\'\r\n          ms-if="showFirstOmit" \r\n          ms-text="ellipseText"\r\n          ></span>\r\n    <span  class="oni-pager-item" \r\n           ms-repeat="pages" \r\n           ms-title="getTitle(el, currentPage)"\r\n           ms-hover="oni-state-hover"\r\n           ms-click="jumpPage($event,el)"\r\n           ms-class-oni-state-active="el == currentPage" \r\n           ms-text="el"\r\n           ></span>\r\n    <span class="oni-pager-omit"\r\n          ms-if="showLastOmit" \r\n          ms-text="ellipseText"\r\n          ></span>\r\n    <span class="oni-pager-item "\r\n          ms-visible="lastPage!==totalPages" \r\n          ms-title="getTitle(\'last\', currentPage, totalPages)" \r\n          ms-hover="oni-state-hover" \r\n          ms-click="jumpPage($event,\'last\')"  \r\n          ms-text="totalPages"\r\n          ></span>\r\n    <span class="oni-pager-next"\r\n          ms-if="isShowNext()" \r\n          ms-title="getTitle(\'next\')"\r\n          ms-click="jumpPage($event,\'next\')" \r\n          ms-class="oni-state-disabled:lastPage==totalPages"\r\n          ms-text="nextText"\r\n          ></span>\r\n    <div class="oni-pager-jump" ms-if="showJumper">\r\n        <span class="oni-pager-text">共{{totalPages}}页，到第</span>\r\n        <div class="oni-pager-textbox-wrapper">\r\n            <input class="oni-pager-textbox" ms-duplex="_currentPage" data-duplex-event="change" ms-keyup="changeCurrentPage">\r\n        </div>\r\n        <span class="oni-pager-text">页</span>\r\n        <button class="oni-pager-button" ms-click="changeCurrentPage" >确定</button>\r\n    </div>\r\n</div>\r\n';b.exports=function(){function a(a,b){for(var c={},d=0,e=a.length;e>d;d++){var f=a[d];c[f]={action:"del",el:f}}for(var d=0,g=b.length;g>d;d++){var f=b[d];c[f]=c[f]?{action:"retain",el:f}:{action:"add",el:f}}var h=[];for(var d in c)h.push({action:c[d].action,el:c[d].el});h.sort(function(a,b){return a.el-b.el}),h.forEach(function(a,b){a.index=b});for(var f,i=[],d=0;f=h[d++];)switch(f.action){case"add":a.splice(f.index,0,f.el);break;case"del":i.unshift(f)}for(var f,d=0;f=i[d++];)a.splice(f.index,1)}function b(a){var b=a.currentPage,c=Math.ceil(a.totalItems/a.perPages),d=[],e=a.showPages,f=b,g=b;if(a.totalPages=c,e>=c)for(var h=1;c>=h;h++)d.push(h);else for(d.push(b);;){if(d.length>=e)break;if(f>1&&d.unshift(--f),d.length>=e)break;c>g&&d.push(++g)}return a.firstPage=d[0]||1,a.lastPage=d[d.length-1]||1,a.showFirstOmit=a.firstPage>2,a.showLastOmit=a.lastPage<c-1,d}var d=avalon.ui.pager=function(d,e,f){var g=e.pagerOptions,h=g.options;g.options=Array.isArray(h)?h.map(function(a){var b={};switch(typeof a){case"number":case"string":return b.value=a,b.text=a,b;case"object":return a}}):[],f.cb&&(c=c.replace(/ms-title/g,"ms-attr-title")),g.template=g.getTemplate(c,g),g._currentPage=g.currentPage;var i=avalon.define(e.pagerId,function(c){avalon.mix(c,g),c.widgetElement=d,c.$skipArray=["showPages","widgetElement","template","ellipseText","alwaysShowPrev","alwaysShowNext"],c.$init=function(a){var b=g.template;d.style.display="none",setTimeout(function(){d.innerHTML=b,d.style.display="block",a?a():(avalon.log("avalon请尽快升到1.3.7+"),avalon.scan(d,[i].concat(f)),"function"==typeof g.onInit&&g.onInit.call(d,i,g,f))},100)},c.$remove=function(){d.innerHTML=d.textContent=""},c.jumpPage=function(e,f){if(e.preventDefault(),f!==c.currentPage){switch(f){case"first":c.currentPage=1;break;case"last":c.currentPage=c.totalPages;break;case"next":c.currentPage++,c.currentPage>c.totalPages&&(c.currentPage=c.totalPages);break;case"prev":c.currentPage--,c.currentPage<1&&(c.currentPage=1);break;default:c.currentPage=f}-1===this.className.indexOf("state-disabled")&&(c.onJump.call(d,e,c),a(c.pages,b(c)))}},c.$watch("totalItems",function(){a(c.pages,b(c))}),c.$watch("perPages",function(){c.currentPage=1,a(c.pages,b(c))}),c.$watch("currentPage",function(d){i._currentPage=d,a(c.pages,b(c))}),c.isShowPrev=function(){var a=c.alwaysShowPrev,b=c.firstPage;return a||1!==b},c.isShowNext=function(){var a=c.alwaysShowNext,b=c.lastPage,d=c.totalPages;return a||b!==d},c.changeCurrentPage=function(a,e){if("keyup"===a.type){if(e=this.value,13!==a.keyCode)return}else e=i._currentPage;e=parseInt(e,10)||1,e>i.totalPages||1>e||(i.currentPage=e,i.pages=b(i),i.onJump.call(d,a,c))},c.pages=[],c.getPages=b});return i.pages=b(i),i};return d.defaults={perPages:10,showPages:10,currentPage:1,_currentPage:1,totalItems:200,totalPages:0,pages:[],nextText:">",prevText:"<",ellipseText:"…",firstPage:0,lastPage:0,alwaysShowNext:!1,alwaysShowPrev:!1,showFirstOmit:!1,showLastOmit:!1,showJumper:!1,getTemplate:function(a){return a},options:[],onJump:function(){},getTitle:function(a,b,c){switch(a){case"first":return 1==b?"当前页":"跳转到第一页";case"prev":return"跳转到上一页";case"next":return"跳转到下一页";case"last":return b==c?"当前页":"跳转到最后一页";default:return a===b?"当前页":"跳转到第"+a+"页"}}},avalon}()},{}],26:[function(a,b){b.exports=function(){function a(a){a=avalon.mix({},a);var e,f,i,j,p,q,r=avalon(a.of),u=h(a.within),v=g(u),w=(a.collision||"flip").split(" "),x={};q=b(r),r[0].preventDefault&&(a.at="left top"),f=q.width,i=q.height,j=q.offset,p=avalon.mix({},j),s.forEach(function(b){var c,d,e=(a[b]||"").split(" ");1===e.length&&(e=l.test(e[0])?e.concat(["center"]):m.test(e[0])?["center"].concat(e):["center","center"]),e[0]=l.test(e[0])?e[0]:"center",e[1]=m.test(e[1])?e[1]:"center",c=n.exec(e[0]),d=n.exec(e[1]),x[b]=[c?c[0]:0,d?d[0]:0],a[b]=[o.exec(e[0])[0],o.exec(e[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===a.at[0]?p.left+=f:"center"===a.at[0]&&(p.left+=f/2),"bottom"===a.at[1]?p.top+=i:"center"===a.at[1]&&(p.top+=i/2),e=c(x.at,f,i),p.left+=e[0],p.top+=e[1];var y,z=this[0],A=z.offsetWidth,B=z.offsetHeight,C=d(this,"marginLeft"),D=d(this,"marginTop"),E=A+C+d(this,"marginRight")+v.width,F=B+D+d(this,"marginBottom")+v.height,G=avalon.mix({},p),H=c(x.my,A,B);return"right"===a.my[0]?G.left-=A:"center"===a.my[0]&&(G.left-=A/2),"bottom"===a.my[1]?G.top-=B:"center"===a.my[1]&&(G.top-=B/2),G.left+=H[0],G.top+=H[1],G.left=k(G.left),G.top=k(G.top),y={marginLeft:C,marginTop:D},["left","top"].forEach(function(b){t[b](G,{targetWidth:f,targetHeight:i,elemWidth:A,elemHeight:B,collisionPosition:y,collisionWidth:E,collisionHeight:F,offset:[e[0]+H[0],e[1]+H[1]],my:a.my,at:a.at,within:u,elem:z})}),this.offset(G)}function b(a){var b=a[0];return 9===b.nodeType?{width:a.width(),height:a.height(),offset:{top:0,left:0}}:avalon.isWindow(b)?{width:a.width(),height:a.height(),offset:{top:a.scrollTop(),left:a.scrollLeft()}}:b.preventDefault?{width:0,height:0,offset:{top:b.pageY,left:b.pageX}}:{width:b.offsetWidth,height:b.offsetHeight,offset:a.offset()}}function c(a,b,c){return[parseFloat(a[0])*(p.test(a[0])?b/100:1),parseFloat(a[1])*(p.test(a[1])?c/100:1)]}function d(a,b){return parseInt(a.css(b),10)||0}function e(a){var b,c,d,e,f,g,h,i=this[0],j=this.css("position");return"static"===j&&(i.style.position="relative"),f=this.offset(),d=this.css("top"),g=this.css("left"),h=("absolute"===j||"fixed"===j)&&(d+g).indexOf("auto")>-1,h?(b=this.position(),e=b.top,c=b.left):(e=parseFloat(d)||0,c=parseFloat(g)||0),null!=a.top&&(i.style.top=a.top-f.top+e+"px"),null!=a.left&&(i.style.left=a.left-f.left+c+"px"),this}function f(){if(void 0!==i)return i;var a,b,c=avalon.parseHTML("<div style='display:block;position:absolute;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>").firstChild,d=c.children[0];return document.body.appendChild(c),a=d.offsetWidth,c.style.overflow="scroll",b=d.offsetWidth,a===b&&(b=c.clientWidth),document.body.removeChild(c),i=a-b}function g(a){var b=a.isWindow?"":a.element.css("overflow-x"),c=a.isWindow?"":a.element.css("overflow-y"),d="scroll"===b||"auto"===b&&a.width<a.element[0].scrollWidth,e="scroll"===c||"auto"===c&&a.height<a.element[0].scrollHeight;return{width:e?f():0,height:d?f():0}}function h(a){var b=avalon(a||window),c=avalon.isWindow(b[0]);return{element:b,isWindow:c,offset:b.offset()||{left:0,top:0},scrollLeft:b.scrollLeft(),scrollTop:b.scrollTop(),width:c?b.width():b[0].offsetWidth,height:c?b.height():b[0].offsetHeight}}var i,i,j=Math.abs,k=Math.round,l=/left|center|right/,m=/top|center|bottom/,n=/[\+\-]\d+(\.[\d]+)?%?/,o=/^\w+/,p=/%$/,q=avalon.fn.position,r=avalon.fn.offset;avalon.fn.offset=function(a){return"object"===avalon.type(a)?e.call(this,a):r.call(this)};var s=["my","at"],t={left:function(a,b){var c,d,e=b.within,f=e.offset.left+e.scrollLeft,g=e.width,h=e.isWindow?e.scrollLeft:e.offset.left,i=a.left-b.collisionPosition.marginLeft,k=i-h,l=i+b.collisionWidth-g-h,m="left"===b.my[0]?-b.elemWidth:"right"===b.my[0]?b.elemWidth:0,n="left"===b.at[0]?b.targetWidth:"right"===b.at[0]?-b.targetWidth:0,o=-2*b.offset[0];0>k?(c=a.left+m+n+o+b.collisionWidth-g-f,(0>c||c<j(k))&&(a.left+=m+n+o)):l>0&&(d=a.left-b.collisionPosition.marginLeft+m+n+o-h,(d>0||j(d)<l)&&(a.left+=m+n+o))},top:function(a,b){var c,d,e=b.within,f=e.offset.top+e.scrollTop,g=e.height,h=e.isWindow?e.scrollTop:e.offset.top,i=a.top-b.collisionPosition.marginTop,k=i-h,l=i+b.collisionHeight-g-h,m="top"===b.my[1],n=m?-b.elemHeight:"bottom"===b.my[1]?b.elemHeight:0,o="top"===b.at[1]?b.targetHeight:"bottom"===b.at[1]?-b.targetHeight:0,p=-2*b.offset[1];0>k?(d=a.top+n+o+p+b.collisionHeight-g-f,a.top+n+o+p>k&&(0>d||d<j(k))&&(a.top+=n+o+p)):l>0&&(c=a.top-b.collisionPosition.marginTop+n+o+p-h,a.top+n+o+p>l&&(c>0||j(c)<l)&&(a.top+=n+o+p))}};return avalon.fn.position=function(b){return"object"===avalon.type(b)?a.call(this,b):q.call(this)},avalon}()},{}],27:[function(a,b){b.exports=function(){var a=avalon.ui.preview=function(a,b,c){function d(a,b){a.style.width=b.width+"px",a.style.height=b.height+"px",a.className=b.className}function e(a,b,c){var e=new Image;a.appendChild(e),d(e,c),e.src=b}var f,g=b.previewOptions,h=g.fileInput;"string"==typeof h&&(h=document.getElementById(h));var i=!1;try{1===h.nodeType&&"INPUT"===h.tagName&&"file"===h.type&&(i=!0)}catch(j){}if(i===!1)throw new Error("fileInput必须是input[type=file]元素节点或其ID值");g.fileInput=h;var k=avalon.oneObject(["image/gif","image/png","image/jpeg"]),l=avalon.define(b.previewId,function(b){avalon.mix(b,g),b.$skipArray=["fileInput","widgetElement"],b.widgetElement=a,b.$init=function(){var i=[l].concat(c);f=avalon.bind(h,"change",function(){for(var c,f=[],g=h.files||[],i=0;c=g[i++];)k[c.type]&&f.push(c);if(f.forEach(function(c){if(window.FileReader){var d=new FileReader;return d.onload=function(c){e(a,c.target.result,b)},d.readAsDataURL(c)}var f;return void 0!==window.createObjectURL?f=window.createObjectURL(c):void 0!==window.URL?f=window.URL.createObjectURL(c):void 0!==window.webkitURL&&(f=window.webkitURL.createObjectURL(c)),"string"==typeof f?e(a,f,b):void 0}),0===f.length&&document.selection){h.select();var j=document.selection.createRange().text;document.selection.empty();var l=document.createElement("div");a.appendChild(l),d(l,b),l.style.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(sizingMethod=scale)",l.filters.item("DXImageTransform.Microsoft.AlphaImageLoader").src=j}}),avalon.scan(a,i),"function"==typeof g.onInit&&g.onInit.call(a,l,g,c)},b.$remove=function(){avalon.unbind(h,"change",f),avalon.log("at $remove")}});return l};return a.vertion=1,a.defaults={width:200,height:160,className:""},avalon}()},{}],28:[function(a,b){var c='<div ms-if="!circle" class="oni-progressbar oni-helper-reset oni-helper-clearfix oni-widget oni-widget-content oni-progressbar-normal" 	  ms-class-100="oni-progressbar-indeterminate:indeterminate" \r\n	 ms-class-101="oni-progressbar-haslabel:label" \r\n	 ms-class-102="oni-progressbar-right:inTwo" \r\n	 ms-visible="toggle">\r\n	<div ms-class-100="oni-helper-hidden:inTwo" class="oni-progressbar-label" ms-if="label">{{_labelShower(value, \'l1\') | html}}\r\n		<b ms-if="!inTwo" class="oni-progressbar-arrow"></b>\r\n	</div>\r\n	<div class="oni-progressbar-bar" ms-css-width="{{_cssMaker()}}">\r\n		<div class="oni-progressbar-label" ms-if="_showLabel(label, inTwo)">{{_labelShower(value) | html}}\r\n		<b ms-if="inTwo" class="oni-progressbar-arrow"></b></div>\r\n		<div class="oni-progressbar-overlay" ms-if="_indeterminate()">       \r\n		</div>\r\n	</div>\r\n	<div class="oni-progressbar-bar oni-progressbar-bar-right" ms-if="inTwo" ms-css-width="{{_cssMaker(\'inTwo\')}}">\r\n		<div class="oni-progressbar-label" ms-if="_showLabel(label, inTwo)">\r\n		<div class="oni-progressbar-overlay" ms-if="_indeterminate()">\r\n		</div>{{_labelShower(value, "inTwo") | html}}\r\n		<b ms-if="inTwo" class="oni-progressbar-arrow"></b></div>\r\n	</div>\r\n</div>\r\n<div ms-if="circle" class="oni-progressbar oni-helper-reset oni-helper-clearfix oni-widget oni-widget-content oni-progressbar-circle" ms-class-100="oni-progressbar-indeterminate:indeterminate" ms-class-101="oni-progressbar-haslabel:label" ms-css-height="circleRadius*2+\'px\'" ms-css-width="circleRadius*2+\'px\'">\r\n	<div class="oni-helper-hidden oni-progressbar oni-progressbar-circle-par"></div>\r\n	<div class="oni-progressbar-hidden oni-progressbar-circle-bar"></div>\r\n	<svg ms-if="svgSupport"\r\n	width="100%" \r\n	height="100%" \r\n	style="position:absolute;z-index:3;" \r\n	version="1.1" \r\n	xmlns="http://www.w3.org/2000/svg">\r\n		<path ms-attr-d="circleCoordinates" \r\n		ms-if="circleCoordinates" \r\n		ms-attr-stroke="circleBorderColor" \r\n		ms-attr-stroke-width="circleBorderWidth" \r\n		stroke-linejoin="round" ms-attr-fill="circleColor"></path>\r\n		<path ms-if="barCoordinates" \r\n		ms-attr-d="barCoordinates" \r\n		ms-attr-stroke="circleBarColor" \r\n		ms-attr-stroke-width="circleBorderWidth" \r\n		stroke-linejoin="round" \r\n		fill="none"></path>\r\n	</svg>\r\n	<v:arc ms-if="!svgSupport"  \r\n    filled="false" \r\n    stroked="true" \r\n    ms-css-left="circleBorderWidth+\'px\'" \r\n    ms-css-top="circleBorderWidth+\'px\'" \r\n    ms-css-height="(circleRadius-circleBorderWidth)*2+\'px\'" \r\n    ms-css-width="(circleRadius-circleBorderWidth)*2+\'px\'" \r\n    ms-attr-strokecolor="circleBarColor" \r\n    ms-attr-strokeweight="circleBorderWidth +\'px\'" \r\n    style="position:absolute;z-index:3;behavior:url(#default#VML);text-indent:-1000px;overflow:hidden;" \r\n    startangle="0" \r\n    ms-attr-endangle="angel">\r\n	</v:arc>\r\n   	<v:oval ms-if="!svgSupport"  \r\n	stroked="true" \r\n    ms-css-left="circleBorderWidth+\'px\'" \r\n    ms-css-top="circleBorderWidth+\'px\'" \r\n	ms-css-height="(circleRadius-circleBorderWidth)*2+\'px\'" \r\n	ms-css-width="(circleRadius-circleBorderWidth)*2+\'px\'" \r\n	ms-attr-fillcolor="circleColor" \r\n	ms-attr-strokecolor="circleBorderColor" \r\n	ms-attr-strokeweight="circleBorderWidth+\'px\'" \r\n	style="position:absolute;z-index:2;behavior:url(#default#VML);"></v:oval>\r\n    <div class="oni-progressbar-label" \r\n	ms-css-line-height="circleRadius*2-4+\'px\'" \r\n    ms-if="label">{{_labelShower(value) | html}}</div>\r\n</div>';b.exports=function(){function a(a,b){for(var c,d,e,f,g=[],a=a-b,h=0;100>=h;h++)c=Math.PI/2-Math.PI/50*h,d=Math.cos(c)*a+1*a+1*b,e=(1-Math.sin(c).toFixed(4))*a+1*b,f=(h?" L":"M")+d+" "+e+(100==h?"Z":""),g.push(f);return g}var b=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,d=avalon.ui.progressbar=function(e,f,g){var h=f.progressbarOptions;h.template=h.getTemplate(c,h);var i=avalon.define(f.progressbarId,function(c){avalon.mix(c,h),c.widgetElement=e;var f,j,k,l,m=e;c.$d=b&&c.circle&&a(h.circleRadius,h.circleBorderWidth)||[],c.$skipArray=["widgetElement","template","svgSupport"],c.svgSupport=b,c.ended=!1,c.circleCoordinates="",c.barCoordinates="",c.angel=h.value||0,c.successValue=c.countDown?0:100,c.value=c.countDown?100:c.value,c.angel=c.countDown?360:360*c.angel/100;var n;c.$init=function(c){if(!n){if(n=!0,m.innerHTML=i.template,c?c():(avalon.log("avalon请尽快升到1.3.7+"),avalon.scan(e,[i].concat(g)),"function"==typeof h.onInit&&h.onInit.call(e,i,h,g)),i.label){var d=m.getElementsByTagName("div");avalon.each(d,function(a,b){var c=avalon(b);i.circle?c.hasClass("oni-progressbar-circle-par")?l=c:c.hasClass("oni-progressbar-circle-bar")&&(j=c):c.hasClass("oni-progressbar-label")?k=b:c.hasClass("oni-progressbar-bar")&&(j=b,l=b.parentNode)})}i.$d=b&&i.circle&&a(i.circleRadius,i.circleBorderWidth)||[],i.circleBar(),i.circleCoordinates=i.$d.join(""),i._simulater(),"function"==typeof h.onInit&&h.onInit.call(e,i,h,g)}},c.circleBar=function(a){if(i.circle||!b){var a=a||i.value||0;a=a>100?100:a>0?a:0,i.barCoordinates=100==a?i.circleCoordinates:i.$d.slice(0,a+1).join("")+(100>a&&a?"":"Z")}},c._getLeft=function(){if(!i.circle&&k&&!i.inTwo){var a=j&&j.offsetWidth||0,b=k.offsetWidth||0,c=l&&l.offsetWidth||0,d=c-a>b+2?a-b/2+2:c-b;d=d>0?d:0,k.style.left=d+"px"}},c._simulater=function(){i.simulate===!1||i.indeterminate||(clearTimeout(f),f=setTimeout(function(){if(i.success||i.ended||i.indeterminate)return clearTimeout(f);var a=i.simulater(i.value||0,i);if(i.success)return a=i.successValue,void(i.value=a);if(!i.ended){if(i.countDown){if(0>=a)return}else if(a>=100)return;i.value=a,f=setTimeout(arguments.callee,i.simulate)}},i.simulate))},c.$remove=function(){e.innerHTML=e.textContent=""},c._cssMaker=function(a){return i.value===!1&&i.indeterminate||100==i.value?a?0:"100%":a?100-(i.value||0)+"%":(i.value||0)+"%"},c._indeterminate=function(){return i.indeterminate&&0==i.value&&!i.inTwo},c._showLabel=function(a,b){return a&&b},c._labelShower=function(){return i.labelShower.call(i,arguments[0],arguments[1],i)},c.start=function(){i.indeterminate=!1,i.ended=!1,i._simulater()},c.end=function(a){clearTimeout(f),i.ended=!0,void 0!=a&&(i.value=a)},c.reset=function(a){var b={};avalon.mix(b,{value:void 0!=a?a:d.defaults.value,indeterminate:d.defaults.indeterminate,success:!1}),avalon.mix(i,b),i.ended=!1,i.successValue=i.countDown?0:100,i.value=i.countDown?100:i.value,i._simulater()},c.progress=function(a){i.value=a}});return i.$watch("success",function(a){a&&i.simulate&&(i.value=i.successValue),a&&i.onComplete.call(i)}),i.$watch("value",function(a){a==i.successValue&&(i.success=!0),i.circle&&i.circleBar(),i._getLeft(),i.angel=360*a/100,i.onChange&&i.onChange.call(i,a)}),i};d.defaults={toggle:!0,value:!1,label:!0,simulate:!1,indeterminate:!1,countDown:!1,inTwo:!1,circle:!1,circleColor:"#ffffff",circleBorderColor:"#dedede",circleBarColor:"#619FE8",circleRadius:38,circleBorderWidth:4,success:!1,onInit:avalon.noop,simulater:function(a,b){return b.countDown?a-5*Math.random()>>0:a+5*Math.random()>>0},getTemplate:function(a){return a},onChange:avalon.noop,onComplete:avalon.noop,labelShower:function(a,b,c){var a="inTwo"==b?100-(a||0):a,d=c?c.successValue:100;return"l1"==b&&c.inTwo?"":a===!1?"loading…":"failed"===a?"failed!":a==d?"complete!":a+"%"},$author:"skipper@123"}}()},{}],29:[function(a,b){var c=a("../avalon.getModel"),d='<label ms-on-mouseout="mouseout">\r\n    <span class="oni-icon"\r\n        ms-repeat="list"\r\n        ms-css-color="{{floatValue > $index ? selectedColor : notSelectedColor}}"\r\n        ms-css-font-size="{{size}}px"\r\n        ms-css-margin-right="{{margin}}px"\r\n        ms-on-mouseover="mouseover($index)"\r\n        ms-click="select($index)"\r\n    >{{floatValue > $index ? selectedContent : notSelectedContent | html}}</span>\r\n</label>\r\n';b.exports=function(){var a=d,b=function(a,b){var d=c.getModel(a,b);return d&&d[1][d[0]]||c.noop},e=function(a){var b=a.tagName.toUpperCase();return"INPUT"===b||"SELECT"===b},f=c.ui.rating=function(d,f,g){var h,i=f.ratingOptions,j=b("onSelect",g),k=b("onFloat",g),l=c.define(f.ratingId,function(b){c.mix(b,i),b.value=b.floatValue=d.value,b.list=new Array(i.max),b.mouseover=function(a){l.floatValue=a+1},b.select=function(a){l.value=a+1},b.mouseout=function(){l.floatValue=l.value},b.setByIp=function(){var a=parseInt(d.value);a!==l.value&&(l.value=l.floatValue=a?a:0)},b.set=function(a){l.value=a,l.floatValue=a},b.$init=function(){if(h=c.parseHTML(a).firstChild,e(d)){var b=d.parentNode;b.insertBefore(h,d),b.insertBefore(d,h),d.setAttribute("data-duplex-changed","setByIp"),l.$watch("value",function(a){d.value=a})}else l.value=l.floatValue=l.defaultValue,d.appendChild(h);c.scan(h.parentNode,[l].concat(g))},b.$remove=function(){h.parentNode.removeChild(h),h=null},b.$watch("value",function(a){j.call(null,a,f.ratingId,c(d).data())}),b.$watch("floatValue",function(a){k.call(null,a,f.ratingId,c(d).data())})});return l};return f.defaults={defaultValue:3,max:5,margin:3,notSelectedColor:"#CECECE",notSelectedContent:"&#xf006;",selectedColor:"#00A3C2",selectedContent:"&#xf005;",size:20},c}()},{"../avalon.getModel":3}],30:[function(a,b){var c='<div ms-repeat-pos="_position" class="oni-scrollbar oni-helper-reset oni-helper-clearfix oni-widget"\r\n     ms-visible="!disabled"\r\n	 ms-class-100="oni-scrollbar-{{pos}}" \r\n	 ms-class-101="oni-scrollbar-{{size}} oni-scrollbar-{{pos}}-{{size}}" \r\n	 ms-class-102="oni-state-disabled:disabled" \r\n	 ms-mouseenter="_show($event, \'always\', $index)" \r\n	 ms-visible="toggle">\r\n	<div ms-if="showBarHeader" class="oni-scrollbar-arrow oni-scrollbar-arrow-up" \r\n	 ms-click="_arrClick($event, \'up\', pos, $index)" \r\n	 ms-mousedown="_arrDown($event,\'up\', pos, $index)" \r\n	 ms-class-100="oni-state-disabled:disabled" \r\n	 ms-mouseup="_arrDown($event,\'up\', pos, $index,\'release\')" \r\n	 ms-hover="oni-state-hover oni-scrollbar-arrow-hover"><b class="oni-scrollbar-trangle  oni-scrollbar-trangle-up"></b></div>\r\n	<div class="oni-scrollbar-draggerpar" ms-click="_barClick($event, pos, $index)">\r\n		<div class="oni-scrollbar-dragger"\r\n		ms-attr-data-draggable-axis="pos == \'left\' || pos == \'right\' ? \'y\' : \'x\'" \r\n		ms-click="_stopPropagation($event)" \r\n		ms-class-100="oni-state-disabled:disabled" \r\n		ms-mouseover="_show($event,\'always\',$index)" \r\n		ms-mousedown="_draggerDown($event, true)" \r\n		ms-mouseup="_draggerDown($event, false)" \r\n		ms-mouseout="_draggerDown($event, false)" \r\n		ms-hover="oni-state-hover"\r\n		>{{draggerHTML | html}}</div>\r\n	</div>\r\n	<div ms-if="showBarHeader" class="oni-scrollbar-arrow oni-scrollbar-arrow-down"\r\n	 ms-click="_arrClick($event, \'down\', pos, $index)"\r\n	 ms-mousedown="_arrDown($event,\'down\', pos, $index)" \r\n	 ms-mouseup="_arrDown($event,\'down\', pos, $index,\'release\')" \r\n	 ms-class-100="oni-state-disabled:disabled" \r\n	 ms-hover="oni-state-hover"><b class="oni-scrollbar-trangle oni-scrollbar-trangle-down"></b></div>\r\n</div>';a("../draggable/avalon.draggable"),b.exports=function(){function a(a,b){var b=b||document.body;if(b.getElementsByClassName)return b.getElementsByClassName(a);var c=b.getElementsByTagName("*"),d=[];return avalon.each(c,function(b,c){var e=avalon(c);e.hasClass(a)&&d.push(c)}),d}function b(a){return Math.round(parseFloat(a))||0}var d,e=[],f=[],g=avalon.ui.scrollbar=function(g,h,i){var j=h.scrollbarOptions;j.template=j.getTemplate(c,j);var k=avalon.define(h.scrollbarId,function(c){avalon.mix(c,j),c.widgetElement=g,c.draggerHeight=c.draggerWidth="",c.inFocuse=!1,c._position=[],c.viewElement=g,c.dragging=!1;var h,l,m=[];c.$init=function(a){function c(a,b,c,d){avalon.each(b,function(b,e){m[b].data("oni-scrollbar-needed")&&k._computer(d||function(b){return k._clickComputer(b,a)},e[0],e[1],function(a){a||c.preventDefault()},"breakOutCallbackCannotIgnore")})}function n(a){k.disabled||k.inFocuse&&c(a.wheelDelta>0?"up":"down",r,a)}function o(a){if(!k.disabled){var d=a.keyCode;if(d>32&&41>d&k.inFocuse)if(d in{37:1,39:1,38:1,40:1})c(d in{37:1,38:1}?"up":"down",d in{38:1,40:1}?r:s,a);else{var e=d in{33:1,36:1}?"up":"down";c(e,r,a,function(c){var f=l[0].scrollTop;if(d in{33:1,36:1}?f&&a.preventDefault():f<c.scrollerH-c.viewH&&a.preventDefault(),d in{36:1,35:1})return{x:0,y:36==d?0:c.draggerparHeight-c.draggerHeight+100};var g=(c.draggerparHeight-c.draggerHeight)*c.viewH/(c.scrollerH-c.viewH);return k._clickComputer(c,e,b(g)||1)})}}}if(!h){h=!0,k.widgetElement.style.position="relative",k.viewElement=k.widgetElement==document.body?document.getElementsByTagName("html")[0]:k.widgetElement,k.viewElement.style.overflow=k.viewElement.style.overflowX=k.viewElement.style.overflowY="hidden",k.widgetElement==document.body&&(k.widgetElement.style.overflow=k.widgetElement.style.overflowX=k.widgetElement.style.overflowY="hidden"),k._position=k.position.split(",");var p=avalon.parseHTML(j.template);k.widgetElement.appendChild(p),a?a():(avalon.log("avalon请尽快升到1.3.7+"),avalon.scan(g,[k].concat(i)),"function"==typeof j.onInit&&j.onInit.call(g,k,j,i));var q=k.widgetElement.childNodes;if(avalon.each(q,function(a,b){var c=avalon(b);c.hasClass("oni-scrollbar")||c.hasClass("ui-scrollbar")?m.push(c):(c.hasClass("oni-scrollbar-scroller")||c.hasClass("ui-scrollbar-scroller"))&&(l=c)}),k.position.match(/left|right/g)){var r=[],s=[];avalon.each(k._position,function(a,b){b.match(/left|right/g)?r.push([a,b]):s.push([a,b])}),k.widgetElement==document.body?(k.inFocuse=!0,e.push(n),f.push(o)):(avalon.bind(g,"mouseenter",function(){k.inFocuse=!0,e.push(n),f.push(o)}),avalon.bind(g,"mouseleave",function(){k.inFocuse=!1;for(var a=0,b=e.length;b>a;a++)if(e[a]===n){e.splice(a,1),f.splice(a,1);break}})),d||(d=!0,avalon.bind(document,"mousewheel",function(a){var b=e[e.length-1];b&&b(a)}),avalon.bind(document,"keydown",function(a){var b=f[f.length-1];b&&b(a)}))}avalon.bind(g,"mouseenter",function(){avalon.each(m,function(a,b){k._show("e",!1,b)})}),avalon.bind(g,"mouseleave",function(){k._hide()}),k.update("init")}},c.$draggableOpts={beforeStart:function(){k.dragging=!0},drag:function(a,c){var d=avalon(c.element);k._computer(function(a){var c={x:b(d.css("left"))>>0,y:b(d.css("top"))>>0};return c.x==a.draggerparWidth-a.draggerWidth&&(c.x+=100),c.y==a.draggerparHeight-a.draggerHeight&&(c.y+=100),c},d.attr("oni-scrollbar-index"),d.attr("oni-scrollbar-pos"))},handle:function(){return!k.disabled&&this},containment:"parent"},c.$draggableOpts.stop=function(a,b){k.$draggableOpts.drag(a,b),k.dragging=!1,avalon(b.element).removeClass("oni-state-active")},c.$remove=function(){avalon.each(m,function(a,b){b[0]&&b[0].parentNode&&b[0].parentNode.removeChild(b[0])})},c._onScroll=function(){"scrolling"==k.show&&avalon.each(m,function(a,b){k._show("e",!1,b)})},c._show=function(a,b,c){if("scrolling"==k.show){a.stopPropagation&&a.stopPropagation();var d=c.css?c:m[c];d&&(clearTimeout(d.data("oni-scrollbar-hidetimer")),d.css("visibility","visible"),d.css("opacity",1),b||d.data("oni-scrollbar-hidetimer",setTimeout(function(){d.css("opacity",0)},1e3)))}},c._hide=function(a,b){"scrolling"==k.show&&(b&&m[b]?m[b].css("opacity",0):avalon.each(m,function(a,b){b.css("opacity",0)}))},c.getBars=function(){return m},c.getScroller=function(){return l},c.update=function(c,d,e){if(!k.disabled){var f,g,h,i=avalon(k.viewElement),j=k.widgetElement===document.body?k.viewElement.clientHeight:b(i.css("height")),n=b(i.css("width")),o=k.viewHeightGetter(i),p=k.viewWidthGetter(i),q=k.position,r={},e=void 0==e?k.scrollTop:e,d=void 0==d?k.scrollLeft:d;k.viewElement!=k.widgetElement&&q.match(/right|left/g)&&avalon(k.widgetElement).css("height",j);var s=l.width()-l.innerWidth(),t=l.height()-l.innerHeight();if(l.css("height",o+t),l.css("width",p+s),f=l[0].scrollWidth,g=l[0].scrollHeight,h={top:q.match(/top/g)&&f>p,right:q.match(/right/g)&&g>o,bottom:q.match(/bottom/g)&&f>p,left:q.match(/left/g)&&g>o},m.length>1)for(var u=["top","right","bottom","left"],v=0;4>v;v++)r[u[v]]=[(h[v?u[v-1]:u[3]]&&1)>>0,(h[3>v?u[v+1]:u[0]]&&1)>>0],v>1&&(r[u[v]]=r[u[v]].reverse());o=l.innerHeight(),p=l.innerWidth(),avalon.each(k._position,function(i,q){var u,v=m[i],w=q.match(/left|right/);if(v&&(u=avalon(a("oni-scrollbar-dragger",v.element)[0])),c&&u&&(u.attr("ms-draggable","$,$draggableOpts"),u.attr("oni-scrollbar-pos",q),u.attr("oni-scrollbar-index",i),avalon.scan(u[0],k)),!h[q])return void(v&&(v.css("opacity",0),v.css("visibility","hidden"),v.data("oni-scrollbar-needed",!1)));if(v&&(v.data("oni-scrollbar-needed",!0),v.css("visibility","visible"),"scrolling"==k.show||"never"==k.show?v.css("opacity",0):v.css("opacity",1)),v){var x=b(v.css("height")),y=b(v.css("width")),z=x,A=y,B=avalon(a("oni-scrollbar-draggerpar",v[0])[0]),C=k.showBarHeader?2:0,D=[];if(m.length>1){var E=[],F=r[q];w?(E=[["top",F[0]*A],["height",j-A*(F[0]+F[1])]],D=[["top",C/2*A],["height",j-A*(F[0]+F[1]+C)]]):(E=[["left",F[0]*z],["width",n-z*(F[0]+F[1])]],D=[["left",C/2*z],["width",n-z*(C+F[0]+F[1])]]),avalon.each(E,function(a,b){v.css.apply(v,b)}),z=v.height(),A=v.width()}else D=w?[["top",A],["height",j-2*A]]:[["left",z],["width",n-2*z]];var G;w?(G="always"==k.show?A:0,l.css("width",p+s-G)):(G="always"==k.show?z:0,l.css("height",o+t-G)),avalon.each(D,function(a,b){B.css.apply(B,b)}),x=z-C*A,y=A-C*z;var H;if(w){var I=e,J=b(o*x/g);J=k.limitRateV*A>J&&k.limitRateV*A||J,I=0>I?0:I,I=I>g-o?g-o:I,I=b((x-J)*I/(g-o)),I=Math.min(x-J,I),H=[["width","100%"],["height",J],["top",I]],e=e>0?e>g-o+G?g-o+G:e:0}else{var K=d,L=b(p*y/f);L=k.limitRateH*z>L&&k.limitRateH*z||L,K=0>K?0:K,K=K>f-p?f-p:K,K=b((y-L)*K/(f-p)),K=Math.min(y-L,K),H=[["height","100%"],["width",L],["left",K]],d=d>0?d>f-p+G?f-p+G:d:0}avalon.each(H,function(a,b){u.css.apply(u,b)}),c&&(w?k._scrollTo(void 0,e):k._scrollTo(d,void 0)),k.showBarHeader&&(0==e&&w||!w&&0==d?avalon(a("oni-scrollbar-arrow-up",v[0])[0]).addClass("oni-state-disabled"):avalon(a("oni-scrollbar-arrow-up",v[0])[0]).removeClass("oni-state-disabled"),e>=B.innerHeight()-u.innerHeight()&&w||!w&&d>=B.innerWidth()-u.innerWidth()?!k.breakOutCallback&&avalon(a("oni-scrollbar-arrow-down",v[0])[0]).addClass("oni-state-disabled"):avalon(a("oni-scrollbar-arrow-down",v[0])[0]).removeClass("oni-state-disabled"))}})}},c._arrClick=function(a,b,c,d){k.disabled||k._computer(function(a){return k._clickComputer(a,b)
},d,c)},c._clickComputer=function(a,c,d){var d=d||a.step||40,e=b(a.dragger.css("left"))>>0,f=b(a.dragger.css("top"))>>0,g="down"==c?e+d:e-d,h="down"==c?f+d:f-d;return{x:g,y:h}},c._arrDown=function(a,b,c,d,e){if(!k.disabled){var f=this,g=avalon(f);clearInterval(g.data("mousedownTimer")),clearTimeout(g.data("setTimer"));{m[d]}return e||g.hasClass("oni-state-disabled")?g.removeClass("oni-state-active"):void g.data("setTimer",setTimeout(function(){g.addClass("oni-state-active"),g.data("mousedownTimer",setInterval(function(){return k._computer(function(a){return k._clickComputer(a,b)},d,c,function(a){a&&(clearInterval(g.data("mousedownTimer")),clearTimeout(g.data("setTimer")))})},120))},10))}},c._barClick=function(a,b,c){if(!k.disabled){var d=avalon(this);d.hasClass("oni-scrollbar-dragger")||k._computer(function(b){return{x:Math.ceil(a.pageX-b.offset.left-b.draggerWidth/2),y:Math.ceil(a.pageY-b.offset.top-b.draggerHeight/2)}},c,b)}},c._computer=function(c,d,e,f,g){if(!k.disabled){var h=m[d];if(h&&h.data("oni-scrollbar-needed")){var i={},j=e.match(/left|right/g);i.dragger=avalon(a("oni-scrollbar-dragger",h[0])[0]),i.draggerWidth=b(i.dragger.css("width")),i.draggerHeight=b(i.dragger.css("height")),i.draggerpar=avalon(i.dragger[0].parentNode),i.draggerparWidth=b(i.draggerpar.css("width")),i.draggerparHeight=b(i.draggerpar.css("height")),i.offset=i.draggerpar.offset(),i.up=avalon(a("oni-scrollbar-arrow-up",h[0])[0]),i.down=avalon(a("oni-scrollbar-arrow-down",h[0])[0]),i.viewer=avalon(k.viewElement),i.viewH=l.innerHeight(),i.viewW=l.innerWidth(),i.scrollerH=l[0].scrollHeight,i.scrollerW=l[0].scrollWidth,i.step=j?40*(i.draggerparHeight-i.draggerHeight)/(i.scrollerH-i.viewH):40*(i.draggerparWidth-i.draggerWidth)/(i.scrollerW-i.viewW),i.step=b(i.step)||1;var n,o=c(i);if(o.x=b(o.x),o.y=b(o.y),j){o.y<0?(o.y=0,i.up.addClass("oni-state-disabled"),n=["v","up"]):i.up.removeClass("oni-state-disabled"),o.y>i.draggerparHeight-i.draggerHeight?(o.y=i.draggerparHeight-i.draggerHeight,n=["v","down"],i.down.addClass("oni-state-disabled")):i.down.removeClass("oni-state-disabled");{b((i.scrollerH-i.viewH)*o.y/(i.draggerparHeight-i.draggerHeight))-k.scrollTop}i.dragger.css("top",o.y),k._scrollTo(void 0,b((i.scrollerH-i.viewH)*o.y/(i.draggerparHeight-i.draggerHeight)))}else o.x<0?(o.x=0,n=["h","up"],i.up.addClass("oni-state-disabled")):i.up.removeClass("oni-state-disabled"),o.x>i.draggerparWidth-i.draggerWidth?(o.x=i.draggerparWidth-i.draggerWidth,n=["h","down"],!k.breakOutCallback&&i.down.addClass("oni-state-disabled")):i.down.removeClass("oni-state-disabled"),i.dragger.css("left",o.x),k._scrollTo(b((i.scrollerW-i.viewW)*o.x/(i.draggerparWidth-i.draggerWidth)),void 0)}(!k.breakOutCallback||g)&&f&&f(n),k.breakOutCallback&&k.breakOutCallback(n,k,i)}},c._scrollTo=function(a,b){void 0!=b&&(l[0].scrollTop=b,k.scrollTop=l[0].scrollTop),void 0!=a&&(l[0].scrollLeft=a,k.scrollLeft=l[0].scrollLeft)},c.scrollTo=function(a,b){k.update(!1,a,b),c._scrollTo(a,b)},c._initWheel=function(a,b){k.inFocuse="enter"==b?!0:!1},c._draggerDown=function(a,b){if(!k.disabled){var c=avalon(this);b?c.addClass("oni-state-active"):c.removeClass("oni-state-active")}},c._stopPropagation=function(a){a.stopPropagation()}});return k.$watch("scrollLeft",function(a,b){k._onScroll(),k.onScroll&&k.onScroll(a,b,"h",k)}),k.$watch("scrollTop",function(a,b){k._onScroll(),k.onScroll&&k.onScroll(a,b,"v",k)}),k};g.defaults={disabled:!1,toggle:!0,position:"right",limitRateV:1.5,limitRateH:1.5,scrollTop:0,scrollLeft:0,show:"always",showBarHeader:!0,draggerHTML:"",breakOutCallback:!1,onInit:avalon.noop,viewHeightGetter:function(a){return a.innerHeight()},viewWidthGetter:function(a){return a.innerWidth()},getTemplate:function(a){return a},onScroll:function(){},size:"normal",$author:"skipper@123"}}()},{"../draggable/avalon.draggable":14}],31:[function(a,b){var c='<div class="oni-simplegrid">\r\n    <div class="oni-simplegrid-scroll-wrapper" \r\n         ms-css-height="tbodyHeight+theadHeight" \r\n         ms-widget="scrollbar,$simplegrid{{MS_OPTION_ID}},$spgScrollbarOpts" \r\n         ms-css-padding-bottom="paddingBottom"\r\n         data-scrollbar-position="right,bottom">\r\n        <div class="oni-simplegrid-wrapper"  \r\n             ms-css-nowidth="gridWidth" \r\n             >\r\n            <table class="oni-simplegrid-thead" \r\n                   ms-css-margin-left="cssLeft" >\r\n                <tr>\r\n                    MS_OPTION_THEAD_BEGIN\r\n                    <td data-repeat-rendered="_theadRenderedCallback"\r\n                        ms-repeat="columns"\r\n                        ms-css-width="el.width" \r\n                        ms-css-text-align="el.align" \r\n                        ms-class="{{el.className}}" \r\n                        ms-title="el.title" \r\n                        ms-visible="el.toggle" \r\n                        ms-data-vm="el"\r\n                        ms-on-mousemove-10="startResize($event,el)"\r\n                        ms-on-mousedown-10="resizeColumn($event,el)"\r\n                        ms-on-mouseleave-10="stopResize"\r\n                        >{{el.text | html}}\r\n                        <span  ms-click="sortColumn(el, $index)"\r\n                               ms-if="el.sortable" \r\n                               ms-class="oni-helper-{{ getArrow(el, $index)}}">\r\n                            <span class="oni-helper-sort-top"></span>\r\n                            <span class="oni-helper-sort-bottom"></span>\r\n                        </span>\r\n                    </td>\r\n                    MS_OPTION_THEAD_END\r\n                </tr>\r\n            </table>\r\n            <table class="oni-simplegrid-tbody" \r\n                   ms-css-margin-left="cssLeft" >\r\n                <tr data-repeat-rendered="_tbodyRenderedCallback"\r\n                    ms-repeat-row="_data"\r\n                    ms-class="{{rowClass}}:$index % 2 && _data.size()>=2"\r\n                    ms-hover="oni-state-hover"\r\n                    ms-class-1="oni-state-selected: row.checked"\r\n                    >\r\n                    MS_OPTION_TBODY_BEGIN\r\n                    <td class="oni-simplegrid-td"\r\n                        data-with-sorted="getColumnsOrder"\r\n                        ms-repeat="row" \r\n                        ms-visible="getCellProperty($key,\'toggle\')" \r\n                        ms-css-width="getCellProperty($key,\'width\')"\r\n                        ms-css-text-align="getCellProperty($key,\'align\')"\r\n                        >\r\n                        {{ renderCell($val, $key, row) | html }}\r\n                    </td>\r\n                    MS_OPTION_TBODY_END\r\n                </tr>\r\n            </table>\r\n            <div ms-if="!_data.size()" \r\n                 ms-css-height="noResultHeight"\r\n                 ms-css-line-height="{{noResultHeight}}px"\r\n                 class="oni-simplegrid-empty">\r\n                {{noResultContent|html}}\r\n            </div>\r\n        </div>\r\n        <div class="oni-scrollbar-scroller">\r\n            <div class="oni-simplegrid-scroll-marker" ms-css-height="getScrollerHeight()" \r\n                 ms-css-nowidth="gridWidth">\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n    <div class="oni-simplegrid-pager-wrapper"  ms-if="pageable" id="pager-MS_OPTION_ID" >\r\n\r\n    </div>\r\n    <div ms-widget="loading"></div>\r\n</div>\r\n';a("../pager/avalon.pager"),a("../dropdown/avalon.dropdown"),a("../loading/avalon.loading"),a("../scrollbar/avalon.scrollbar"),b.exports=function(){function a(a){a.returnValue=!1}function b(a,b,c){var d="",e=b.offset(),f=b[0].offsetWidth,g=c.edge;return a.pageX<e.left+f&&a.pageX>e.left+f-g&&(d="e"),"e"===d?d:""}function d(a,b,c){c=!!c,a[b]="boolean"==typeof a[b]?a[b]:c}function e(a){do{if("none"===avalon(a).css("display")){var b,c=avalon(a);return[function(){c.css("display","block"),b=c.css("visibility")},function(){c.css("display","none"),c.css("visibility",b)}]}if("BODY"===a.tagName)break}while(a=a.parentNode);return[avalon.noop,avalon.noop]}function f(a,b,c){a[b]="function"==typeof a[b]?a[b](c,a):"string"==typeof a[b]?a[b]:c}var g,h,i=c;i=i.replace(/MS_OPTION_THEAD_BEGIN([\s\S]+)MS_OPTION_THEAD_END/,function(a,b){return g=b,"MS_OPTION_THEAD_HOLDER"}),i=i.replace(/MS_OPTION_TBODY_BEGIN([\s\S]+)MS_OPTION_TBODY_END/,function(a,b){return h=b,"MS_OPTION_TBODY_HOLDER"});var j=document.body||document.documentElement,k=/^function\s+\w*\s*\([^)]*\)\s*{\s*}$/m,l=avalon.ui.simplegrid=function(a,c,j){function l(a){var b=a,c=b>J?"down":"up";J=b;var d=Math.abs(K-b),e=F._rowHeight;if(d>=F._rowHeightNoBorders){var f=d/e,g=Math.floor(f),h=f-g;h>.55&&(g+=1);var i=F.data.length,j=0,k=F.showRows;if("down"===c)for(;F.endIndex+1<i;){F.endIndex+=1,F.startIndex+=1,j+=1;var l=F.data[F.endIndex];if(k>=g-j&&(F._data.push(l),F._data.shift()),j===g)break}else for(;F.startIndex>=0;){F.endIndex-=1,F.startIndex-=1,j+=1;var l=F.data[F.startIndex];if(k>=g-j&&(F._data.unshift(l),F._data.pop()),j===g)break}K=F.tbodyScrollTop=F.startIndex*e}}var o,r=c.simplegridOptions,s=+new Date;r.columns=r.getColumns(r.columns,r),f(r,"theadTemplate",g),f(r,"tbodyTemplate",h);var t=i.replace(/MS_OPTION_THEAD_HOLDER/,r.theadTemplate).replace(/MS_OPTION_TBODY_HOLDER/,r.tbodyTemplate);r.template=r.getTemplate(t,r).replace(/\{\{MS_OPTION_ID\}\}/g,s),"object"!=typeof r.pager?r.pager={}:r.pageable=!0;var u=r.pager;if(u.perPages=r.pageable?u.perPages||r.data.length:r.data.length,u.nextText=u.nextText||"下一页",u.prevText=u.prevText||"上一页",Array.isArray(u.options)&&(u.getTemplate="function"==typeof u.getTemplate?u.getTemplate:function(a){return a+'<div class="oni-simplegrid-pager-options">每页显示<select ms-widget="dropdown" data-dropdown-list-width="50" data-dropdown-width="50" ms-duplex="perPages"><option ms-repeat="options" ms-value="el.value">{{el.text}}</option></select>条,共{{totalItems}}条结果</div>'}),d(u,"showJumper",!0),r.pager=r.getPager(u,r),r.showRows=r.showRows||u.perPages,Array.isArray(r.columnsOrder)){if(r.syncTheadColumnsOrder){B=r.columnsOrder.concat();for(var v,w=[],x=r.columns;A=B.shift();)a:for(var y=0,z=x.length;z>y;y++)if(v=x[y],v.field==A){w.push(v),x.splice(y,1);break a}r.columns=w}}else{for(var A,B=[],C=0;A=r.columns[C++];)B.push(A.field);r.columnsOrder=B}var D,E={toggle:!1,onInit:function(a){F.loadingVModel=a}};r.loading="object"===avalon.type(r.loading)?avalon.mix(r.loading,E):E;var F=avalon.define(c.simplegridId,function(c){avalon.mix(c,r),c.$skipArray=["_init","widgetElement","data","addColumnCallbacks","scrollPanel","topTable","bottomTable","startIndex","pager","endIndex","template","loading","loadingVModel"],c.loadingVModel=null,c.widgetElement=a,c.gridWidth="100%",c.startIndex=0,c.endIndex=r.showRows,c.cssLeft="0",c.barRight=0,c.scrollerHeight=void 0,c.paddingBottom="0",c.barUpdated=!1,c._data=[],c._init=!0,c.$init=function(){avalon.ready(function(){a.innerHTML=r.template.replace(/MS_OPTION_ID/g,F.$id),D=[F].concat(j),avalon.scan(a,D),"function"==typeof r.onInit&&r.onInit.call(a,F,r,j)})},c._theadRenderedCallback=function(){var a=e(c.widgetElement);a[0]();for(var b,d=this,f=this.parentNode,g=f.parentNode,h=d.children,i=0,k=0;b=h[k++];)if(1===b.nodeType&&b["data-vm"]){var l=c.columns[i++];-1===String(l.width).indexOf("%")&&(l.width=b.offsetWidth)}c.topTable=g,c.theadHeight=avalon(g).innerHeight(),c.scrollPanel=g.parentNode.parentNode,c.gridWidth=Math.min(g.offsetWidth,c.scrollPanel.offsetWidth)+1,a[1](),c.theadRenderedCallback.call(f,F,r,j)},c._tbodyRenderedCallback=function(){function a(){var a=b.getElementsByTagName("td")[0]||b.getElementsByTagName("th")[0],d=e(c.widgetElement);d[0]();var f=c.bottomTable=b.parentNode,g=F._data.size()?0:F.noResultHeight;c.tbodyHeight=avalon(f).innerHeight()+g;var h=b.rows.length;c._rowHeight=h?c.tbodyHeight/h:35;var i=c.pageable?c.pager.perPages:c.data.length;c.tbodyScrollHeight=c._rowHeight*i;var k=a?Math.max(avalon.css(a,"borderTopWidth",!0),avalon.css(a,"borderBottomWidth",!0)):0;c._rowHeightNoBorders=c._rowHeight-2*k,d[1](),c.tbodyRenderedCallback.call(b,F,r,j),setTimeout(function(){F.updateScrollbar(!F.barUpdated),F.barUpdated=!0})}var b=this;setTimeout(a,100)},c.showLoading=function(){F.loadingVModel.toggle=!0},c.hideLoading=function(){F.loadingVModel.toggle=!1},c.startResize=function(a,c){if(!r._drag&&c.resizable){var d=avalon(this),e=b(a,d,r);r._cursor=d.css("cursor"),""===e?(r.canResize=!1,d.css("cursor","default")):(r.canResize=d,d.css("cursor",e+"-resize"))}},c.stopResize=function(){r.canResize&&(r.canResize.css("cursor",r._cursor),F.updateScrollbar("forceUpdate"),delete r.canResize)},c.resizeColumn=function(a,b){var d=r.canResize;if(d){"number"!=typeof b.width&&(b.width=d[0].offsetWidth);var e=b.width,f=a.pageX;r._drag=!0,m();var g=c.gridWidth,h=avalon.bind(document,"mousemove",function(a){if(r._drag){a.preventDefault();var d=a.pageX-f;c.gridWidth=g+d,b.width=e+d,F.updateScrollbar("forceUpdate")}}),i=avalon.bind(document,"mouseup",function(a){a.preventDefault(),r._drag&&(n(),delete r._drag,c.gridWidth=g+a.pageX-f,b.width=e+a.pageX-f,avalon.unbind(document,"mousemove",h),avalon.unbind(document,"mouseup",i))})}},c.sortIndex=0/0,c.getArrow=function(a,b){var d=c.sortIndex,e=a.sortAsc;return b!==d?"ndb":e?"asc":"desc"},c.sortColumn=function(a,b){c.sortIndex=b;var d=a.sortAsc=!a.sortAsc,e=a.field,f=F.$model;d=d?1:-1,"function"!=typeof f.remoteSort||k.test(f.remoteSort)?"function"!=typeof a.localSort||k.test(a.localSort)?F._data.sort(function(a,b){return d*(a[e]-b[e])||0}):(F._data.sort(function(b,c){return d*a.localSort(b,c,e,f)||0}),"function"==typeof F.onSort&&setTimeout(function(){F.onSort(F)},500)):F.remoteSort(e,d,F)},c.getColumnsOrder=function(){return c.columnsOrder},c.addColumn=function(a,b){var d=r.getColumns([a],c)[0],e=d.field;if(-1===c.columnsOrder.indexOf(e)){var f=parseInt(b,10)||0,g=d.defaultValue||"";c.columns.splice(f,0,d),c.columnsOrder.splice(f,0,e),c.addColumnCallbacks[e]=function(a){a.forEach(function(a){a.hasOwnProperty(e)||(a[e]=g)})}}c.reRender(c.data,c)},c.getCellProperty=function(a,b){for(var d,e=0;d=c.columns[e++];)if(d.field===a)return d[b]},c.throttleRenderTbody=function(a,b){F.tbodyScrollTop=a,q(I),I=p(function(){l(a,b)})},c.getScrollerHeight=function(){var a=F.tbodyScrollHeight+F.tbodyScrollTop-F.theadHeight,b=F._rowHeight*F.data.length;return a=a>b?b:a,setTimeout(function(b){var c=F.getScrollbar().getScroller().css("height");return a==c||b?void(F.scrollerHeight=a):void arguments.callee(1)},100),a},c.$spgScrollbarOpts={onScroll:function(a,b,c){"v"==c?(clearTimeout(o),o=setTimeout(function(){F.throttleRenderTbody(a,b)},16)):F.cssLeft=void 0==a?"auto":-a+"px"},viewHeightGetter:function(a){return a.innerHeight()-F.theadHeight},show:c.showScrollbar},c.getScrollbar=function(){return avalon.vmodels["$simplegrid"+s]},c.updateScrollbar=function(a){if(a){{var b=F.getScrollbar();b.getScroller()}b&&b.update()}},c.$watch("showRows",function(a){F.endIndex=a})});if(F._data=F.getStore(F.data,F),F.pageable)var G=!1,H=setInterval(function(){var a=document.getElementById("pager-"+F.$id);a&&!G&&(a.setAttribute("ms-widget","pager,pager-"+F.$id),avalon(a).addClass("oni-simplegrid-pager-wrapper"),avalon.scan(a,F),G=!0);var b=avalon.vmodels["pager-"+F.$id];b&&(F.pager=b,clearInterval(H))},100);var I,J=0,K=0;return F.$watch("scrollerHeight",function(a){a>0?(F.getScrollbar().disabled=!1,F.getScrollbar().toggle=!0,F.updateScrollbar("forceUpdate")):(F.getScrollbar().disabled=!0,F.getScrollbar().toggle=!1)}),F};l.defaults={theadHeight:35,noResultHeight:100,tbodyScrollHeight:"auto",rowClass:"even",showScrollbar:"always",tbodyScrollTop:0,tbodyHeight:"auto",evenClass:"even",_rowHeight:35,_rowHeightNoBorders:0,columnWidth:160,edge:15,_data:[],topTable:{},bottomTable:{},scrollPanel:{},addColumnCallbacks:{},pageable:!1,syncTheadColumnsOrder:!0,remoteSort:avalon.noop,noResultContent:"暂无结果",theadRenderedCallback:function(){},tbodyRenderedCallback:function(a){a._init?a._init=!1:a.widgetElement.scrollIntoView()},renderCell:function(a){return a},getColumnTitle:function(){return""},getTemplate:function(a){return a},reRender:function(a,b){avalon.each(b.addColumnCallbacks,function(b,c){c(a)}),b.data=a,b._data=b.getStore(a,b),"function"==typeof b.onSort&&setTimeout(function(){b.onSort(b)},500)},getStore:function(a,b){return a.slice(b.startIndex,b.endIndex)},getColumn:function(a){return a},getPager:function(a){return a},getColumns:function(a,b){for(var c,e=[],f=0;c=a[f++];)"string"==typeof c&&(c={field:c}),c.text=c.text||c.field,c.title=b.getColumnTitle(c),c.width=c.width||b.columnWidth,c.className=c.className||"",c.align=c.align||"",c.localSort="function"==typeof c.localSort?c.localSort:!1,d(c,"sortable",!0),d(c,"resizable",!1),d(c,"sortAsc",!0),d(c,"toggle",!0),d(c,"disabledToggle"),d(c,"disabledResize"),b.getColumn(c,b),e.push(c);return e}};var m=function(){avalon(j).addClass("oni-helper-noselect")},n=function(){avalon(j).removeClass("oni-helper-noselect")};if(window.VBArray&&!("msUserSelect"in document.documentElement.style)){var o;m=function(){o=j.onselectstart,j.onselectstart=a},n=function(){j.onselectstart=o}}var p=window.requestAnimationFrame||function(a){return window.setTimeout(a,1e3/60)},q=window.cancelAnimationFrame||function(a){clearTimeout(a)};return avalon}()},{"../dropdown/avalon.dropdown":15,"../loading/avalon.loading":20,"../pager/avalon.pager":25,"../scrollbar/avalon.scrollbar":30}],32:[function(a,b){var c=a("../draggable/avalon.draggable"),d='<div class="oni-slider oni-widget oni-corner-all"\n     ms-class-1 = "oni-slider-horizontal: orientation===\'horizontal\'"\n     ms-class-2 = "oni-slider-vertical: orientation !== \'horizontal\'"\n     ms-class-oni-state-disabled="disabled"> \n    <div class="oni-slider-range oni-widget-header oni-corner-all" \n         ms-class-1 = "oni-slider-range-min:range===\'min\'"\n         ms-class-2 = "oni-slider-range-max:range===\'max\'"\n         ms-css-MS_OPTION_WIDTHORHEIGHT = "{{range === \'max\' ? 100-percent : percent}}%"\n         ms-css-MS_OPTION_LEFTORBOTTOM = "{{ $twohandlebars ? percent0 : \'auto\'}}%"\n         ms-if = "range"\n         style="width: 100%;">\n    </div>\n    <b  class="oni-slider-handle  oni-corner-all hander___flag"\n        ms-css-MS_OPTION_LEFTORBOTTOM = "{{percent}}%"\n        ms-data-axis = "$axis"\n        ms-draggable\n        data-draggable-start="dragstart" \n        data-draggable-stop="dragend" \n        data-draggable-drag="drag" \n        data-draggable-containment="parent" \n        ms-hover="oni-state-hover"\n        ms-if = "!$twohandlebars"\n        ></b>\n    <b  class="oni-slider-handle  oni-corner-all"\n        ms-css-MS_OPTION_LEFTORBOTTOM = "{{percent0}}%"\n        ms-data-axis = "$axis"\n        ms-draggable\n        data-draggable-start="dragstart" \n        data-draggable-stop="dragend" \n        data-draggable-drag="drag" \n        data-draggable-containment="parent" \n        ms-hover="oni-state-hover"\n        ms-if = "$twohandlebars"\n        ></b>\n    <b  class="oni-slider-handle  oni-corner-all"\n        ms-css-MS_OPTION_LEFTORBOTTOM = "{{percent1}}%"\n        ms-data-axis = "$axis"\n        ms-draggable\n        data-draggable-start="dragstart" \n        data-draggable-stop="dragend" \n        data-draggable-drag="drag" \n        data-draggable-containment="parent" \n        ms-hover="oni-state-hover"\n     \n        ms-if = "$twohandlebars"\n        ></b>\n</div>';a("../avalon.getModel"),b.exports=function(){var a,b=[],e=0,f=d,g=c.ui.slider=function(a,d,g){function h(a){return o>a&&(a=o),a>p&&(a=p),parseFloat(((a-o)/(p-o)*100).toFixed(5))}function i(a){var b=(p-o)*a+o;return b=j(b),parseFloat(b.toFixed(3))}function j(a){var b=m.step>0?m.step:1,c=(a-o)%b,d=(a-o)/b;return a=o+(2*c>=b?b*Math.ceil(d):b*Math.floor(d))}function k(a,b,c){if(isFinite(c))var d=c;else{var f=n?"left":"top",g=b[f]+parseFloat(b.$element.css("border-top-width")),j=g/y.$pixelTotal;n||(j=Math.abs(1-j)),j>.999&&(j=1),.001>j&&(j=0),d=i(j)}if(s){if(0===e){var k=y.values[1];d>k&&(d=k)}else k=y.values[0],k>d&&(d=k);y.values[e]=d,y["percent"+e]=h(d),y.value=y.values.join(),y.percent=h(y.values[1]-y.values[0]+o)}else y.value=d,y.percent=h(d)}var l=c(a),m=d.sliderOptions,n="horizontal"===m.orientation,o=m.min,p=m.max,q=m.range,r=m.values,s=q===!0,t=Number(m.value);if(isNaN(t)){var u=c.getModel(m.value,g);u&&(t=u[1][u[0]])}m.template=m.getTemplate(f,m),"min"===q&&r?t=r[0]:"max"===q&&r&&(t=r[1]),t||"min"!==q||r?t||"max"!==q||r||(t=p||t):t=o||t,1===m.step||/\D/.test(m.step)||(t=j(t)),s&&(r=Array.isArray(r)?1===r.length?[r[0],r[0]]:r.concat():[o,p]);var v=m.template.replace(/MS_OPTION_WIDTHORHEIGHT/g,n?"width":"height").replace(/MS_OPTION_LEFTORBOTTOM/g,n?"left":"bottom"),w=c.parseHTML(v).firstChild,x=[];a.parentNode.insertBefore(w,a.nextSibling),l.addClass("oni-helper-hidden-accessible");var y=c.define(d.sliderId,function(d){c.mix(d,m),d.$skipArray=["template","widgetElement","step","_dragEnd"],d.widgetElement=a,d.step=m.step>0?m.step:1,d.disabled=a.disabled,d.percent=h(s?r[1]-r[0]+o:t),d.percent0=s?h(r[0]):0,d.percent1=s?h(r[1]):0,d.value=s?r.join():t,d.values=r,d.$axis=n?"x":"y",d.$valueMin=o,d.$valueMax=p,d.$twohandlebars=s,d.$percent2Value=i,d.$pixelTotal=0,d._dragEnd=!1,d.dragstart=function(a,c){y.$pixelTotal=n?w.offsetWidth:w.offsetHeight,b=x,c.started=!y.disabled,c.dragX=c.dragY=!1,e=x.indexOf(c.element),c.$element.addClass("oni-state-active"),m.onDragStart.call(null,a,c)},d.dragend=function(a,b){b.$element.removeClass("oni-state-active"),m.onDragEnd.call(null,a,b),y._dragEnd=!1},d.drag=function(a,b,c){k(a,b,c),m.onDrag.call(null,y,b),y._dragEnd=!0},d.$init=function(){for(var b,d=w.getElementsByTagName("b"),e=0;b=d[e++];){if(b.sliderModel=y,!s&&c(b).hasClass("hander___flag")){x.push(b),c(b).removeClass("hander___flag");break}s&&!c(b).hasClass("hander___flag")&&x.push(b)}c(a).css({display:"none",height:0,width:0,padding:0}),c(w).css("width",y.width),c.scan(w,[y].concat(g)),"function"==typeof m.onInit&&m.onInit.call(a,y,m,g)},d.$remove=function(){w.innerHTML=w.textContent="",w.parentNode.removeChild(w)}});return y.$watch("value",function(a){a=j(Number(a)||0),!a||a<Number(y.min)?a=0:a>Number(y.max)&&(a=y.max),y.value=a,y.percent=h(a),y._dragEnd||m.onDragEnd.call(null,d)}),y};return g.defaults={max:100,min:0,width:-1,orientation:"horizontal",range:!1,step:1,value:0,values:null,disabled:!1,onDragStart:c.noop,onDrag:c.noop,onDragEnd:c.noop,getTemplate:function(a){return a}},c(document).bind("click",function(d){d.stopPropagation();var e=d.target,f=b.indexOf(e);-1!==f?(a&&a.removeClass("oni-state-focus"),a=c(e).addClass("oni-state-focus")):a&&(a.removeClass("oni-state-focus"),a=null)}),c(document).bind("keydown",function(c){if(a){var d,f=a[0].sliderModel,g=1==b.length?f.percent:f["percent"+e],h=f.$percent2Value(g/100);switch(c.which){case 34:case 39:case 38:d=Math.min(h+1,f.$valueMax);break;case 33:case 37:case 40:d=Math.max(h-1,f.$valueMin);break;case 36:d=f.$valueMin;break;case 35:d=f.$valueMax}isFinite(d)&&f.drag(c,{},d)}}),c}()},{"../avalon.getModel":3,"../draggable/avalon.draggable":14}],33:[function(a,b){var c='<div class="oni-smartgrid">\r\n    <table>\r\n        <colgroup>\r\n            <col ms-repeat-column="columns" \r\n                 ms-class="oni-smartgrid-{{column.toggle? \'show\': \'hide\'}}"\r\n                 ms-css-width="column.width"/>\r\n        </colgroup>\r\n        <thead class="oni-smartgrid-header">\r\n            <tr class="oni-smartgrid-header-fixed" \r\n                ms-if="isAffix"\r\n                ms-css-top="_headerTop" \r\n                ms-visible="_fixHeaderToggle" \r\n                ms-css-position="_position" \r\n                ms-css-width="_gridWidth">\r\n                <th ms-repeat-column="columns" \r\n                    ms-visible="column.toggle" \r\n                    ms-css-width="column._fixWidth" \r\n                    ms-css-text-align="column.align" \r\n                    ms-class="{{column.customClass}}"\r\n                    ms-class-1="oni-state-hidden: _hiddenAffixHeader(column, allChecked)">\r\n                    {{column.name|sanitize|html}}\r\n                    <span  ms-click="sortColumn(column, $index, $event)"\r\n                           ms-if="column.sortable" \r\n                           ms-class="oni-helper-{{column.sortTrend}}">\r\n                        <span class="oni-helper-sort-top"></span>\r\n                        <span class="oni-helper-sort-bottom"></span>\r\n                    </span>\r\n                </th>\r\n            </tr>\r\n            <tr>\r\n                <th ms-repeat-column="columns" \r\n                    ms-visible="_toggleColumn(column.toggle, $index)" \r\n                    ms-css-text-align="column.align" \r\n                    ms-class="{{column.customClass}}"\r\n                    ms-class-1="oni-state-hidden: _hiddenAffixHeader(column, allChecked)">\r\n                    {{column.name|sanitize|html}}\r\n                    <span  ms-click="sortColumn(column, $index, $event)"\r\n                           ms-if="column.sortable" \r\n                           ms-class="oni-helper-{{column.sortTrend}}">\r\n                        <span class="oni-helper-sort-top"></span>\r\n                        <span class="oni-helper-sort-bottom"></span>\r\n                    </span>\r\n                </th>\r\n            </tr>\r\n        </thead>\r\n        <tbody class="oni-smartgrid-body">\r\n        </tbody>\r\n        <tfoot class="oni-smartgrid-footer">\r\n            <tr>\r\n                <td ms-attr-colspan="{{columns.size()}}" class="oni-smartgrid-pager-wrapper">\r\n                    <div ms-visible="pageable && _pagerShow">\r\n                        <div ms-if="pageable" ms-widget="pager, $, $pagerConfig"></div>\r\n                    </div>\r\n                </td>\r\n            </tr>\r\n        </tfoot>\r\n    </table>\r\n    <div ms-widget="loading"></div>\r\n</div>\r\nMS_OPTION_EJS\r\n<&- var trl = @data.length &>\r\n<&- if(!trl) { &>\r\n    <tr><td colspan="<&=@columns.length&>"><div class="oni-smartgrid-nodata"><&=@noResult&></div></td></tr>\r\n<&- } else { &>\r\n    <&- for(var i=0, tr; i<trl; i++) { &>\r\n        <&- tr = @data[i]; \r\n            var selectedClass = "";\r\n            if (i%2==0) {\r\n                selectedClass = "oni-smartgrid-odd";\r\n\r\n            } else {\r\n                selectedClass = "oni-smartgrid-even"\r\n            } \r\n            if (tr.selected && @checkRow) {\r\n                selectedClass += " oni-smartgrid-selected"\r\n            }\r\n            if (tr.disable) {\r\n                selectedClass += " oni-state-disabled"\r\n            }&>\r\n        <tr id="<&=tr.$id&>" class="<&=selectedClass&>" ms-hover="oni-state-hover">\r\n            <&- for(var j=0, tdl=@columns.length, td; j<tdl; j++) { &>\r\n                <&- td=@columns[j].$model; \r\n                    var display=td.toggle ? "display:table-cell;" : "display:none;", \r\n                    textAlign="text-align:"+td.align, style=display+textAlign,\r\n                    customClass = td.customClass || "",\r\n                    format = td.format;&>\r\n                <td style="<&= style &>" class="<&= customClass &>">\r\n                    <&= format(@vmId, td.key , i, tr[td.key], tr, tr.disable) &>\r\n                </td>\r\n            <& } &>\r\n        </tr>  \r\n    <& } &>  \r\n<& } &>    \r\n';a("../loading/avalon.loading"),a("../pager/avalon.pager"),a("../dropdown/avalon.dropdown"),b.exports=function(){function a(){return"smartgridTr"+t++}function b(a,b){var c=a.container;c&&("string"==typeof c&&(c=document.getElementById(c)),c.nodeType&&1==c.nodeType&&document.body.contains(c)||(c=null)),c=c||b,a.container=c}function d(a){if(a.selectable){var b=a.selectable.type,c=a._container;("Checkbox"===b||"Radio"===b)&&avalon.bind(c,"click",function(b){var c=b.target,d=avalon(c),e=avalon(c.parentNode.parentNode),f=a.data,g=(a.onSelectAll,a._enabledData),h=a._disabledData,i=d.attr("data-index"),j=a._filterCheckboxData;if(d.attr("data-role")&&null!==i){if("selected"===d.attr("data-role")){var k=f[i],l=c.checked;l?("Checkbox"===a.selectable.type?e.addClass("oni-smartgrid-selected"):0,"Radio"===a.selectable.type&&g.splice(0,g.length),k.selected=!0,avalon.Array.ensure(g,k)):(e.removeClass("oni-smartgrid-selected"),k.selected=!1,avalon.Array.remove(g,k)),"function"===avalon.type(a.onRowSelect)&&a.onRowSelect.call(e[0],k,l)}a._allSelected=g.length==f.length-h.length-j.length?!0:!1}})}}function e(a){for(var b,c=a.data,d=a._enabledData=[],e=a._disabledData=[],f=a._filterCheckboxData=[],g=0,h=c.length;h>g;g++)b=c[g],b.disable?e.push(b):0!=b.checkboxShow?d.push(b):f.push(b);a._allEnabledData=d.concat()}function f(a){for(var b=a.data,c=a._enabledData=[],d=0,e=b.length;e>d;d++){var f=b[d],g=f.selected;g&&!f.disable&&c.push(f)}}function g(a,b){for(var c=0,d=a.length;d>c;c++){var e=a[c],f=e.type;if(f=void 0===f?"String":f,e.toggle&&"String"===f)return e}return b.selectable&&b.selectable.type?a[1]:a[0]}function h(a){for(var b=0,c=0,d=a.length;d>c;c++){var e=a[c];e.toggle&&(b+=parseInt(e.configWidth)||0)}return b}function i(a){var b=!0,c=a.length,d=0;if(!c)return void(b=!1);for(var e=0;c>e;e++){var f=a[e];void 0===f.selected&&(f.selected=!1),f.checkboxShow===!1||f.selected||f.disable||(b=!1),f.checkboxShow===!1&&d++}return d===c&&(b=!1),b}function j(a,b){for(var c=a.columns,d={},e=avalon(b.parentNode).width(),f=0,g=0,h={},j=0,k=c.length;k>j;j++){var l=c[j],m=l.format,n="",o=l.width,p=~~o;l.align=l.align||"center",(void 0===l.toggle||l.isLock)&&(l.toggle=!0),l.configWidth=p,p||(o.indexOf("%")?(p=e*parseInt(o)/100,l.configWidth=p):p="auto"),l.width=l._fixWidth=p,f+=~~p,~~p>g?(g=p)&&(h=l):0,l.customClass=l.customClass||"",l.sortable&&(l.sortTrend="ndb"),m&&!a.htmlHelper[m]&&(a.htmlHelper[m]=function(a,b,c,d){return avalon.log("方法"+m+"未定义"),d}),n=a.htmlHelper[m],n||(n=function(a,b,c,d){return d}),l.format=n}if(a.selectable){var q,r=a.selectable.type,s=!0;("Checkbox"===r||"Radio"===r)&&(q=function(a,b,c,d,e,f,g){return g&&"Radio"===r?void 0:e.checkboxShow===!1?"":"<input type='"+r.toLowerCase()+"' ms-disabled='_getAllCheckboxDisabledStatus("+(g?!0:!1)+", _dataRender)' "+(d?"checked='checked'":"")+" name='selected' "+(g?" ms-click='_selectAll' ms-duplex-radio='_allSelected'":" data-index='"+c+"'")+" data-role='selected'/>"},s=i(a.data)||!1,a._allSelected=s),d={key:"selected",name:q(a.$id,"selected",-1,s,[],null,!0),width:25,configWidth:25,sortable:!1,type:a.selectable.type,format:q,toggle:!0,align:"center",customClass:""},f+=25,d.width=d._fixWidth=25,c.unshift(d)}if(f>e)if(~~h.width)h.width="auto";else for(j=0;k>j;j++)if(l=c[j],~~l.width){l.width="auto";break}a.columns=c}var k=new Date-0,l=c.split("MS_OPTION_EJS"),m=l[0],n=(window.navigator.userAgent||"").toLowerCase(),o=-1!==n.indexOf("msie 6")||-1!==n.indexOf("msie 7"),p=/^function\s+\w*\s*\([^)]*\)\s*{\s*}$/m,q=!1,r={};c=l[1];var s=avalon.ejs=function(a,b,c){var d,e;if(!s.cache[a]){c=c||{};var f=c.doc||document;if(b=b||{},d=$.fn?$(a,f)[0]:f.querySelectorAll?f.querySelectorAll(a)[0]:f.getElementById(a.slice(1)),!d)throw"can not find the target element";e=d.innerHTML,/script|textarea/i.test(d.tagName)||(e=avalon.filters.unescape(e));var g=s.compile(e,c);ejs.cache[a]=g}return ejs.cache[a](b)};s.compile=function(a,b){b=b||{};var c=b.tid;if("string"==typeof c&&"function"==typeof s.cache[c])return s.cache[c];var d=b.open||"<&",e=b.close||"&>",f=[],g=[];for(var h in b)b.hasOwnProperty(h)&&"function"==typeof b[h]&&(f.push(h),g.push(b[h]));for(var i,j,k,l=!0,m=[],n=1*new Date,o=" ;r += txt"+n+"[",p="];",q="return function(data){'use strict'; try{var r = '',line"+n+" = 0;",r=/(^|[^\w\u00c0-\uFFFF_])(@)(?=\w)/g,t=/(['"])(?:\\[\s\S]|[^\ \\r\n])*?\1/g,u=/(^-|-$)/g,v=/mass/,w=[],x=0,y=0,z=a.length;z>y;){if(i=a.indexOf(l?d:e,y),x>i){if(!l)throw Error("发生错误了");q+=o+m.length+p,j=a.slice(x+e.length),k&&(j=j.trim(),k=!1),m.push(j);break}if(j=a.slice(y,i),x=i,l)q+=o+m.length+p,k&&(j=j.trim(),k=!1),m.push(j),y=i+d.length;
else{switch(w.push(j),q+=";line"+n+"="+w.length+";",j.charAt(0)){case"=":if(j=j.replace(u,function(){return k=!0,""}),j=j.replace(r,"$1data."),j.indexOf("|")>1){var A=[],B=j.replace(t,function(a){return A.push(a),"mass"}).replace(/\|\|/g,"@");if(B.indexOf("|")>1){for(var C,D=B.split("|"),E=D.shift().replace(/\@/g,"||").replace(v,function(){return A.shift()});C=A.shift();)D=C.split(":"),h=D[0],H="",D[1]&&(H=", "+D[1].replace(v,function(){return A.shift()})),E="avalon.filters."+h+"("+E+H+")";j="="+E}}q+=" ;r +"+j+";";break;case"#":break;case"-":default:j=j.replace(u,function(){return k=!0,""}),q+=j.replace(r,"$1data.")}y=i+e.length}l=!l}q+=" return r; }catch(e){ avalon.log(e);\navalon.log(js"+n+"[line"+n+"-1]) }}";var F=["txt"+n,"js"+n,"filters"],G=Function.apply(Function,F.concat(f,q)),H=[m,w,avalon.filters],I=G.apply(this,H.concat(g));return"string"==typeof c?s.cache[c]=I:I},s.cache={},avalon.filters.unescape=function(a){return a.replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")};var t=0,u=avalon.ui.smartgrid=function(l,n,t){var u=n.smartgridOptions,v=avalon(l),w=u.pager,x=n.smartgridId,y=!0;if(j(u,l),b(u,l),u._position=o?"absolute":"fixed",u.loading.onInit=function(a){A.loadingVModel=a},u.$pagerConfig={canChangePageSize:!0,options:[10,20,50,100],onInit:function(a){A&&(A.pager=a)}},u.pageable=void 0!==u.pageable?u.pageable:!0,"object"===avalon.type(w)){if(w.prevText=w.prevText||"上一页",w.nextText=w.nextText||"下一页",u.pageable&&(w.getTemplate="function"==typeof w.getTemplate?w.getTemplate:function(a,b){var c="";return c=Array.isArray(w.options)&&b.canChangePageSize?'<div class="oni-smartgrid-pager-options"><div class="oni-smartgrid-showinfo">每页显示</div><select ms-widget="dropdown" data-dropdown-list-width="50" data-dropdown-width="50" ms-duplex="perPages"><option ms-repeat="options" ms-value="el.value" ms-attr-label="el.value">{{el.text}}</option></select><div class="oni-smartgrid-showinfo">条, {{totalItems}}条结果</div></div>':'<div class="oni-smartgrid-pager-options">{{totalItems}}条结果</div>',a+c}),w.onInit&&"function"==typeof w.onInit){var z=w.onInit;w.onInit=function(a,b,c){A&&(A.pager=a),z(a,b,c)}}avalon.mix(u.$pagerConfig,u.pager)}else u.pager={};u.pager=null,u.template=u.getTemplate(c,u),u.$skipArray=["_allEnabledData","template","widgetElement","container","_container","_position","htmlHelper","selectable","loadingVModel","loading","pageable","noResult","sortable","pager","data","containerMinWidth","_disabledData","_enabledData","_filterCheckboxData"].concat(u.$skipArray);var A=avalon.define(x,function(b){avalon.mix(b,u),b.widgetElement=l,b._headerTop=0+u.affixHeight,b._container=null,b._fixHeaderToggle=!1,b._gridWidth=0,b._pagerShow=!1,b._allEnabledData=[],b._disabledData=[],b._enabledData=[],b._filterCheckboxData=[],b.loadingVModel=null,b._dataRender=!1,b._hiddenAffixHeader=function(a,b){var c=A.selectable;return c&&c.type&&"selected"==a.key&&!b},b.getRawData=function(){return A.data},b.getSelected=function(){var a=A._disabledData,b=[];return a.forEach(function(a){a.selected&&b.push(a)}),b.concat(A._enabledData)},b.selectAll=function(a){a=void 0!==a?a:!0,A._selectAll(null,a)},b.isSelectAll=function(){return A._allSelected},b.sortColumn=function(a,b,c){var d=c.target,e=avalon(d),f="",g=a.key,h=0,i=A.onColumnSort;A.data.length&&(f=e.hasClass("oni-helper-sort-top")?"asc":"desc",q=!0,h="asc"==f?1:-1,a.sortTrend=f,A.sortable.remoteSort&&"function"==typeof A.remoteSort&&!p.test(A.remoteSort)?A.remoteSort(g,f,A):"function"!=typeof a.localSort||p.test(a.localSort)?(A.data.sort("Number"===a.type?function(a,b){return h*(a[g]-b[g])||0}:function(a,b){return h*a[g].localeCompare(b[g])}),A.render(),"function"===avalon.type(i)&&i.call(A,f,g)):(A.data.sort(function(b,c){return h*a.localSort(b,c,g,A.$model)||0}),A.render(),"function"===avalon.type(i)&&i.call(A,f,g)))},b.setColumns=function(a,b){var c=A.columns;a=[].concat(a),b=void 0!==b?b:!0;for(var d=0,e=c.length;e>d;d++){var f=c[d],g=f.$model.key,h=a.indexOf(g);-1==h||f.isLock||(f.toggle=b)}},b.showNoResult=function(a){A.noResult=a||A.noResult,A.data=[],A.render()},b.showLoading=function(){A.loadingVModel.toggle=!0},b.hideLoading=function(){A.loadingVModel.toggle=!1},b._selectAll=function(a,b){var c=A.data,d=A._container.getElementsByTagName("tr"),e=A.onSelectAll;setTimeout(function(){{var f=a?a.target.checked:b;c.concat()}A._allSelected=f;for(var g=0,h=d.length;h>g;g++){var i,j=d[g],k=avalon(j),l=j.cells[0].getElementsByTagName("input")[0],m=l&&avalon(l).attr("data-index");null!==m&&void 0!==m&&(i=c[m],i.disable||(i.selected=f,l.checked=f,k[f?"addClass":"removeClass"]("oni-smartgrid-selected")))}A._enabledData=f?A._allEnabledData.concat():[],"function"===avalon.type(e)&&e.call(A,c,f)},100)},b._toggleColumn=function(a,b){if(!A._container)return a;for(var c,d=A._container.getElementsByTagName("tr"),e=null,f=0,g=d.length;g>f;f++)c=d[f],e=c.cells[b],e&&(c.cells[b].style.display=a?"table-cell":"none");return setTimeout(function(){A._setColumnWidth()},100),a},b._setColumnWidth=function(a){var b=A._container.getElementsByTagName("tr")[0].cells,c=A.columns,d=c.$model,e=avalon(A.container),f=e.width(),i=h(d),j=g(c,A);i>f&&!a?(e.css("width",i),j.width=j.configWidth):(e.css("width","auto"),j.width="auto");for(var k=0,l=b.length;l>k;k++){var m=avalon(b[k]),n=m.width(),o=c[k];o._fixWidth=n}A._gridWidth=f},b._getTemplate=function(a,b){var c,d,e="smartgrid_tmp_"+k,f=a||A.data,g=A.columns,h=g.$model,i=A.selectable&&A.selectable.type||"",j=[];avalon.each(f,function(a,b){b.$id&&"remove"!=b.$id&&j.push(b)});var l=j.length;checkRow="Checkbox"===i,s[e]?c=s[e]:(c=s.compile(u.template,A.htmlHelper),s[e]=c);for(var m=0,n=h.length;n>m;m++){var o=h[m],p=o.key;q||g[m].sortTrend&&(g[m].sortTrend="ndb");for(var r=0;l>r;r++){var t=j[r];t[p]=void 0!==t[p]?t[p]:o.defaultValue}}return d=c({data:j,columns:g,len:2,noResult:A.noResult,vmId:x,startIndex:b||0,checkRow:checkRow})},b._getAllCheckboxDisabledStatus=function(a){var b=A._filterCheckboxData.length,c=A._disabledData.length,d=b+c;return a&&d===A.data.length?!0:!1},b.addRows=function(b,c,d){if(b&&b.length||c){var e,g="",h=A.container,j=h.getElementsByTagName("tbody")[0]||h.getElementsByTagName("table")[0],k=A.selectable,l=A.getLen(A.data),m=A.data.length;if(j){if((0===l||c)&&avalon.clearHTML(j),A._pagerShow=l?!0:!1,b){var n=[];avalon.each(b,function(b,c){n.push(avalon.mix({},c)),n[b].$id=a()}),A.data.push.apply(A.data,n)}if(avalon.each(A.data,function(b,c){c.$id=c.$id||a()}),g=A.addRow(A._getTemplate(b?A.data.slice(m):b,b?m:0),A.columns.$model,t),e=avalon.parseHTML(g),j.appendChild(e),k&&("Checkbox"===k.type||"Radio"===k.type)){var o=i(A.data);A._allSelected=o,f(A)}d||A.showLoading(A.data),avalon.nextTick(function(){avalon.scan(A.container,[A].concat(t)),A._setColumnWidth(),d||A.hideLoading()}),q&&(q=!1)}}},b.getLen=function(a){for(var b=0,c=0,d=a.length;d>c;c++)a[c]&&"remove"!=a[c].$id&&b++;return b},b.removeRow=function(a,b){var c=A.data[a];if(c){var d=c.$id,e=document.getElementById(d);e&&e.parentNode.removeChild(e),b===!1?c.$id="remove":A.data.splice(a,1),A.getLen(A.data)||A.render(void 0,!0)}},b.render=function(a,b,c){"array"===avalon.type(a)?A.data=a:b=a,b=void 0===b||b?!0:!1,y?y=!1:(e(A),A._dataRender=!A._dataRender),A.addRows(void 0,b,c),q?q=!1:b||A.container.scrollIntoView()},b.$init=function(){var a=A.container,b="";b=m.replace("MS_OPTION_ID",A.$id),a.innerHTML=b,e(A),avalon.scan(a,A),avalon.nextTick(function(){A._container=a.getElementsByTagName("tbody")[0],A.render(!0),d(A)}),A.isAffix&&(r.scrollCallback=avalon(window).bind("scroll",function(){var a=Math.max(document.body.scrollTop,document.documentElement.scrollTop),b=v.offset().top,c=avalon(l.getElementsByTagName("thead")[0]).css("height"),d=a-b+A.affixHeight,e=avalon(window).height(),f=v.outerHeight(),g=A._position;f>e&&a>b+c&&b+f>a?("absolute"===g&&(A._headerTop=Math.floor(d)),A.$model._fixHeaderToggle||(A._fixHeaderToggle=!0)):("absolute"===g&&(A._headerTop=0),A.$model._fixHeaderToggle&&(A._fixHeaderToggle=!1))})),l.resizeTimeoutId=0,r.resizeCallback=avalon(window).bind("resize",function(){clearTimeout(l.resizeTimeoutId);var a=avalon(window).width();a<=A.containerMinWidth&&(l.style.width=A.containerMinWidth+"px"),l.resizeTimeoutId=setTimeout(function(){A._container&&A._setColumnWidth(!0)},150)}),"function"==typeof u.onInit&&u.onInit.call(l,A,u,t)},b.$remove=function(){var a=A.container;a.innerHTML=a.textContent="",avalon(window).unbind("resize",r.resizeCallback).unbind("scroll",r.scrollCallback)}});return A};return u.defaults={container:"",data:[],columns:[],allChecked:!0,htmlHelper:{},noResult:"暂时没有数据",remoteSort:avalon.noop,isAffix:!1,affixHeight:0,containerMinWidth:600,selectable:!1,loading:{toggle:!1,modal:!0,modalBackground:"#000"},sortable:{remoteSort:!0},addRow:function(a){return a},getTemplate:function(a){return a}},avalon}()},{"../dropdown/avalon.dropdown":15,"../loading/avalon.loading":20,"../pager/avalon.pager":25}],34:[function(a,b){var c=a("../avalon.getModel"),d='<div class="oni-spinner oni-widget">\n    <button type="button" class="oni-btn" \n            ms-click="_sub" \n            ms-disabled="min==value || disabled"\n            ms-class="oni-state-disabled:min==value || disabled">\n        <i class="oni-icon oni-icon-minus">&#xf068;</i>\n    </button>\n    <div class="oni-textbox oni-widget-content" ms-class="oni-state-disabled:disabled">\n        <div class="oni-textbox-input-wrap">\n            <b>tmp</b>\n        </div>\n    </div>\n    <button type="button" class="oni-btn" \n            ms-click="_add" \n            ms-disabled="max==value || disabled"\n            ms-class="oni-state-disabled:max==value || disabled">\n        <i class="oni-icon oni-icon-plus">&#xf067;</i>\n    </button>\n</div>';b.exports=function(){var a=c.ui.spinner=function(a,b,e){function f(){var b=t.min,c=t.max,d=Number(a.value);"number"==typeof b&&!isNaN(Number(b))&&b>d&&(d=b),"number"==typeof c&&!isNaN(Number(c))&&d>c&&(d=c),t.value=a.value=d}function g(){var b=c(a);b.addClass("oni-textbox-input"),b.attr("ms-css-width","width"),b.attr("ms-class","oni-state-disabled:disabled"),b.bind("blur",function(){value=a.value,isNaN(Number(value))||(value=h(a.value)),t.value=a.value=value}),b.bind("keydown",function(a){switch(a.which){case 38:return t._add(a),!1;case 40:return t._sub(a),!1}})}function h(a){var b=Number(a)||0,c=t.min,d=t.max;return"number"!=typeof c||isNaN(Number(c))||c>b&&(b=c),"number"!=typeof d||isNaN(Number(d))||b>d&&(b=d),parseFloat(b)}var i,j,k=b.spinnerOptions,l=d,m=function(){var b=a.msData;for(var c in b)if(0===c.indexOf("ms-duplex"))return b[c]}(),n=m&&c.getModel(m,e)||null,o=a.msData["ms-disabled"],p=o&&c.getModel(o,e)||null,q=Number(k.min),r=Number(k.max),s=0;n&&n[1].$watch(n[0],function(b){return/[^0-9]/.test(b+"")?void(t.value=a.value=s):void(""!==b&&(b=h(b),t.value=a.value=s=b))}),p&&p[1].$watch(p[0],function(a){t.disabled=a}),isNaN(q)&&"string"==typeof k.min&&(i=c.getModel(k.min,e)||null,i?(i[1].$watch(i[0],function(a){t.min=a}),k.min=i[1][i[0]]):k.min=0/0),isNaN(r)&&"string"==typeof k.max&&(j=c.getModel(k.max,e)||null,j?(j[1].$watch(j[0],function(a){t.max=a}),k.max=j[1][j[0]]):k.max=0/0),k.template=k.getTemplate(l,k),a.value=k.value||a.value,void 0===k.value&&(k.value=a.value),k.disabled=o&&p&&p[1][p[0]]||a.disabled||!1;var t=c.define(b.spinnerId,function(b){c.mix(b,k),b.$skipArray=["widgetElement","step"],b.widgetElement=a;var d=null;b.$init=function(){d=c.parseHTML(k.template).firstChild;var b=d.getElementsByTagName("b")[0],h=b.parentNode,i=document.createElement("div"),j=a.parentNode;g(),j.insertBefore(i,a),h.appendChild(a),h.removeChild(b),j.replaceChild(d,i),c.scan(d,[t].concat(e)),f(),"function"==typeof k.onInit&&k.onInit.call(a,t,k,e)},b.$remove=function(){d.innerHTML=d.textContent="",d.parentNode.removeChild(d)},b._add=function(b){var c=Number(a.value),d=0;d=c+(k.step||1),d=h(d),t.value=a.value=d,k.onIncrease.call(b.target,d)},b._sub=function(b){var c=Number(a.value),d=0;if(d=c-(k.step||1),isNaN(d))throw new Error("输入域的值非数值，或者step的设置为非数值，请检查");d=h(d),t.value=a.value=d,k.onDecrease.call(b.target,d)},b.$watch("min",function(){f()}),b.$watch("max",function(){f()})});return t};return a.version=1,a.defaults={min:0/0,max:0/0,step:1,width:"auto",value:0,disabled:!1,widgetElement:"",getTemplate:function(a){return a},onDecrease:c.noop,onIncrease:c.noop},c}()},{"../avalon.getModel":3}],35:[function(a,b){var c='<div class="oni-dropdown"\r\n     ms-class="oni-dropdown-disabled:!enable"\r\n     ms-class-1="oni-state-focus: focusClass"\r\n     ms-css-width="{{width}}"\r\n     ms-hover="oni-state-hover"\r\n     ms-keydown="_keydown"\r\n     tabindex="0">\r\n    <div class="oni-dropdown-source">\r\n        <div class="oni-dropdown-input"\r\n             ms-title="title"\r\n             ms-css-width="titleWidth"\r\n             id="title-MS_OPTION_ID">\r\n            {{currentOption.data.titleValue|sanitize|html}}\r\n        </div>\r\n        <div class="oni-dropdown-icon-wrap">\r\n            <i class="oni-dropdown-icon oni-icon oni-icon-angle-up"\r\n               ms-if="toggle">&#xf106;</i>\r\n            <i class="oni-dropdown-icon oni-icon oni-icon-angle-down"\r\n               ms-if="!toggle">&#xf107;</i>\r\n        </div>\r\n    </div>\r\n</div>\r\nMS_OPTION_TEMPLATE\r\n<div class="oni-dropdown"\r\n     ms-class="oni-dropdown-menu:!multiple"\r\n     ms-class-1="{{listClass}}"\r\n     ms-css-width="{{listWidth}}"\r\n     ms-mouseenter="_listenter"\r\n     ms-mouseleave="_listleave"\r\n     ms-visible="toggle||multiple">\r\n    <div class="oni-dropdown-menu-inner"\r\n         ms-css-width="menuWidth"\r\n         ms-css-height="menuHeight"\r\n         ms-widget="scrollbar,scrollbar-MS_OPTION_ID" id="menu-MS_OPTION_ID">\r\n        <div class="oni-scrollbar-scroller"\r\n             id="list-MS_OPTION_ID">\r\n            <div ms-repeat="data"  class="oni-dropdown-item"\r\n                 ms-click-12="_select($index, $event)"\r\n                 ms-title="el.title||el.label"\r\n                 ms-hover="oni-state-hover: el.enable"\r\n                 ms-class-1="oni-state-disabled:!el.enable"\r\n                 ms-class-2="oni-state-active:isActive(el) "\r\n                 ms-class-4="oni-dropdown-group:el.group"\r\n                 ms-class-5="oni-dropdown-divider:el.group && !$first"\r\n                 data-repeat-rendered="updateScrollbar"\r\n                    >{{el.label|sanitize|html}}</div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';a("../dropdown/avalon.dropdown"),a("../avalon.getModel"),b.exports=function(){function a(a,b,c){var e=b||[],f=a.children;c=c||null;for(var g,h=0;g=f[h++];)if(1===g.nodeType&&"OPTION"===g.tagName){var i={label:" "+g.text.trim(),title:g.title.trim(),value:d(avalon(g).val()),enable:!g.disabled,group:!1,selected:g.selected,parent:c};if(avalon(g).attr("data-title-value")&&(i.titleValue=" "+avalon(g).attr("data-title-value").trim()),e.push(i),2===e.length)break}return e}function b(a){return avalon.each(a,function(a,b){b.text=b.label,b.label=['<i class="oni-icon ',b.iconClass,'">',b.font,"</i>",b.label].join(""),b.titleValue=['<i class="oni-icon ',b.iconClass,'">',b.font,"</i>",b.titleValue].join("")}),a}function d(a){try{a="true"===a?!0:"false"===a?!1:"null"===a?null:+a+""===a?+a:a}catch(b){}return a}var e=[{value:1,label:" 启用",iconClass:"g-icon-start",title:"启用",font:"&#xf111;",titleValue:" 已启用"},{value:2,label:" 暂停",iconClass:"g-icon-pause",title:"暂停",font:"&#xf04c;",titleValue:" 已暂停"}],f=avalon.ui.switchdropdown=function(c,d,f){var g=d.switchdropdownOptions;g.data=b(avalon.mix(!0,[],e,a(c),g.data));for(var h,i=g.value,j=g.data[0].value,k=0,l=g.data.length;l>k;k++){if(h=g.data[k],h.value===i){j=i;break}h.selected&&(j=h.value)}g.value=j;var m=avalon.define("switchdropdown"+setTimeout("1"),function(a){a.$opts=g,a.$init=function(a){a?a():(avalon.log("请尽快升到avalon1.3.7+"),avalon.scan(c,[m].concat(f)),"function"==typeof g.onInit&&g.onInit.call(c,m,g,f))}});return avalon(c).attr("ms-widget",["dropdown",d.switchdropdownId,"$opts"].join()),c.innerHTML="",m};f.version="1.0",f.defaults={width:100,listWidth:100,height:60,enable:!0,readOnly:!1,data:[],value:"",getTemplate:function(){return c},onInit:avalon.noop}}()},{"../avalon.getModel":3,"../dropdown/avalon.dropdown":15}],36:[function(a,b){var c='<div class="oni-tab-slider"\r\n    ms-visible="toggle">\r\n    <a href="#" class="oni-tab-slider-button oni-tab-slider-button-left" \r\n       ms-visible="prevEnable" \r\n       ms-click="slider($event,\'prev\')"><</a>\r\n    <div class="oni-tab-slider-ct oni-tab-slider-enable" \r\n         ms-css-margin-left="-sliderIndex*100+\'%\'">\r\n        <ul class="oni-tab-nav oni-helper-clearfix oni-widget-header oni-helper-reset" \r\n        ms-attr-id="\'tabs\' + tabs.$id">\r\n            <li class="oni-state-default" \r\n                data-repeat-rendered="computeSlider" \r\n                ms-repeat-tab="tabs" \r\n                ms-class="oni-tab-item"  \r\n                ms-class-1="oni-state-active:!!_canActive(tab, $index)" \r\n                ms-class-2="oni-state-disabled:tab.disabled" \r\n                ms-class-3="oni-tab-last:$last" \r\n                ms-class-4="oni-tab-removable:!!_canRemove(tab)" \r\n                ms-hover="oni-state-hover:!tab.disabled" \r\n                ms-{{MS_OPTION_EVENT}}="activate($event, $index)" \r\n                > \r\n                <a ms-href="tab.href?tab.href:\'#\'" ms-attr-target="tab.target||target||\'_self\'">{{_tabTitle(tab.title, tab, _cutCounter(), cutEnd) | sanitize | html}}</a>\r\n                {{MS_OPTION_REMOVABLE}}\r\n            </li>\r\n        </ul>\r\n    </div>\r\n    <a href="#" class="oni-tab-slider-button" \r\n       ms-visible="nextEnable"\r\n       ms-click="slider($event,\'next\')">></a>\r\n</div>',d='<div class="oni-tab-panel-container" ms-each-panel="tabpanels"\r\n	 ms-visible="toggle"\r\n	 ms-if="tabpanels.size()">\r\n     <div class="oni-tab-panel oni-widget-content" \r\n          ms-visible="_shallPanelAlwaysShow($index)" \r\n          ms-if-loop="_isAjax(panel)">{{panel.content | sanitize | html }}</div>\r\n     <div class="oni-tab-panel oni-widget-content"\r\n          ms-visible="_shallPanelAlwaysShow($index)" \r\n          ms-include-src="panel.content" \r\n          ms-if-loop="!_isAjax(panel)" data-include-rendered="onAjaxCallback">\r\n     </div>\r\n</div>',e='<span  class="oni-tab-close oni-icon oni-icon-close"\r\n       ms-visible="!tab.disabled"\r\n       ms-click="remove($event, $index)" \r\n       ms-hover="oni-tab-close-hover" \r\n       ms-if="!!_canRemove(tab)">&times;\r\n</span>';b.exports=function(){function a(a,b){return a.replace(/\{\{MS_[A-Z_0-9]+\}\}/g,function(c){var c=(c.split("{{MS_OPTION_")[1]||"").replace(/\}\}/g,"").toLowerCase().replace(/_[^_]/g,function(a){return a.replace(/_/g,"").toUpperCase()});if("event"==c&&b[c]){var d,f;if(d=a.match(new RegExp(" ms-"+b[c]+"[^'\\\"]","g"))){for(f=d.length,d=d.join(",");d.match(new RegExp(f,"g"));)f++;return b[c]+"-"+f}}else if("removable"==c)return e;return b[c]||""})}function b(a,b,c){for(var d,e=[],f=0;d=a&&a.children[f++];)if(d.tagName.toLowerCase()==b){var g=avalon(d).data(),h="div"==b?{content:g.content||d.innerHTML,contentType:g.contentType||"content"}:{title:d.innerHTML,removable:g.removable,linkOnly:g.linkOnly,target:g.target||c||"_self",disabled:void 0==g.disabled?!1:g.disabled},i=g.href||d.getAttribute("href");i&&(h.href=i),e.push(h)}return e}var f=avalon.ui.tab=function(c,d,e){var f,g=d.tabOptions,h=[],i=[];if(avalon.each(g.tabs,function(a,b){b.disabled=!!b.disabled}),void 0==g.tabs&&(avalon.scan(c,e),f=g.tabContainerGetter(c),i=b(f,"li",g.target),g.distroyDom&&c.removeChild(f)),void 0==g.tabpanels&&(panelsParent=g.panelContainerGetter(c),h=b(panelsParent,"div"),g.distroyDom))try{c.removeChild(panelsParent)}catch(j){}var k=avalon.define(d.tabId,function(b){b.$skipArray=["widgetElement","callInit"],b.tabs=[],b.tabpanels=[],avalon.mix(b,g),b.widgetElement=c;var d,f;if(b.$init=function(f){var j=f&&!avalon.isFunction(f);if(!d&&(j||b.callInit)){d=!0,g.tabs||(b.tabs=i),b.tabpanels.length||(b.tabpanels=h),b.active=b.active>=b.tabs.length&&b.tabs.length-1||b.active<0&&0||parseInt(b.active)>>0,avalon(c).addClass("oni-tab oni-widget oni-widget-content"+("click"==b.event?" oni-tab-click":"")+("v"==b.dir?" oni-tab-vertical":"")+("v"!=b.dir&&"small"==b.uiSize?" oni-tab-small":""));var l=a(b._getTemplate(0,b),b),m=a(b._getTemplate("panel",b),b);c.innerHTML=k.bottom?m+l:l+m,f?f():(avalon.log("avalon请尽快升到1.3.7+"),avalon.scan(c,[k].concat(e)),"function"==typeof g.onInit&&g.onInit.call(c,k,g,e)),b.autoSwitch&&b._autoSwitch()}},b._clearTimeout=function(){clearTimeout(f)},b.activate=function(a,c){if(b.tabs[c].disabled!==!0&&!b.tabs[c].linkOnly){var d=this;if("click"===b.event&&b.active===c)return void(b.collapsible?(b.active=0/0,a.preventDefault()):g.onClickActive.call(d,a,k)||a.preventDefault());"click"===b.event&&a.preventDefault(),b.active!==c&&(b.active=c,g.onActivate.call(d,a,k))}},"mouseenter"==b.event&&b.activeDelay){var j,l=b.activate;b.activate=function(a,c){clearTimeout(j);{var d=this;arguments}j=setTimeout(function(){l.apply(d,[a,c,"fix event bug in ie"])},b.activeDelay)}}return b._autoSwitch=function(){clearTimeout(f),b.tabs.length<2||(f=setTimeout(function(){for(var a=b.active+1,c=0;a!=b.active&&c<b.tabs.length-1;){if(a>=b.tabs.length&&(a=0),!b.tabs[a].disabled){b.active=a,b._autoSwitch();break}a++,c++}},b.autoSwitch))},b.$remove=function(){c.innerHTML=c.textContent=""},b.disable=function(a,c){c=void 0==c?!0:c,a instanceof Array||(a=[a]);var d=b.tabs.length;avalon.each(a,function(a,e){e>=0&&d>e&&(b.tabs[e].disabled=c)})},b.enable=function(a){b.disable(a,!1)},b.add=function(a){var c=a.title||"Tab Tile",d=a.content||"<div></div>",e=!1;b.tabpanels.forEach(function(b){"include"==b.contentType&&b.content==a.content&&(e=!0)}),e!==!0&&(b.tabpanels.push({content:d,contentType:a.contentType}),b.tabs.push({title:c,removable:a.removable,disabled:!1}),a.actived&&avalon.nextTick(function(){k.active=k.tabs.length-1}))},b.remove=function(a,c){2==arguments.length?(a.preventDefault(),a.stopPropagation()):c=a,k.tabs[c].disabled===!0||k.tabs[c].removable===!1||void 0==k.tabs[c].removable&&!b.removable||(k.tabs.removeAt(c),k.tabpanels.removeAt(c),c=c>1?c-1:0,avalon.nextTick(function(){k.active=c}),b.bottom=g.bottom)},b._canRemove=function(a){return(1==a.removable||a.removable!==!1&&b.removable)&&!a.disabled&&"v"!=b.dir},b._canActive=function(a,c){return b.active==c&&!a.disabled},b._isAjax=function(a){return"content"==b.contentType&&!a.contentType||"content"==a.contentType},b._cutCounter=function(){return("h"==k.dir||k.forceCut)&&k.titleCutCount},b._shallPanelAlwaysShow=function(a){return k.shallPanelAlwaysShow||a===k.active},b.sliderIndex=0,b.sliderLength=0,b.nextEnable=0,b.prevEnable=0,b.slider=function(a,c){a.preventDefault();var d;"prev"===c?(d=b.sliderIndex-1,d=d>0?d:0):(d=b.sliderIndex+1,d=d<=b.sliderLength-1?d:b.sliderLength-1),b.sliderIndex=d,b.buttonEnable()},b.computeSlider=function(){if("v"!==b.dir){var a=document.getElementById("tabs"+b.tabs.$id);if(a){var c=a.scrollWidth,d=a.parentNode.parentNode.clientWidth;b.sliderLength=c>d?c/d:0,b.buttonEnable()}}},b.buttonEnable=function(){b.nextEnable=b.sliderIndex>=b.sliderLength-1?0:1,b.prevEnable=b.sliderIndex<=0?0:1},b});return k.autoSwitch&&(avalon.bind(c,"mouseenter",function(){k._clearTimeout()}),avalon.bind(c,"mouseleave",function(){k._clearTimeout(),k._autoSwitch()}),k.$watch("autoSwitch",function(a){k._clearTimeout(),a&&k._autoSwitch()})),k};f.defaults={target:"_blank",toggle:!0,autoSwitch:!1,active:0,shallPanelAlwaysShow:!1,event:"mouseenter",removable:!1,activeDelay:0,collapsible:!1,contentType:"content",bottom:!1,dir:"h",callInit:!0,titleCutCount:8,distroyDom:!0,cutEnd:"...",forceCut:!1,onInit:avalon.noop,tabContainerGetter:function(a){return a.getElementsByTagName("ul")[0]||a.getElementsByTagName("ol")[0]},panelContainerGetter:function(a){return a.getElementsByTagName("div")[0]||a},onActivate:avalon.noop,onClickActive:avalon.noop,onAjaxCallback:avalon.noop,_getTemplate:function(a,b){var f,g;return f="panel"==a?d:"close"==a?e:c,g=b.getTemplate(f,b,a),g||""===g?g:f},getTemplate:function(a){return a},_tabTitle:function(a,b,c,d){var e;if(void 0!=b.titleCutCount?e=b.titleCutCount:void 0!=c&&(e=c),!e)return a;var f,g=a.split(/<[^>]+>/g),h=0,i=0;return avalon.each(g,function(b,c){if(f>=0)i="";else{var g=c.trim();h+g.length>e?(f=b,i=g.substr(0,e-h)+d):(h+=g.length,i=0)}0!==i&&(a=a.replace(c,i))}),a},$author:"skipper@123"}}()},{}],37:[function(a,b){var c=a("../avalon.getModel"),d="<ul class='oni-suggest' ms-each-item='list' ms-visible='toggle'>\r\n    <li class='oni-suggest-item' \r\n        ms-click='clickcallback($index,$event)' \r\n        ms-class='oni-suggest-item-selected:list[selectedIndex] == item' tabindex='-1' \r\n        ms-hover='oni-suggest-item-hover'>{{_renderItem(item)|html}}</li>\r\n</ul>\r\n";b.exports=function(){function a(b,c){return b?b==c?!0:a(b.parentNode,c):!1}function b(a,b,d){switch(b.which){case 9:if(!a.toggle)return;a.toggle=!1;break;case 27:if(!a.toggle)return;a.toggle=!1;break;case 13:if(b.preventDefault(),!a.toggle)return;a.toggle=!1,a.onChangeCallback(a.list[a.selectedIndex].value,a.inputElement,b);break;case 38:if(!a.toggle)return;--a.selectedIndex,d&&a.suggestCtr.moveUp(a.selectedIndex),-1===a.selectedIndex&&(a.selectedIndex=a.list.length-1),a.onChangeCallback(a.list[a.selectedIndex].value,a.inputElement,b),b.preventDefault();break;case 40:if(!a.toggle)return;++a.selectedIndex,d&&a.suggestCtr.moveDown(a.selectedIndex),a.selectedIndex===a.list.length&&(a.selectedIndex=0),a.onChangeCallback(a.list[a.selectedIndex].value,a.inputElement,b),b.preventDefault();break;default:var e=c.bind(a.inputElement,"keyup",function(){a.searchText=this.value||String.fromCharCode(b.which),c.unbind(a.inputElement,"keyup",e)})}}function e(a,b,d){if(1!=b.loading){var e=c.ui.suggest.strategies[b.strategy];e&&(b.loading=!0,e(a,function(a){b.selectedIndex=0,b.list.removeAll(),c.each(a,function(a,c){b.list.push("string"==typeof c?{text:c,value:c}:c)}),b.loading=!1,b.toggle=0==a.length?!1:!0,d&&b.suggestCtr.reset()}))}}function f(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var g=c.ui.suggest=function(b,e,f){var g=c(b),h=e.suggestOptions,i=h.getTemplate(d),j=c.parseHTML(i).firstChild,k=e.value.split(","),l=k[2]?c.getModel(k[2],f)||0:0,m=/^(\d+).*$/;l=h.notpuresuggest?l[1][l[0]]:0,l&&c.mix(h,l),h.inputElement=h.notpuresuggest?h.inputElement:document.getElementById(h.inputElement),h.textboxContainer=""==h.textboxContainer?h.inputElement:h.textboxContainer;var n,o=h.limit,p=h.suggestCtr||{_minIndex:0,_maxIndex:o-1,_items:"",moveUp:function(a){a<this._minIndex?0==this._minIndex?(this._minIndex=q.list.length-o,this._maxIndex=q.list.length-1,this._update(),this.scroll.set(this._getHeight(0,this._minIndex-1))):(this._minIndex--,this._maxIndex--,this._update(),this.scroll.pre()):this.scroll.isScolled&&this.scroll.recover()},moveDown:function(a){a>this._maxIndex?this._maxIndex==q.list.length-1?(this._minIndex=0,this._maxIndex=o-1,this._update(),this.scroll.set(0)):(this._minIndex++,this._maxIndex++,this._update(),this.scroll.next()):this.scroll.isScolled&&this.scroll.recover()},reset:function(){this._minIndex=0,this._maxIndex=o-1,n.scrollTop=0,this._items=n.getElementsByTagName("li"),this._update()},scroll:{isScolled:!1,set:function(a){n.scrollTop=a,this.isScolled=!1},pre:function(){this.isScolled?this.recover():n.scrollTop-=p._items[p._minIndex].offsetHeight},next:function(){this.isScolled?this.recover():n.scrollTop+=p._items[p._minIndex-1].offsetHeight},recover:function(){this.set(p._getHeight(0,p._minIndex-1))}},_update:function(){q.list.length>o?(n.style.overflowY="scroll",n.style.height=this._getHeight(this._minIndex,this._maxIndex)+"px"):(n.style.overflowY="auto",n.style.height="auto")},_getHeight:function(a,b){for(var c=0,d=this._items,e=a;b>=e;e++)c+=d[e].offsetHeight;return c}},q=c.define(e.suggestId,function(d){c.mix(d,h),d.$skipArray=["widgetElement","puresuggest","limit","suggestCtr"],d.widgetElement=b,d.list=[],d.searchText="",d.toggle=!1,d.loading=!1,d.selectedIndex=0,d.suggestCtr=p,d._renderItem=function(a){return a?q.renderItem(a,q):void 0},d.$watch("toggle",function(a){var d=h.inputElement,e=h.textboxContainer,f=c(d),i=c(e);if(a){if(e===d){var k=g.offset(),l=f.width()+"px";return b.style.cssText="position: absolute; left:"+k.left+"px;top:"+k.top+"px;",void(j.style.cssText="margin:0;left:0;top:0;width:"+l)}j.style.width=i.outerWidth()-2-c(j).css("paddingLeft").replace(m,"$1")-c(j).css("paddingRight").replace(m,"$1")+"px"}}),d.$watch("searchText",function(a){q.updateSource(a,q,o)}),d.clickcallback=function(a,b){var c=q.list[a].value;q.onChangeCallback(c,q.inputElement,b),"function"==typeof q.onSelectItem&&q.onSelectItem.call(null,c,q.inputElement),q.toggle=!1},d.hidepromptinfo=function(b){return q.toggle?void(a(b.target,h.textboxContainer)||(q.toggle=!1)):!1},d.$init=function(){c.bind(h.inputElement,"keydown",function(a){q.keyDownOperation(q,a,o)}),c.bind(document,"click",d.hidepromptinfo),c.nextTick(function(){b.appendChild(j),c.scan(b,[q].concat(f)),p.suggest=n=b.getElementsByTagName("ul")[0],c.bind(n,"scroll",function(){p.scroll.isScolled=!0}),"function"==typeof h.onInit&&h.onInit.call(b,q,h,f)})},d.$remove=function(){b.innerHTML=""}});if(h.focus&&c.bind(h.inputElement,"focus",function(){var a=this.value;q.searchText==a?q.updateSource(a,q,o):q.searchText=a}),h.onChange){var r=c.getModel(h.onChange,f),s=q.onChangeCallback;q.onChangeCallback=function(){s.apply(null,arguments),r[1][r[0]].apply(r[1],arguments)}}return q};return g.defaults={inputElement:"",strategy:"__getVal",textboxContainer:"",focus:!1,changed:!1,onSelectItem:"",emphasize:!0,getTemplate:function(a){return a},keyDownOperation:b,onChangeCallback:function(a,b){b.value=a},updateSource:e,renderItem:function(a,b){if(!b.emphasize)return a.text;a=a.text;var c=f(b.searchText);return a.replace(new RegExp("("+c+")","ig"),function(a,b){return b.charCodeAt(0)<32&&(b=""+b.slice(1)),"<b style='color:#f55'>"+b+"</b>"})}},c.ui.suggest.strategies={__getVal:function(a,b){b(a?[a+"1",a+"2",a+"3",a+"4",a+"5",a+"6",a+"7",a+"8",a+"9"]:[])}},c}()},{"../avalon.getModel":3}],38:[function(a,b){var c=a("./avalon.suggest"),d='<div class="oni-textbox" \n     ms-class="MS_OPTION_DISABLEDCLASS:elementDisabled"\n     ms-hover="oni-textbox-hover" \n     ms-class-1="oni-textbox-focus: focusClass" \n     ms-class-2="{{stateClass}}"\n     ms-visible="textboxToggle">\n    <div class="oni-textbox-input-wrap">\n        <span class="oni-textbox-placeholder"\n              ms-if="!placeholderOrigin"  \n              ms-visible="toggle"\n              ms-click = "hidePlaceholder"\n              ms-css-width="placeWidth"\n        >{{placehold}}</span>\n    </div>\n    MS_OPTION_ICON\n</div>\nMS_OPTION_SUGGEST\n<div class="oni-textbox-suggest" \n     ms-widget = "suggest,$,$suggestopts" data-suggest-notpuresuggest=true>\n</div>';b.exports=function(){var a=d.split("MS_OPTION_SUGGEST"),b=a[1],e="placeholder"in document.createElement("input"),f=c.ui.textbox=function(a,f,g){var h=a.parentNode,i=c(a),j=f.textboxOptions,k="",l="",m="",n="",o=j.placeholder;if(d=d.replace(/MS_OPTION_DISABLEDCLASS/gm,j.disabledClass),d=j.getTemplate(d),l=c.parseHTML(d).firstChild,m=l.getElementsByTagName("div")[0],n=l.getElementsByTagName("span")[0],j.suggest){var p={inputElement:a,strategy:j.suggest,textboxContainer:l,focus:j.suggestFocus||!1,onChange:j.suggestOnChange||"",type:"textbox",limit:j.limit||8};$suggestopts=c.mix(p,j.suggestion),j.$suggestopts=$suggestopts}o=c(a).attr("placeholder")||o||"";var q,r,s=c.define(f.textboxId,function(d){c.mix(d,j),d.$skipArray=["widgetElement","disabledClass","autoTrim","suggest"],d.widgetElement=a,d.elementDisabled="",d.toggle=!0,d.placehold=o,d.focusClass=!1,d.placeholderOrigin=e,d.placeWidth=0,d.hidePlaceholder=function(){d.toggle=!1,a.focus()
},d.blur=function(){s.focusClass=!1,s.elementDisabled=a.disabled,j.autoTrim&&(a.value=a.value.trim()),s.placeholderOrigin||(s.toggle=""==a.value&&s.placehold.length?!0:!1)},d.$remove=function(){var a=l.parentNode;a.removeChild(l),l.innerHTML=l.textContent=""},d.$init=function(e){c.bind(a,"blur",d.blur),j.autoFocus&&c.bind(a,"mouseover",function(){a.focus()}),i.addClass("oni-textbox-input");var f=document.createElement("div");if(h.insertBefore(f,a),a.msRetain=!0,m.appendChild(a),~j.width&&i.width(j.width),~j.height&&i.height(j.height),~j.tabIndex&&(a.tabIndex=j.tabIndex),h.replaceChild(l,f),a.msRetain=!1,j.suggest){var k=c.parseHTML(b).firstChild;l.appendChild(k)}c.bind(a,"focus",function(){s.focusClass=!0,s.placeholderOrigin||(s.toggle=!1)}),c.scan(l,[s].concat(g)),s.placeholderOrigin?s.placehold.length&&i.attr("placeholder",s.placehold):(s.placehold.length&&""==a.value||(s.toggle=!1),s.placeWidth=c(m).innerWidth()),e?e():(c.log("avalon请尽快升到1.3.7+"),c.scan(a,[s].concat(g)),"function"==typeof j.onInit&&j.onInit.call(a,s,j,g)),d.elementDisabled=a.disabled}});for(var t in a.msData)if(0===t.indexOf("ms-duplex")){q=a.msData[t];break}return q&&(k=c.getModel(q,g),k&&k[1].$watch(k[0],function(){s.elementDisabled=a.disabled,s.placeholderOrigin||(s.toggle=""==a.value&&s.placehold.length?!0:!1)})),r=a.msData["ms-disabled"]||a.msData["ms-attr-disabled"]||a.msData["ms-enabled"]||a.msData["ms-attr-enabled"],r&&(k=c.getModel(r,g),k&&k[1].$watch(k[0],function(){s.elementDisabled=a.disabled,s.placeholderOrigin||(s.toggle=""==a.value&&s.placehold.length?!0:!1)})),s};return f.defaults={suggest:!1,suggestion:{},autoTrim:!0,widgetElement:"",tabIndex:-1,width:-1,autoFocus:!1,disabledClass:"oni-textbox-disabled",getTemplate:function(a){return a.replace(/MS_OPTION_ICON/,"")},stateClass:"",suggestOnChange:"",suggestFocus:!1},c}()},{"./avalon.suggest":37}],39:[function(a,b){var c='<div class="oni-textbox" ms-click="_toggleDialog">\r\n    <div class="oni-textbox-input-wrap">\r\n        <span ms-css-width="width" ms-css-color="_timeTextColor">{{getTimeText(timeDate, placeHolder)}}</span>\r\n    </div>\r\n</div>\r\nMS_OPTION_TEXTBOX\r\n<div>\r\n    <div class="oni-timer" ms-css-height="_timerHeight">\r\n        <div class="oni-timer-date">\r\n            <ul>\r\n                <li ms-repeat-item="dates" ms-class="oni-state-active:$index == _currentDateIndex" ms-css-color="item.color">{{item.date}}</li>\r\n            </ul>\r\n        </div>\r\n        <div class="oni-timer-hour" ms-css-left="_hourLeft">\r\n            <ul>\r\n                <li ms-repeat-item="hours" ms-class="oni-state-active:$index == _currentHourIndex" ms-css-color="item.color">{{item.hour}}</li>\r\n            </ul>\r\n        </div>\r\n        <div class="oni-timer-minute" ms-css-left="_minuteLeft">\r\n            <ul>\r\n                <li ms-repeat-item="minutes" ms-class="oni-state-active:$index == _currentMinuteIndex" ms-css-color="item.color">{{item.minute}}</li>\r\n            </ul>\r\n        </div>\r\n        <p class="oni-timer-mask" \r\n           ms-css-top="Math.floor(showItems/2) * 30"\r\n           ms-css-width="_timerWidth"></p>\r\n    </div>  \r\n</div>\r\n';a("../dialog/avalon.dialog"),b.exports=function(){function a(a){for(var b=a.getElementsByTagName("div"),c=null,d=null,e=null,f=null,g="",h=0,i=b.length;i>h;h++)c=b[h],g=c.className,-1!=g.indexOf("oni-timer-date")?d=c:-1!=g.indexOf("oni-timer-hour")?e=c:-1!=g.indexOf("oni-timer-minute")&&(f=c);return[d,e,f]}function b(a,b){a=String(a);for(var c=0,d=b-a.length;d>c;c++)a="0"+a;return a}function d(a){var c,d=new Date,e=d,f=[],g="",h=0,i=0,j=0,k=[],l="",m=[],n="",o=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];if(!(k=a.getHours()))for(k=[],c=0;24>c;c++)l=b(c,2),k.push({hour:l,_hour:c,color:"rgba(51, 51, 51, 1)"});if(!(m=a.getMinutes()))for(m=[],c=0;60>c;c+=5)n=b(c,2),m.push({minute:n,_minute:c,color:"rgba(51, 51, 51, 1)"});if(!(f=a.getDates()))for(f=[],c=1;60>c;c++)h=d.getFullYear(),i=d.getMonth(),j=d.getDate(),g=(a.showYears?h+"年":"")+b(i+1,2)+"月"+b(j,2)+"日"+o[d.getDay()],d=new Date(e.setDate(e.getDate()+c)),e=new Date,f.push({date:g,year:h,month:i,day:j,color:"rgba(51, 51, 51, 1)"});return{dates:f,minutes:m,hours:k}}function e(a,b){var c="",d="";b.forEach(function(b){"mousewheel"===a?(c="ms-on-mousewheel",d='_eventCallback("'+a+'", $event)'):(c="ms-on-"+j.eStart,d='_eventCallback("start", $event)'),b.setAttribute(c,d)})}function f(a,b,c,d){var e,f=a._initIndex,g=-b+f,h=0,i=0,j=0,k=0;if(a[d]=g,e=a[c],k=e.length,!(0>g||g>=k)){e[g].color="rgb(51, 51, 51)";for(var l=f;l>0;l--)h=g-l,i=g+l,j=.2*(4-l+1),j>=1?j=.9:0>=j&&(j=.1),h>-1&&k>h&&(e[h].color="rgba(51, 51, 51, "+j+")"),i>-1&&k>i&&(e[i].color="rgba(51, 51, 51, "+j+")")}}function g(a,b,c,d,e){var f=a._name;return b[f]?void b[f][d](a,e,c):(b[f]=new o(c.$model),void b[f][d](a,e,c))}var h=null,i="undefined"!=typeof window.ontouchstart,j={eStart:i?"touchstart":"mousedown",eMove:i?"touchmove":"mousemove",eEnd:i?"touchend":"mouseup"},k=c.split("MS_OPTION_TEXTBOX"),l=k[0];c=k[1];var m=avalon.ui.timer=function(b,f,h){var i,j=f.timerOptions,k={},m=0,n=null;j.template=j.getTemplate(c,j),avalon.mix(j,d(j)),m=Math.floor(j.showItems/2);var o=avalon.define(f.timerId,function(d){avalon.mix(d,j),d.widgetElement=b,d.$skipArray=["widgetElement","eventType","_initIndex","dialog","_dialog","textbox"],d._initIndex=m,d._timerHeight=0,d._timerWidth=0,d._hourLeft=0,d._minuteLeft=0,d._currentDateIndex=m,d._currentHourIndex=m,d._currentMinuteIndex=m,d._dialog=null,d._timeTextColor="#999999",d.timeDate=null,d._toggleDialog=function(){var a=o._dialog;a&&!a.toggle&&(a.toggle=!0)},d.dialog.onInit=function(b){o._dialog=b,b.$watch("toggle",function(b){if(b){var c=0,d=0,e=a(i),f=e[0],h=e[1],j=e[2];f._name="date",h._name="hour",j._name="minute",g(f,k,o,"_initPosition"),g(h,k,o,"_initPosition"),g(j,k,o,"_initPosition"),c=avalon(f).outerWidth(),o._hourLeft=c,d=o._minuteLeft=c+avalon(h).outerWidth(),o._timerWidth=d+avalon(j).outerWidth()}})},d.dialog.onConfirm=function(){var a=o.getTime();o.timeDate=a,o._timeTextColor="#333"},d._eventCallback=function(a,b){var c=this;switch(a){case"mousewheel":g(c,k,o,"_wheel",b);break;case"start":g(c,k,o,"_"+a,b)}},d.getTime=function(){var a=o.dates[o._currentDateIndex],b=o.hours[o._currentHourIndex]._hour,c=o.minutes[o._currentMinuteIndex]._minute;return new Date(a.year,a.month,a.day,b,c)},d.$init=function(){var d=[],f=document.createElement("span");b.style.display="none",i=avalon.parseHTML(c).firstChild,b.parentNode.insertBefore(f,b),n=avalon.parseHTML(l).firstChild,f.parentNode.replaceChild(n,f),avalon.scan(n,o),document.body.appendChild(i),o._timerHeight=30*j.showItems,i.setAttribute("ms-widget","dialog"),d=a(i),e(j.eventType,d),avalon.scan(i,[o].concat(h)),"function"==typeof j.onInit&&j.onInit.call(b,o,j,h)},d.$remove=function(){i.innerHTML=i.textContent="",i.parentNode.removeChild(i),n.innerHTML=n.textContent="",n.parentNode.removeChild(n)}});return o};m.defaults={showItems:9,width:180,placeHolder:"请选择时间",getTimeText:function(a,b){var c=b;return a&&(c=a.toLocaleString()),c},showYears:!1,eventType:"touch",mouseWheelSpeed:20,useTransform:!0,getDates:avalon.noop,getHours:avalon.noop,getMinutes:avalon.noop,dialog:{title:"选择时间",width:300,showClose:!1},getTemplate:function(a){return a}},avalon.bind(document,j.eMove,function(a){var b="",c=null;h&&(b=h.timerId,c=avalon.vmodels[b],c&&"mousewheel"!=c.eventType&&h._move(h.element,a,c))}),avalon.bind(document,j.eEnd,function(a){var b="",c=null;h&&(b=h.timerId,c=avalon.vmodels[b],c&&"mousewheel"!=c.eventType&&h._end(h.element,a,c))});var n=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)},o=function(){function a(a){return e===!1?!1:""===e?a:e+a.charAt(0).toUpperCase()+a.substr(1)}function b(a){this.y=0,this.initWheel=null,this.useTransition=a.useTransition&&c.hasTransition,this.useTransform=a.useTransform&&c.hasTransform,this.maxScrollY=0,this.minScrollY=0,this.options=a,this.endTime=0,this.bounce=!0,this.bounceTime=600,this.bounceEasing="",this.element=null,this.momentum=a.momentum||!0,this.momentHeight=100}var c={},d=document.createElement("div").style,e=function(){for(var a,b=["t","webkitT","MozT","msT","OT"],c=0,e=b.length;e>c;c++)if(a=b[c]+"ransform",a in d)return b[c].substr(0,b[c].length-1);return!1}();return c.ease={quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(a){return a*(2-a)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(a){return Math.sqrt(1- --a*a)}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(a){var b=4;return(a-=1)*a*((b+1)*a+b)+1}},bounce:{style:"",fn:function(a){return(a/=1)<1/2.75?7.5625*a*a:2/2.75>a?7.5625*(a-=1.5/2.75)*a+.75:2.5/2.75>a?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375}},elastic:{style:"",fn:function(a){var b=.22,c=.4;return 0===a?0:1==a?1:c*Math.pow(2,-10*a)*Math.sin(2*(a-b/4)*Math.PI/b)+1}}},c.hasTransition=a("transition")in d,c.hasTransform=a("transform")!==!1,c.hasTouch="ontouchstart"in window,c.getTime=Date.now||function(){return(new Date).getTime()},c.style={transform:a("transform"),transitionTimingFunction:a("transitionTimingFunction"),transitionDuration:a("transitionDuration")},c.momentum=function(a,b,c,d,e,f,g){var h,i,j=a-b,k=Math.abs(j)/c;return g=void 0===g?6e-4:g,h=a+k*k/(2*g)*(0>j?-1:1),i=k/g,d>h?(h=f?d-f/2.5*(k/8):d,j=Math.abs(h-a),i=j/k):h>e&&(h=f?f/2.5*(k/8):e,j=Math.abs(a)+h,i=j/k),{destination:Math.round(h),duration:i}},b.prototype._initPosition=function(a,b,c){var d=c.$model,e=30*Math.floor(d.showItems/2),f=new Date,g=f.getHours(),h=f.getMinutes(),i=(c.dates,c.hours),j=c.minutes;switch(a._name){case"hour":for(var k=0,l=i.length;l>k;k++){var m=+i[k]._hour;if(m===g){e-=30*k;break}}break;case"minute":for(var k=0,l=j.length;l>k;k++){var n=+j[k]._minute,o=+(j[k+1]&&j[k+1]._minute||59),p=Number((o-n)/2);if(h>=n&&o>=h){e-=h+p>o?k==l-1?30*k:30*(k+1):30*k;break}}}this._scrollTo(null,a,c,0,e)},b.prototype._initMaxScroll=function(a,b){var c=avalon(a),d=30*Math.floor(b.showItems/2);this.maxScrollY||(this.maxScrollY=d+30-c.height(),this.minScrollY=d,this.maxMomentHeight=this.maxScrollY-this.momentHeight,this.minMomentHeight=this.minScrollY+this.momentHeight)},b.prototype._wheel=function(a,b,c){b.preventDefault(),b.stopPropagation();var d,e,f=0,g=0,h=this.options,i=(b.wheelDelta||-b.detail)>0?1:-1,j=h.mouseWheelSpeed;this._initMaxScroll(a,h),f=this.maxScrollY,g=this.minScrollY,d=i*j,e=this.y+d,e>g?e=g:f>e&&(e=f),this._scrollTo(b,a,c,0,e,0)},b.prototype._resetPosition=function(a,b,c,d){var e=this.y,f=this.maxScrollY,g=this.minScrollY;return d=d||0,e>g?e=g:f>e&&(e=f),e==this.y?!1:(this._scrollTo(a,b,c,0,e,d,this.bounceEasing),!0)},b.prototype._scrollTo=function(a,b,d,e,f,g,h){h=h||c.ease.circular,!g||this.useTransition&&h.style?this._translate(b,d,e,f,a):this._animate(b,d,e,f,g,h.fn,a)},b.prototype._translate=function(a,b,d,e,g){var h=Math.round(e/30),i="",k="",l=g&&g.type||"";switch(("mousewheel"===l||l===j.eEnd)&&(e=30*h),a._name){case"date":i="dates",k="_currentDateIndex";break;case"hour":i="hours",k="_currentHourIndex";break;case"minute":i="minutes",k="_currentMinuteIndex"}f(b,h,i,k),this.useTransform?a.style[c.style.transform]="translateY("+e+"px)":(e=Math.round(e),a.top=e+"px"),this.y=e},b.prototype._animate=function(a,b,d,e,f,g,h){function i(){var o,p,q,r=c.getTime();return r>=m?(j.isAnimating=!1,j._translate(a,b,d,e,h),void j._resetPosition(h,a,b,j.bounceTime)):(r=(r-l)/f,q=g(r),p=(e-k)*q+k,j._translate(a,b,o,p,h),void(j.isAnimating&&n(i)))}var j=this,k=this.y,l=c.getTime(),m=l+f;this.isAnimating=!0,i()},b.prototype._start=function(a,b,d){var e=b.touches?b.touches[0]:b,f=this.options;h=this,this.timerId=d.$id,this.element=a,this.distY=0,this.initiated=!0,this._initMaxScroll(a,f),this.startTime=c.getTime(),this.startY=this.y,this.pointY=e.pageY},b.prototype._move=function(a,b,d){if(this.initiated&&this.element&&h){var e,f,g,i,j=b.touches?b.touches[0]:b,k=j.pageY-this.pointY,l=c.getTime();this.pointY=j.pageY,this.distY+=k,f=Math.abs(this.distY),l-this.endTime>300&&10>f||(e=this.y+k,this.momentum&&(g=this.minMomentHeight,i=this.maxMomentHeight),(e>g||i>e)&&(e=this.bounce?this.y+k/3:e>g?g:i),this._translate(a,d,0,e,b),l-this.startTime>300&&(this.startTime=l,this.startY=this.y))}},b.prototype._end=function(a,b,d){var e,f=(b.changedTouches?b.changedTouches[0]:b,c.getTime()-this.startTime),g=Math.round(this.y),i=(Math.abs(g-this.startY),0),j="",k=this.minScrollY,l=this.maxScrollY;h=null,this.initiated=!1,this.endTime=c.getTime(),this._resetPosition(b,a,d,this.bounceTime)||(this._scrollTo(b,a,d,0,g),this.momentum&&300>f&&(e=c.momentum(this.y,this.startY,f,l,k,this.bounce?this.options._timerHeight:0,this.deceleration),g=e.destination),g!=this.y&&((g>k||l>g)&&(j=c.ease.quadratic),this._scrollTo(b,a,d,0,g,i,j)),this._scrollTo(b,a,d,0,g))},b}();return avalon}()},{"../dialog/avalon.dialog":12}],40:[function(a,b){var c='<div class="oni-widget oni-tooltip oni-helper-reset oni-widget-content oni-corner-all oni-tooltip oni-tooltip-hidden" \r\n	 ms-class="oni-tooltip-{{arrClass}}" \r\n	 ms-css-height="height" \r\n	 ms-css-width="width">\r\n	<div class="oni-tooltip-content">\r\n		{{content | html}}\r\n	</div>\r\n	<b ms-if="arrow" class="oni-tooltip-arrow-out"></b>\r\n	<b ms-if="arrow" class="oni-tooltip-arrow-in"></b>\r\n</div>';a("../position/avalon.position"),b.exports=function(){var a,b=avalon.ui.tooltip=function(b,d,e){function f(b){var c="left",b=b==a?n.position:b;if(p&&o){var d=o.replace(/[0-9\+\-]+/g,"").split(/\s+/),e=p.replace(/[0-9\+\-]+/g,"").split(/\s+/);c=d[0]==e[0]?"top"==d[1]?"bottom":"top":d[1]==e[1]?"left"==d[0]?"right":"left":e[1]||"bottom"}else switch(b){case"tc":p="center bottom-"+s,o="center top",c="bottom";break;case"tl":p="left bottom-"+s,o="left top",c="bottom";break;case"tr":p="right bottom-"+s,o="right top",c="bottom";break;case"lt":p="right-"+t+" top",o="left top",c="right";break;case"lc":p="right-"+t+" center",o="left center",c="right";break;case"lb":p="right-"+t+" bottom",o="left bottom",c="right";break;case"rt":p="left+"+t+" top",o="right top",c="left";break;case"rc":p="left+"+t+" center",o="right center",c="left";break;case"rb":p="left+"+t+" bottom",o="right bottom",c="left";break;case"bl":p="left top+"+s,o="left bottom",c="top";break;case"bc":p="center top+"+s,o="center bottom",c="top";break;case"br":p="right top+"+s,o="right bottom",c="top";break;case"cc":p=o="center center",c="bottom";break;default:p="left top+"+s,o="left bottom",c="bottom"}return c}function g(){var a=avalon.parseHTML(u.template),b=a.childNodes[0];return document.body.appendChild(a),b}{var h,i,j,k,l,m,n=d.tooltipOptions,o=n.positionAt,p=n.positionMy,q=2,r=1,s=10,t=10;n.position}n.template=n.getTemplate(c,n);var u=avalon.define(d.tooltipId,function(c){avalon.mix(c,n),c.content==a&&(c.content=b.getAttribute("title")),c.widgetElement=b,c.arrClass="left";c.$skipArray=["widgetElement","template","delegate"],c.toggle="";var d;c.$init=function(a){d||(d=!0,u.arrClass=f(u.position),u.widgetElement.setAttribute("oni-tooltip-id",u.$id),"mouseenter"==u.event&&u.delegate&&(u.event="mouseover"),j=g(),avalon.scan(j,[u].concat(e)),u.event&&b.setAttribute("ms-"+u.event+"-101","_showHandlder($event)"),a?a():(avalon.log("avalon请尽快升到1.3.7+"),avalon.scan(b,[u].concat(e)),"function"==typeof n.onInit&&n.onInit.call(b,u,n,e)))},c.$remove=function(){j&&j.parentNode&&j.parentNode.removeChild(j)},c.show=function(b){if(!u.disabled&&j){if(b==a&&(b=k),b){k=b;for(var c,d,e=avalon(j),f=avalon(b),g=o,h=p,l=j.getElementsByTagName("b"),m=0,n=l.length;n>m;m++){var s=avalon(l[m]);s.hasClass("oni-tooltip-arrow-out")?c=s:s.hasClass("oni-tooltip-arrow-in")&&(d=s)}avalon.nextTick(function(){if(j.style.display="block",e.position({of:b,at:g,my:h,collision:u.collision,within:document.body}),b.nodeName&&(e.position().top>f.position().top+b.offsetHeight&&"bottom"==u.arrClass?(u.arrClass="top",e.removeClass("oni-tooltip-bottom").addClass("oni-tooltip-top")):e.position().top+j.offsetHeight<f.position().top&&"top"==u.arrClass&&(u.arrClass="bottom",e.removeClass("oni-tooltip-top").addClass("oni-tooltip-bottom")),c&&d)){var a="bottom"==u.arrClass||"left"==u.arrClass,i=avalon(b),k=e.position().left+j.offsetWidth/2>i.position().left+b.offsetWidth,l=e.position().left+j.offsetWidth/2<i.position().left;if("top"!=u.arrClass&&"bottom"!=u.arrClass||!l&&!k)if(("bottom"==u.arrClass||"top"==u.arrClass)&&j.offsetWidth<b.offsetWidth)c.position({of:j,at:"center "+(a?"bottom":"top"),my:"center "+(a?"top":"bottom"),within:document.body}),d.position({of:j,at:"center "+(a?"bottom":"top"),my:"center "+(a?"top-":"bottom+")+q,within:document.body});else if(("left"==u.arrClass||"right"==u.arrClass)&&j.offsetHeight<b.offsetHeight)c.position({of:j,at:(a?"left":"right")+" center",my:(a?"right":"left")+" center",within:document.body}),d.position({of:j,at:(a?"left":"right")+" center",my:(a?"right+":"left-")+r+" center",within:document.body});else{var m,n=e.offset(),o=avalon(b).offset(),p=b.offsetHeight,s=b.offsetWidth;switch(u.arrClass){case"left":case"right":"left"==u.arrClass?(c[0].style.left="-6px",d[0].style.left="-5px"):(c[0].style.right="-5px",d[0].style.right="-4px"),m=Math.floor(p/2)-n.top+o.top,c[0].style.top=m+"px",d[0].style.top=m+1+"px";break;case"top":case"bottom":default:"top"==u.arrClass?(c[0].style.top="-6px",d[0].style.top="-5px"):(c[0].style.top=d[0].style.top="auto",c[0].style.bottom="-6px",d[0].style.bottom="-5px"),m=Math.floor(s/2)-n.left+o.left,c[0].style.left=m+"px",d[0].style.left=m+1+"px"}}else c.position({of:j,at:(l?"right":"left")+" "+(a?"bottom":"top"),my:(l?"right-10":"left+10")+" "+(a?"top":"bottom"),within:document.body}),d.position({of:j,at:(l?"right":"left")+" "+(a?"bottom":"top"),my:(l?"right-11":"left+11")+" "+(a?"top-":"bottom+")+q/2,within:document.body})}})}if(u.animated&&-[1]){clearInterval(i);var t=100*avalon(j).css("opacity")>>0;if(100!=t){var v=u._animateArrMaker(t,100);v.splice(0,1),i=setInterval(function(){return v.length<=0?clearInterval(i):(avalon(j).css("opacity",v[0]/100),void v.splice(0,1))},16)}}}},c.hide=function(a){a&&a.preventDefault&&a.preventDefault(),u.toggle?u.toggle=!1:u._hide()},c._hide=function(){if(j)if(u.animated&&-[1]){clearInterval(i);var a=100*avalon(j).css("opacity")>>0;if(a){var b=u._animateArrMaker(a,0);i=setInterval(function(){return b.length<=0?(j.style.display="none",avalon(j).addClass("oni-tooltip-hidden"),clearInterval(i)):(avalon(j).css("opacity",b[0]/100),void b.splice(0,1))},50)}}else j.style.display="none"},c._hideHandlder=function(){u.toggle?u.toggle=!1:u._hide()},c._showHandlder=function(b){u._show(b,a,this)},c._show=function(b,c,d){var n=d||l||u.widgetElement,o=b&&(b.srcElement||b.target)||k||u.widgetElement,c=c||m;if(c===a)if(u.delegate){for(c=u.contentGetter.call(u,o);!c&&o&&o!=n;)o=o.parentNode,c=u.contentGetter.call(u,o);n=o}else c=u.contentGetter.call(u,n);else n=o;if(c!=a){k=n,clearTimeout(h),clearTimeout(i);var p=n.getAttribute("oni-tooltip-inited"),q=n.title;u.content!=c&&(u.content=c),n.title&&(n.title=""),j||(j=g(),avalon.scan(j,[u].concat(e))),avalon(j).removeClass("oni-tooltip-hidden"),u.track||f(u.arrClass),u.show(u.track?b||n:n);var p=n.getAttribute("oni-tooltip-inited");p||(n.setAttribute("oni-tooltip-inited",1),u.autohide&&avalon(n).bind("focus"!=u.event?"mouseout":"blur",function(){q&&(n.title=q),clearTimeout(h),u.autohide&&(h=setTimeout(u._hideHandlder,u.hiddenDelay))}),!u.track||"mouseover"!=u.event&&"mouseenter"!=u.event||avalon(n).bind("mousemove",function(a){a.stopPropagation(),k=a,u.show(a),avalon(j).removeClass("oni-tooltip-hidden")}))}},c.showBy=function(b,c){var d=b&&b.tagName?b:b.target||b.srcElement;u.toggle&&(u.content=c||u.contentGetter.call(u,d)),l=k=d,m=c,u.toggle?u.show():u.toggle=!0,m=a},c._isShown=function(){var a=avalon(j);return"none"!=a.css("display")&&!a.hasClass("oni-tooltip-hidden")},c.appendTo=function(a){a&&(a.appendChild(j),u.toggle&&u.show())}});return u.$watch("position",function(){f(u.position),u._isShown()&&u.show()}),u.$watch("positionAt",function(a){o=a,f(u.position),u._isShown()&&u.show()}),u.$watch("positionMy",function(a){p=a,f(u.position),u._isShown()&&u.show()}),u.$watch("toggle",function(a){a?u._show():u._hide()}),u};b.defaults={toggle:!1,collision:"none",event:"mouseenter",content:void 0,width:"auto",height:"auto",arrow:!0,autohide:!0,delegate:!1,disabled:!1,track:!1,animated:!0,position:"rt",positionMy:!1,positionAt:!1,hiddenDelay:16,onInit:avalon.noop,contentGetter:function(a){return"a"==a.tagName.toLowerCase()?a.title:void 0},_animateArrMaker:function(a,b){for(var c=[],d=10,a=Math.floor(a/d)*d,b=Math.floor(b/d)*d,e=b-a,f=e>0?d:-d;a!=b;)a+=f,a=a>100?100:a,e=parseInt(e-f),Math.abs(e)<=1&&(a=b),c.push(a);return c.length||(c=[b]),c},getTemplate:function(a){return a},$author:"skipper@123"}}()},{"../position/avalon.position":26}],41:[function(a,b){var c='<ul class="oni-tree oni-helper-clearfix" \r\n	ms-visible="toggle" \r\n	ms-attr-id="$guid" \r\n    ms-class="no-select:!view.txtSelectedEnable"\r\n	ms-live-click="liveClick($event)" \r\n	ms-live-contextmenu="excute(\'rightClick\', $event, false, \'liveContextmenu\')">\r\n	{{loadNodes()|html}}\r\n</ul>',d='<span class="button switch center_docu" \r\n      ms-class="bottom_docu:$last" \r\n      ms-class-100="{{levelClass(leaf)}}" \r\n      ms-class-2="noline_docu:!optionToBoolen(view.showLine, leaf)"></span>\r\n{{MS_CHECK_HTML}}\r\n<a  {{MS_EDIT_BINDING}} \r\n   ms-class="curSelectedNode:hasClassSelect(leaf)" \r\n   ms-class-100="{{levelClass(leaf)}}" \r\n   ms-attr-target="leaf.target || \'_blank\'" \r\n   ms-attr-href="leaf.url || \'#\'" \r\n   ms-on-mousedown="excute(\'mousedown\', $event, leaf)" \r\n   ms-on-mouseup="excute(\'mouseup\', $event, leaf)" \r\n   ms-attr-title="exprAnd(leaf, view.showTitle, leaf.title || leaf.name)"\r\n   ms-click="excute(\'click\',$event,leaf,\'selectFun\')">\r\n    <span class="button ico_docu" \r\n          ms-css-background="computeIcon(leaf)" \r\n          ms-class-100="{{levelClass(leaf)}}" \r\n          ms-if="exprAnd(leaf, view.showIcon,leaf.icon)"></span>\r\n    <span class="button ico_docu" \r\n          ms-class-100="{{levelClass(leaf)}}" \r\n          ms-if="exprAnd(leaf, view.showIcon,!leaf.icon)"></span>\r\n  	<span \r\n          ms-class-100="{{levelClass(leaf)}}" >{{view.nameShower(leaf)|html}}</span>\r\n  	{{MS_EDIT_HTML}}\r\n</a>',e='<span class="button switch" \r\n      ms-class-100="{{levelClass(leaf)}}" \r\n      ms-class="{{computeLineClass(leaf, $first, $last)}}"\r\n      ms-click="toggleOpenStatue($event,leaf)" \r\n      ms-if="exprAnd(leaf, view.showSwitch)"></span>\r\n{{MS_CHECK_HTML}}\r\n<a {{MS_EDIT_BINDING}} \r\n   ms-class-100="{{levelClass(leaf)}}" \r\n   ms-class="curSelectedNode:hasClassSelect(leaf)" \r\n   ms-click="excute(\'click\',$event,leaf,\'selectFun\')" \r\n   ms-attr-target="leaf.target || \'_blank\'" \r\n   ms-attr-href="leaf.url || \'#\'" \r\n   ms-on-mousedown="excute(\'mousedown\', $event, leaf)" \r\n   ms-on-mouseup="excute(\'mouseup\', $event, leaf)" \r\n   ms-attr-title="exprAnd(leaf, view.showTitle, leaf.title || leaf.name)" \r\n	 ms-dblclick="excute(\'dblclick\', $event,leaf,\'toggleOpenStatue\')">\r\n    <span class="button" \r\n          ms-attr-id="\'treeIcon\'+leaf.$id" \r\n          ms-css-background="{{computeIcon(leaf)}}" \r\n          ms-class-100="{{levelClass(leaf)}}" \r\n          ms-if="shallIconShow(leaf, leaf.icon_close, leaf.icon_open)" \r\n          ms-class="{{computeIconClass(leaf)}}"></span>\r\n    <span class="button" \r\n          ms-attr-id="\'treeIcon\'+leaf.$id" \r\n          ms-class-100="{{levelClass(leaf)}}" \r\n          ms-if="shallIconShowReverse(leaf, leaf.icon_close, leaf.icon_open)" \r\n          ms-class="{{computeIconClass(leaf)}}"></span>\r\n  	<span \r\n          ms-class-100="{{levelClass(leaf)}}" >{{view.nameShower(leaf)|html}}</span>\r\n    {{MS_EDIT_HTML}}\r\n</a>\r\n<ul class="line" \r\n    ms-class-100="{{levelClass(leaf, 1)}}" \r\n    ms-if="hasChildren(leaf)" \r\n    ms-class-2="noline_docu:!optionToBoolen(view.showLine,leaf)"\r\n    ms-visible="hasChildren(leaf, \'visible\')"\r\n    ms-attr-id="\'c\'+leaf.$id">\r\n	  {{loadNodes("levelGT0")|html}}\r\n    </ul>',f='<li tabindex="0" \r\n    ms-class-100="{{levelClass(leaf)}}" \r\n    ms-attr-id="leaf.$id" \r\n    ms-visible="!leaf.isHidden"\r\n    ms-attr-level="leaf.level"\r\n    ms-attr-timeStamp="timeStamp()" \r\n    ms-repeat-leaf="children">\r\n    {{loadLeafTemplate(leaf)|html}}\r\n</li>';a("../live/avalon.live"),b.exports=function(){function a(a){return document.getElementById(a)}function b(){return"tree"+w++}function g(a,b){return a.replace(/\{\{MS_[^\}]+\}\}/g,function(c){var d=c.substr(c.indexOf("_")+1).replace("}}","").toLowerCase(),e=t[d]||"";return avalon.isFunction(e)?e(a,b):e})}function h(a,b,c,d,e){var f=[];return avalon.each(a,function(a,g){c?g&&(g.$parentLeaf=b,g.level=b?b.level+1:0,d&&d(g)):f[a]=j(avalon.mix({},g),b,e),g&&g.children&&g.children.length&&(c?h(g.children,g,c,d,e):f[a].children=h(g.children,f[a],c,s,e))}),c?a:f}function i(a,b){avalon.each(b,function(b,c){"hasOwnProperty"!==b&&(a[b]=a[c]||"")})}function j(a,b,c){return a?(a.level=b?b.level+1:0,a.isParent=k(a),i(a,c.data.key),a.$parentLeaf=b||"",a.open=a.isParent?!!a.open:!1,a.children=a.children||[],a):void 0}function k(a){return!!a.isParent||!!a.open||!(!a.children||!a.children.length)}function l(a,b){if(!a.length)return[];for(var c,d,e,f=b.data.simpleData,g=f.idKey,h=f.pIdKey,i=[],k=[],l=0,m=a.length;m>l;l++){if(e=j(a[l],s,b),c&&c[g]===e[h])c.isParent=!0,j(c,s,b),d&&d===c||(k.push(c),d=c),d.children.push(e);else if(e.isParent||!d||d[g]!==e[h]){for(;d&&e[h]!==d[g];)k.pop(),d=k[k.length-1];(d&&d.children||i).push(e),e.isParent&&(k.push(e),d=e)}else(d&&d.children||i).push(e);e.level=k.length,e[h]=e[h]||0,c=e}return i}function m(a,b){for(var c=0,d=a.length;d>c;c++)if(b(a[c]))return c;return-1}function n(a){return a.replace(/^[a-z]{1}/g,function(a){return a.toUpperCase()})}function o(a){for(var b=a.srcElement,c=0,d=u.length;d>c;c++)if(avalon.contains(u[c],b)&&"text"!=b.type)return void a.preventDefault()}var p={view:1,callback:1,data:1},q=["click","dblClick","collapse","expand","select","contextmenu","mousedown","mouseup"],r=[],s=void 0,t={},u=[],v=[],w=0,x=avalon.ui.tree=function(i,j,k){var o=j.treeOptions,q={};o.template=o.getTemplate(c,o),o.parentTemplate=o.getTemplate(e,o,"parent"),o.leafTemplate=o.getTemplate(d,o,"leaf"),o.nodesTemplate=o.getTemplate(f,o,"nodes");var t,w={$guid:b()};avalon.mix(w,o),avalon.each(p,function(a){avalon.mix(!0,w[a],avalon.mix(!0,{},x.defaults[a],w[a]))}),t=o.children,w.children=w.data.simpleData.enable?l(w.children,w):h(w.children,s,s,s,w),w.template=g(w.template,w).replace(/\n/g,"").replace(/>[\s]+</g,"><"),w.parentTemplate=g(w.parentTemplate,w).replace(/\n/g,"").replace(/>[\s]+</g,"><"),w.leafTemplate=g(w.leafTemplate,w).replace(/\n/g,"").replace(/>[\s]+</g,"><"),w.nodesTemplate=g(w.nodesTemplate,w).replace(/\n/g,"").replace(/>[\s]+</g,"><");var y=avalon.define(j.treeId,function(b){avalon.each(r,function(a,c){c&&c(b,k)}),avalon.mix(b,w),b.widgetElement=i,b.widgetElement.innerHTML=b.template,b.$skipArray=["widgetElement","template","callback"],b._select=[];var c;b.$init=function(a){c||(c=!0,h(b.children,s,"构建父子节点衔接关系",function(a){q[a.$id]=a},b),!b.view.txtSelectedEnable&&navigator.userAgent.match(/msie\s+[5-8]/gi)&&u.push(b.widgetElement),a?a():(avalon.log("avalon请尽快升到1.3.7+"),avalon.scan(i,[y].concat(k)),"function"==typeof o.onInit&&o.onInit.call(i,y,o,k)))},b.$remove=function(){i.innerHTML=i.textContent="",q=null,b._select=null},b.computeIconClass=function(a){return(a.iconSkin?a.iconSkin+"_":"")+"ico_"+(a.isParent?b.hasClassOpen(a,"ignoreNoline")?"open":"close":"docu")},b.shallIconShow=function(a){return b.exprAnd(a,b.view.showIcon)?b.exprAnd.apply(null,arguments):!1},b.shallIconShowReverse=function(a){return b.exprAnd(a,b.view.showIcon)?!b.exprAnd.apply(null,arguments):!1},b.computeIcon=function(a){var c=a.isParent?b.hasClassOpen(a)?a.icon_open||"":a.icon_close||"":a.icon?a.icon:"";return c?'url("'+c+'") 0 0 no-repeat':""},b.computeLineClass=function(a,c,d){var e=a.open?"open":"close",f=c&&!a.level?"roots":d?"bottom":"center";return b.optionToBoolen(b.view.showLine,a)||(f="noline"),f+"_"+e},b.levelClass=function(a,b){var b=b||0;return"level"+((a.level||0)+b)},b.hasClassOpen=function(a,c){return b.optionToBoolen(b.view.showLine,a)?a.isParent&&a.open&&"noline"!=c:a.isParent&&a.open&&c},b.toggleOpenStatue=function(a,c){var c=c||a.leaf;c&&(c.open?b.excute("collapse",a,c,"collapse"):b.excute("expand",a,c,"expand"))},b.expand=function(c,d,e){var f=c&&c.leaf||c;if(f){if(!f.isParent)return;f.open=!e}else f=b;var g=f.children,h=a(f.$id);e||h&&h.scrollHeight||b.cVisitor(f,function(a){a!=b&&(a.open=!0)}),b.view.singlePath&&!e&&b.brotherVisitor(f,function(a){a!=f&&a.open&&b.excute("collapse",c.e,a,"collapse")}),d&&g&&avalon.each(g,function(a,c){b.expand(c,"all",e)})},b.expandAll=function(a){return a?b.expand(s,"all"):b.collapse(s,"all"),a},b.collapse=function(a,c,d){b.expand(a,c,"close",d)},b.hasChildren=function(c,d){var e=c.children&&c.children.length&&b.hasClassOpen(c,"ignoreNoline");return d?e:e||a("c"+c.$id)},b.loadLeafTemplate=function(a){return a.isParent?b.parentTemplate:b.leafTemplate},b.loadNodes=function(a){return a?b.nodesTemplate.replace(/leaf=\"children\"/g,'leaf="leaf.children"'):b.nodesTemplate},b.hideNode=function(a){a=a&&a.leaf||a,b.hideNodes([a])},b.hideNodes=function(a,b){b=b===s?!1:b,avalon.each(a,function(a,c){c.isHidden=b})},b.showNode=function(a){a=a&&a.leaf||a,b.showNodes([a])},b.showNodes=function(a){b.hideNodes(a,!0)},b.visitor=function(a,c,d,e,f){var a=a||b,e=e||[];if(a!=b){var g=c(a,f);if(g&&e.push(g),d&&d(e,a,a))return e}if(a.children&&a.children.length)for(var h=0,i=a.children,j=i.length;j>h&&(!d||!d(e,i[h],a));h++)b.visitor(i[h],c,d,e,f);return e},b.cVisitor=function(a,c,d,e,f){var e=e||[];if(a){var g=c(a,f);if(g&&e.push(g),d&&d(e,a,a))return e;a.$parentLeaf&&b.cVisitor(a.$parentLeaf,c,d,e,f)}return e},b.brotherVisitor=function(a,c,d,e,f){var e=e||[];if(a)for(var g,h=b.getBrothers(a),i=0,j=h.length;j>i&&(g=c&&c(h[i],f),g&&e.push(g),!d||!d(e,h[i],a));i++);return e},b.getBrothers=function(a){return a?a.$parentLeaf?a.$parentLeaf.children:b.children:[]},b.getNodeByTId=function(a){return q[a]},b.getNodeIndex=function(a){for(var c=b.getBrothers(a),d=0,e=c.length;e>d;d++)if(c[d]===a)return d;return-1},b.getNodes=function(a){return a?a.children:b.children},b.getNodesByFilter=function(a,c,d,e){return b.visitor(d,function(a,b){return a!==d&&filter&&filter(a,b)?a:void 0},c?function(a){return a.length>0}:!1,[],e)},b.getNodeByParam=function(a,c,d){return b.getNodesByParam(a,c,d,function(a){return a.length>0})},b.getNodesByParam=function(a,c,d,e){return b.visitor(d,function(b){return b!==d?b[a]===c?b:!1:void 0},e,[])},b.getNodesByParamFuzzy=function(a,c,d){return b.visitor(d,function(b){return b!==d?(b[a]+"").match(new RegExp(c,"g"))?b:!1:void 0},!1,[])},b.getPreNode=function(a,c){var d=b.getBrothers(a),e=b.getNodeIndex(a);return e>-1?d[c?e+1:e-1]:!1},b.getNextNode=function(a){return b.getPreNode(a,"next")},b.getParentNode=function(a){return a&&a.$parentLeaf},b.addNodes=function(a,c,d){return b.excute("nodeCreated",{isSilent:d},a,function(){c=b.data.simpleData.enable&&c instanceof Array?b.transformTozTreeNodes(c):[c],c=h(c,a,s,s,b),h(c,a,"构建父子节点衔接关系",s,b),a&&(a.isParent=!0),d||(a.open=!0);var e=b.getNodes(a),f=e.length;e.pushArray(c);var g=e.slice(f)||[];return avalon.each(g,function(a,b){q[b.$id]=b}),g})},b.transformTozTreeNodes=function(a){return a instanceof Array||(a=[a]),l(a,b)},b.transformToArray=function(a,c,d){var d=d||[],e=arguments[3],f=b.data.simpleData;if(e||(e={},avalon.each(avalon.ui.tree.leafIgnoreField,function(a,b){e[b]=!0})),a instanceof Array)avalon.each(a,function(a,f){b.transformToArray(f,c,d,e)});else if(a){var g={},h=a.$model;
for(var i in h)if(0!==i.indexOf("$")&&!e[i]&&"children"!==i&&""!=h[i]){var j=f[i+"Key"]?f[i+"Key"]:i;g[j]=h[i]}d.push(c?c(g):g),a.isParent&&b.transformToArray(a.children,c,d,e)}return d},b.reset=function(a){b.children.clear(),b.addNodes(s,t||a)},b.copyNode=function(a,c,d,e){var f=avalon.mix({},c.$model);return b.moveNode(a,f,d,e),f},b.moveNode=function(a,c,d,e){var f=c.$parentLeaf||b,g=m(f.children,function(a){return a==c||a==c.$model}),h=c.level;if(!(0>g)){if(a||(a=b),a==b&&(d="inner"),f.children.splice(g,1),"inner"==d)a.isParent||a==b||(a.isParent=!0),c.$parentLeaf=a==b?!1:a,c.level=c.$parentLeaf?c.$parentLeaf.level+1:0,a.children.push(c);else{d="prev"===d?"prev":"next";var i=a.$parentLeaf,j=i?i.children:b.children,k=m(j,function(b){return b==a||b==a.$model});c.$parentLeaf=i,c.level=a.level,j.splice(k,0,c)}return c.$parentLeaf&&b.expand(c.$parentLeaf),h!=c.level&&b.visitor(c,function(a){a!=c&&(a.level=a.$parentLeaf.level+1)}),!e&&node.$parentLeaf&&(node.$parentLeaf.open=!0),node}},b.removeCacheById=function(a){delete q[a]},b.hasClassSelect=function(a){for(var c=0,d=b._select.length;d>c;c++)if(b._select[c].$id===a.$id)return c+1;return 0},b._getSelectIDs=function(c){var d=0,e={};return c&&b.visitor(c,function(b){avalon(a(b.$id).getElementsByTagName("a")[0]).hasClass("curSelectedNode")&&(e[b.$id]=1,d++)},!1),{total:d,dict:e}},b.selectFun=function(a,c){var d=a.leaf,a=a.e;if(d.url||a.preventDefault&&a.preventDefault(),c){var e=b._select,f=b._getSelectIDs(d),g=count=f.total,h=f.dict;g>1&&e.$unwatch();for(var i=0;i<e.length;i++){var j=e[i];h[j.$id]&&(e.splice(i,1),i--,count--,1==count&&g>1&&e.$watch())}res=h=null}else{var k=(d.$id,b.hasClassSelect(d));k?b._select.splice(k-1,1):b.ctrlCMD(a,d)?b._select.push(d):b._select=[d]}},b.selectNode=function(a,c){b.view.selectedMulti===!1&&(c=!1),c?b._select.push(a):b._select=[a]},b.getSelectedNodes=function(a){if(!a)return b._select;for(var c=b._getSelectIDs(a),d=c.dict,e=[],f=b._select,g=0,h=f.length;h>g;g++){var i=f[g].$id;d[i]&&e.push(f[g])}return e},b.cancelSelectedNode=function(a){b._select.remove(a)},b.cancelSelectedChildren=function(a){leaf?b.selectFun(a,"all"):b._select.clear()},b.ctrlCMD=function(a,c){return a.ctrlKey&&b.optionToBoolen(b.view.selectedMulti,c,a)},b.optionToBoolen=function(){var a=arguments[0];return avalon.isFunction(a)?a.apply(b,[].slice.call(arguments,1)):a},b.liveContextmenu=function(a){b.$fire("e:contextmenu",{e:a,vmodel:b,vmodels:k})},b.liveClick=function(a){b.$fire("e:click",{e:a,vmodel:b,vmodels:k})},b.excute=function(a,c,d,e){var f,g=n(a),h=b.callback["before"+g],i=b.callback["on"+g],j={e:c,leaf:d,vm:b,vmodels:k,preventDefault:function(){this.cancel=!0}},l=c?c.srcElement||c.target:null,m=!c||!c.cancelCallback;if("dblclick"!==a||b.view.dblClickExpand){if(y.$fire("e:before"+g,j),m&&(j.cancel||h&&h.call(l,j)===!1||j.cancel))return void j.preventDefault();if(e&&(avalon.isFunction(e)||(e=b[e]),avalon.isFunction(e)&&(f=e.call(l,j))),f!==s&&(j.res=f),!j.cancel)return y.$fire("e:"+a,j),m&&i&&i.call(l,j),f}},b.exprAnd=function(){for(var a=arguments.length,c=1,d=c,e=arguments[0];a>c;)d=d&&b.optionToBoolen(arguments[c],e),c++;return d},b.timeStamp=function(){return Date.now()},b.toggleStatus=function(){return b.toggle=!b.toggle,b.toggle}});return y.$watch("e:nodeCreated",function(a){if(!(a&&a.e&&a.e.isSilent)){var b=a.leaf;b&&(b.isParent=!0,y.expand(b))}}),avalon.each(v,function(a,b){avalon.isFunction(b)&&b(y,k)}),y};avalon.bind(document.body,"selectstart",o),avalon.bind(document.body,"drag",o),x.defaults={toggle:!0,view:{showLine:!0,dblClickExpand:!0,selectedMulti:!0,txtSelectedEnable:!1,autoCancelSelected:!1,singlePath:!1,showIcon:!0,showTitle:!0,showSwitch:!0,nameShower:function(a){return a.name}},data:{simpleData:{idKey:"id",pIdKey:"pId",enable:!1},key:{children:"children",name:"name",title:"",url:"url"}},callback:{},onInit:avalon.noop,getTemplate:function(a){return a},$author:"skipper@123"},avalon.each(q,function(a,b){"contextmenu"==b&&(b="RightClick"),x.defaults.callback["on"+n(b)]=avalon.noop,x.defaults.callback["before"+n(b)]=!1}),avalon.ui.tree.AddExtention=function(a,b,c,d,e,f){a&&avalon.each(a,function(a,b){p[b]=b}),b&&avalon.mix(!0,x.defaults,b),c&&r.push(c),d&&(q=q.concat(d)),e&&avalon.mix(t,e),f&&v.push(f)},avalon.ui.tree.leafIgnoreField=["level"]}()},{"../live/avalon.live":19}],42:[function(a,b){a("./avalon.tree"),b.exports=function(){avalon.treeMenu={view:{showLine:!1,dblClickExpand:!1,singlePath:!0,showIcon:function(a){return a.level<1?!0:void 0},showSwitch:function(a){return a.level>0?!0:void 0}},callback:{beforeClick:function(a){var b=a.leaf,c=a.vm;a.e&&a.e.preventDefault(),b.isParent&&c.expand(b,!1)}},getTemplate:function(a,b,c){return"nodes"===c?a.replace("<li",'<li ms-class="oni-leaf-selected:hasClassSelect(leaf)" '):c?a:a+'<a href="#" class="oni-menu-tree-swicth" ms-click="toggleMenuTree($event, widgetElement, $guid)" ms-class="oni-menu-tree-swicth-off:!toggle"></a>'},toggleMenuTree:function(a,b){a&&a.preventDefault&&a.preventDefault();var c=avalon(b);c.hasClass("oni-menu-tree-hidden")?(c.removeClass("oni-menu-tree-hidden"),c.removeClass("oni-state-hover")):c.addClass("oni-menu-tree-hidden")},onInit:function(){var a=avalon(this);a.bind("mouseenter",function(){a.hasClass("oni-menu-tree-hidden")&&a.addClass("oni-state-hover")}),a.bind("mouseleave",function(){a.removeClass("oni-state-hover")})}}}()},{"./avalon.tree":41}],43:[function(a,b){a("../mmPromise/avalon.mmPromise"),b.exports=function(){function a(a){if(/^\d{15}$/.test(a))return!0;if(/^\d{17}[0-9xX]$/.test(a)){for(var b="1,0,x,9,8,7,6,5,4,3,2".split(","),c="7,9,10,5,8,4,2,1,6,3,7,9,10,5,8,4,2".split(","),d=a.toLowerCase().split(""),e=0,f=0;17>f;f++)e+=c[f]*d[f];return b[e%11]==d[17]}}function b(a){if(e.test(a)){var b=parseInt(RegExp.$1,10),c=parseInt(RegExp.$2,10),d=parseInt(RegExp.$3,10),f=new Date(d,c-1,b,12,0,0,0);if(f.getUTCFullYear()===d&&f.getUTCMonth()===c-1&&f.getUTCDate()===b)return!0}return!1}function c(a){if(a.target)return a;var b={};for(var c in a)b[c]=a[c];var d=b.target=a.srcElement;if(0===a.type.indexOf("key"))b.which=null!=a.charCode?a.charCode:a.keyCode;else if(/mouse|click/.test(a.type)){var e=d.ownerDocument||document,f="BackCompat"===e.compatMode?e.body:e.documentElement;b.pageX=a.clientX+(f.scrollLeft>>0)-(f.clientLeft>>0),b.pageY=a.clientY+(f.scrollTop>>0)-(f.clientTop>>0),b.wheelDeltaY=b.wheelDelta,b.wheelDeltaX=0}return b.timeStamp=new Date-0,b.originalEvent=a,b.preventDefault=function(){a.returnValue=!1},b.stopPropagation=function(){a.cancelBubble=!0},b}function d(){var a=this.data||{};return this.message.replace(k,function(b,c){return null==a[c]?"":a[c]})}if(!avalon.duplexHooks)throw new Error("你的版本少于avalon1.3.7，不支持ms-duplex2.0，请使用avalon.validation.old.js");var e=/^\d{4}\-\d{1,2}\-\d{1,2}$/,f=/^([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+@([A-Z0-9]+[_|\_|\.]?)*[A-Z0-9]+\.[A-Z]{2,3}$/i,g=/^(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)\.(25[0-5]|2[0-4]\d|[01]?\d\d?)$/i,h=/^((([0-9A-Fa-f]{1,4}:){7}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}:[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){5}:([0-9A-Fa-f]{1,4}:)?[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){4}:([0-9A-Fa-f]{1,4}:){0,2}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){3}:([0-9A-Fa-f]{1,4}:){0,3}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){2}:([0-9A-Fa-f]{1,4}:){0,4}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){6}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(([0-9A-Fa-f]{1,4}:){0,5}:((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|(::([0-9A-Fa-f]{1,4}:){0,5}((\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b)\.){3}(\b((25[0-5])|(1\d{2})|(2[0-4]\d)|(\d{1,2}))\b))|([0-9A-Fa-f]{1,4}::([0-9A-Fa-f]{1,4}:){0,5}[0-9A-Fa-f]{1,4})|(::([0-9A-Fa-f]{1,4}:){0,6}[0-9A-Fa-f]{1,4})|(([0-9A-Fa-f]{1,4}:){1,7}:))$/i,i={cm:/^(?:0?1)((?:3[56789]|5[0124789]|8[278])\d|34[0-8]|47\d)\d{7}$/,cu:/^(?:0?1)(?:3[012]|4[5]|5[356]|8[356]\d|349)\d{7}$/,ce:/^(?:0?1)(?:33|53|8[079])\d{8}$/,cn:/^(?:0?1)[3458]\d{9}$/};avalon.mix(avalon.duplexHooks,{trim:{get:function(a,b){return"password"!==b.element.type&&(a=String(a||"").trim()),a}},required:{message:"必须填写",get:function(a,b,c){return c(""!==a),a}},norequired:{message:"可以不写",get:function(a,b,c){return c(!0),b.norequired=""===a,a}},"int":{message:"必须是整数",get:function(a,b,c){return c(/^\-?\d+$/.test(a)),a}},phone:{message:"手机号码不合法",get:function(a,b,c){var d=!1;for(var e in i)if(i[e].test(a)){d=!0;break}return c(d),a}},decimal:{message:"必须是小数",get:function(a,b,c){return c(/^\-?\d*\.?\d+$/.test(a)),a}},alpha:{message:"必须是字母",get:function(a,b,c){return c(/^[a-z]+$/i.test(a)),a}},alpha_numeric:{message:"必须为字母或数字",get:function(a,b,c){return c(/^[a-z0-9]+$/i.test(a)),a}},alpha_dash:{message:"必须为字母或数字及下划线等特殊字符",validate:function(a,b,c){return c(/^[a-z0-9_\-]+$/i.test(a)),a}},chs:{message:"必须是中文字符",get:function(a,b,c){return c(/^[\u4e00-\u9fa5]+$/.test(a)),a}},chs_numeric:{message:"必须是中文字符或数字及下划线等特殊字符",get:function(a,b,c){return c(/^[\\u4E00-\\u9FFF0-9_\-]+$/i.test(a)),a}},qq:{message:"腾讯QQ号从10000开始",get:function(a,b,c){return c(/^[1-9]\d{4,10}$/.test(a)),a}},id:{message:"身份证格式错误",get:function(b,c,d){return d(a(b)),b}},ipv4:{message:"ip地址不正确",get:function(a,b,c){return c(g.test(a)),a}},ipv6:{message:"ip地址不正确",get:function(a,b,c){return c(h.test(a)),a}},email:{message:"邮件地址错误",get:function(a,b,c){return c(f.test(a)),a}},url:{message:"URL格式错误",get:function(a,b,c){return c(/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/.test(a)),a}},repeat:{message:"密码输入不一致",get:function(a,b,c){var d=b.element.getAttribute("data-duplex-repeat")||"",e=avalon(document.getElementById(d)).val()||"";return c(a===e),a}},date:{message:"必须符合日期格式 YYYY-MM-DD",get:function(a,c,d){return d(b(a)),a}},passport:{message:"护照格式错误或过长",get:function(a,b,c){return c(/^[a-zA-Z0-9]{4,20}$/i.test(a)),a}},minlength:{message:"最少输入{{min}}个字",get:function(a,b,c){var d=b.element,e=parseInt(d.getAttribute("minlength"),10);isFinite(e)||(e=parseInt(d.getAttribute("data-duplex-minlength"),10));var f=b.data.min=e;return c(a.length>=f),a}},maxlength:{message:"最多输入{{max}}个字",get:function(a,b,c){var d=b.element,e=parseInt(d.getAttribute("maxlength"),10);isFinite(e)||(e=parseInt(d.getAttribute("data-duplex-maxlength"),10));var f=b.data.max=e;return c(a.length<=f),a}},gt:{message:"必须大于{{max}}",get:function(a,b,c){var d=b.element,e=parseInt(d.getAttribute("max"),10);isFinite(e)||(e=parseInt(d.getAttribute("data-duplex-gt"),10));var f=b.data.max=e;return c(parseFloat(a)>f),a}},lt:{message:"必须小于{{min}}",get:function(a,b,c){var d=b.element,e=parseInt(d.getAttribute("min"),10);isFinite(e)||(e=parseInt(d.getAttribute("data-duplex-lt"),10));var f=b.data.min=e;return c(parseFloat(a)<f),a}},eq:{message:"必须等于{{eq}}",get:function(a,b,c){var d=b.element,e=parseInt(d.getAttribute("data-duplex-eq"),10),f=b.data.eq=e;return c(parseFloat(a)==f),a}},contains:{message:"必须包含{{array}}中的一个",get:function(a,b,c){var d=[].concat(a).map(String),e=(b.element.getAttribute("data-duplex-contains")||"").split(",");b.data.array=e;for(var f=!1,g=0,h=d.length;h>g;g++){var i=d[g];if(e.indexOf(i)>=0){f=!0;break}}return c(f),a}},contain:{message:"必须包含{{array}}",get:function(a,b,c){var d=[].concat(a).map(String),e=(b.element.getAttribute("data-duplex-contain")||"").split(",");if(b.data.array=e.join("与"),d.length){i=!0;for(var f=0,g=e.length;g>f;f++){var h=e[f];if(-1===d.indexOf(h)){i=!1;break}}}else var i=!1;return c(i),a}},pattern:{message:"必须匹配/{{pattern}}/这样的格式",get:function(a,b,c){var d=b.element,e=d.getAttribute("pattern"),f=d.getAttribute("data-duplex-pattern"),g=b.data.pattern=e||f,h=new RegExp("^(?:"+g+")$");return c(h.test(a)),a}}});var j=avalon.ui.validation=function(a,b,e){var f,g=b.validationOptions,h=avalon.define(b.validationId,function(b){avalon.mix(b,g),b.$skipArray=["widgetElement","data","validationHooks","validateInKeyup","validateAllInSubmit","resetInBlur"],b.widgetElement=a,b.data=[],b.$init=function(){a.setAttribute("novalidate","novalidate"),avalon.scan(a,[h].concat(e)),b.validateAllInSubmit&&(f=avalon.bind(a,"submit",function(a){a.preventDefault(),b.validateAll(b.onValidateAll)})),"function"==typeof g.onInit&&g.onInit.call(a,h,g,e)},b.$destory=function(){b.data=[],f&&avalon.unbind(a,"submit",f),a.textContent=a.innerHTML=""},b.validateAll=function(a){var c="function"==typeof a?a:b.onValidateAll,d=b.data.filter(function(a){return a.element&&!a.element.disabled&&h.widgetElement.contains(a.element)}).map(function(a){return b.validate(a,!0)});Promise.all(d).then(function(a){for(var d,e=[],f=0;d=a[f++];)e=e.concat(d);c.call(b.widgetElement,e)})},b.resetAll=function(a){b.data.filter(function(a){return a.element}).forEach(function(a){try{b.onReset.call(a.element,{type:"reset"},a)}catch(c){}});var c="function"==typeof a?a:b.onResetAll;c.call(b.widgetElement)},b.validate=function(a,c,e){var f=a.valueAccessor(),g=h.validationHooks,i=avalon.duplexHooks,j=[],k=a.element;a.validateParam.replace(/\w+/g,function(b){var c=g[b]||i[b];if(!k.disabled){var e,h;j.push(new Promise(function(a,b){e=a,h=b}));var l=function(f){if(a.norequired&&(f=!0),delete a.norequired,f)e(!0);else{var g={element:k,data:a.data,message:k.getAttribute("data-duplex-message")||c.message,validateRule:b,getMessage:d};e(g)}};a.data={},c.get(f,a,l)}});var l=Promise.all(j).then(function(a){for(var d,f=[],g=0;d=a[g++];)"object"==typeof d&&f.push(d);return c||(f.length?b.onError.call(k,f,e):b.onSuccess.call(k,f,e),b.onComplete.call(k,f,e)),f});return l},b.$watch("avalon-ms-duplex-init",function(d){var e=h.validationHooks;switch(d.valueAccessor=d.evaluator.apply(null,d.args),avalon.type(d.valueAccessor())){case"array":d.valueResetor=function(){this.valueAccessor([])};break;case"boolean":d.valueResetor=function(){this.valueAccessor(!1)};break;case"number":d.valueResetor=function(){this.valueAccessor(0)};break;default:d.valueResetor=function(){this.valueAccessor("")}}var f=avalon.duplexHooks;if("function"!=typeof d.pipe&&avalon.contains(a,d.element)){var g=[],i=[];if(d.param.replace(/\w+/g,function(a){var b=e[a]||f[a];b&&"function"==typeof b.get&&b.message?i.push(a):g.push(a)}),d.validate=b.validate,d.param=g.join("-"),d.validateParam=i.join("-"),i.length){b.validateInKeyup&&d.bound("keyup",function(a){var e=d.element&&d.element.getAttribute("data-duplex-event");if(!e||/^(?:key|mouse|click|input)/.test(e)){var f=c(a);setTimeout(function(){b.validate(d,0,f)})}}),b.validateInBlur&&d.bound("blur",function(a){b.validate(d,0,c(a))}),b.resetInFocus&&d.bound("focus",function(a){b.onReset.call(d.element,c(a),d)});var j=b.data.filter(function(a){return a.element});avalon.Array.ensure(j,d),b.data=j}return!1}})});return h},k=/\\?{{([^{}]+)\}}/gm;j.defaults={validationHooks:{},onSuccess:avalon.noop,onError:avalon.noop,onComplete:avalon.noop,onValidateAll:avalon.noop,onReset:avalon.noop,onResetAll:avalon.noop,validateInBlur:!0,validateInKeyup:!0,validateAllInSubmit:!0,resetInFocus:!0}}()},{"../mmPromise/avalon.mmPromise":23}]},{},[18]);